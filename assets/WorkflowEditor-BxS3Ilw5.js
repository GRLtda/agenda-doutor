import{J as Dy,N as Se,a8 as bg,a9 as Ut,aa as wg,w as be,ab as $y,U as Eg,c as Z,o as j,e as ge,ac as Ce,m as Me,b as z,p as Y,ad as jt,ae as By,a as le,af as Vn,ag as we,ah as Ly,r as ye,i as ut,y as Oe,ai as Ue,aj as zy,F as Te,t as ot,Y as He,ak as Sg,l as me,al as Vy,k as Ne,O as Yn,x as Ie,am as Il,an as Fy,ao as Gy,ap as zt,aq as xg,Q as _e,ar as ve,as as Hy,at as Cg,$ as Et,n as $e,au as un,av as Uy,_ as Tl,aw as Kn,ax as dl,ay as Ng,az as Ig,z as qn,X as Pr,aA as jy,d as nt,v as en,I as Yy,G as Ky,aB as Xy,aC as An,aD as Wy,aE as Zy,g as Jy,u as Qy,aF as e_,h as t_,aG as n_,aH as r_,H as o_,S as ac,aI as i_,aJ as Or,C as a_,A as s_,f as u_}from"./index-D0Sslu2F.js";import{u as l_}from"./workflows-CcIfcbEd.js";/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=Dy("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);function fn(e){return bg()?(Vn(e),!0):!1}function rt(e){return typeof e=="function"?e():Y(e)}const d_=typeof window<"u"&&typeof document<"u",f_=e=>typeof e<"u",h_=Object.prototype.toString,v_=e=>h_.call(e)==="[object Object]",p_=()=>{};function g_(e,t){function n(...r){return new Promise((o,i)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(o).catch(i)})}return n}const Tg=e=>e();function m_(e=Tg){const t=ye(!0);function n(){t.value=!1}function r(){t.value=!0}const o=(...i)=>{t.value&&e(...i)};return{isActive:Uy(t),pause:n,resume:r,eventFilter:o}}function sc(e,t=!1,n="Timeout"){return new Promise((r,o)=>{setTimeout(t?()=>o(n):r,e)})}function y_(e,t,n={}){const{eventFilter:r=Tg,...o}=n;return be(e,g_(r,t),o)}function Ot(e,t,n={}){const{eventFilter:r,...o}=n,{eventFilter:i,pause:a,resume:s,isActive:u}=m_(r);return{stop:y_(e,t,{...o,eventFilter:i}),pause:a,resume:s,isActive:u}}function __(e,t={}){if(!Il(e))return Fy(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const r in e.value)n[r]=Gy(()=>({get(){return e.value[r]},set(o){var i;if((i=rt(t.replaceRef))!=null?i:!0)if(Array.isArray(e.value)){const s=[...e.value];s[r]=o,e.value=s}else{const s={...e.value,[r]:o};Object.setPrototypeOf(s,Object.getPrototypeOf(e.value)),e.value=s}else e.value[r]=o}}));return n}function fl(e,t=!1){function n(d,{flush:f="sync",deep:h=!1,timeout:b,throwOnTimeout:m}={}){let g=null;const y=[new Promise(v=>{g=be(e,p=>{d(p)!==t&&(g?.(),v(p))},{flush:f,deep:h,immediate:!0})})];return b!=null&&y.push(sc(b,m).then(()=>rt(e)).finally(()=>g?.())),Promise.race(y)}function r(d,f){if(!Il(d))return n(p=>p===d,f);const{flush:h="sync",deep:b=!1,timeout:m,throwOnTimeout:g}=f??{};let _=null;const v=[new Promise(p=>{_=be([e,d],([S,q])=>{t!==(S===q)&&(_?.(),p(S))},{flush:h,deep:b,immediate:!0})})];return m!=null&&v.push(sc(m,g).then(()=>rt(e)).finally(()=>(_?.(),rt(e)))),Promise.race(v)}function o(d){return n(f=>!!f,d)}function i(d){return r(null,d)}function a(d){return r(void 0,d)}function s(d){return n(Number.isNaN,d)}function u(d,f){return n(h=>{const b=Array.from(h);return b.includes(d)||b.includes(rt(d))},f)}function l(d){return c(1,d)}function c(d=1,f){let h=-1;return n(()=>(h+=1,h>=d),f)}return Array.isArray(rt(e))?{toMatch:n,toContains:u,changed:l,changedTimes:c,get not(){return fl(e,!t)}}:{toMatch:n,toBe:r,toBeTruthy:o,toBeNull:i,toBeNaN:s,toBeUndefined:a,changed:l,changedTimes:c,get not(){return fl(e,!t)}}}function hl(e){return fl(e)}function b_(e){var t;const n=rt(e);return(t=n?.$el)!=null?t:n}const qg=d_?window:void 0;function Ag(...e){let t,n,r,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,o]=e,t=qg):[t,n,r,o]=e,!t)return p_;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const i=[],a=()=>{i.forEach(c=>c()),i.length=0},s=(c,d,f,h)=>(c.addEventListener(d,f,h),()=>c.removeEventListener(d,f,h)),u=be(()=>[b_(t),rt(o)],([c,d])=>{if(a(),!c)return;const f=v_(d)?{...d}:d;i.push(...n.flatMap(h=>r.map(b=>s(c,h,b,f))))},{immediate:!0,flush:"post"}),l=()=>{u(),a()};return fn(l),l}function w_(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function uc(...e){let t,n,r={};e.length===3?(t=e[0],n=e[1],r=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],r=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:o=qg,eventName:i="keydown",passive:a=!1,dedupe:s=!1}=r,u=w_(t);return Ag(o,i,c=>{c.repeat&&rt(s)||u(c)&&n(c)},a)}function E_(e){return JSON.parse(JSON.stringify(e))}function Dr(e,t,n,r={}){var o,i,a;const{clone:s=!1,passive:u=!1,eventName:l,deep:c=!1,defaultValue:d,shouldEmit:f}=r,h=jt(),b=n||h?.emit||((o=h?.$emit)==null?void 0:o.bind(h))||((a=(i=h?.proxy)==null?void 0:i.$emit)==null?void 0:a.bind(h?.proxy));let m=l;t||(t="modelValue"),m=m||`update:${t.toString()}`;const g=v=>s?typeof s=="function"?s(v):E_(v):v,_=()=>f_(e[t])?g(e[t]):d,y=v=>{f?f(v)&&b(m,v):b(m,v)};if(u){const v=_(),p=ye(v);let S=!1;return be(()=>e[t],q=>{S||(S=!0,p.value=g(q),He(()=>S=!1))}),be(p,q=>{!S&&(q!==e[t]||c)&&y(q)},{deep:c}),p}else return le({get(){return _()},set(v){y(v)}})}var S_={value:()=>{}};function ar(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Fn(n)}function Fn(e){this._=e}function x_(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Fn.prototype=ar.prototype={constructor:Fn,on:function(e,t){var n=this._,r=x_(e+"",n),o,i=-1,a=r.length;if(arguments.length<2){for(;++i<a;)if((o=(e=r[i]).type)&&(o=C_(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(o=(e=r[i]).type)n[o]=lc(n[o],e.name,t);else if(t==null)for(o in n)n[o]=lc(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Fn(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function C_(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function lc(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=S_,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var vl="http://www.w3.org/1999/xhtml";const cc={svg:"http://www.w3.org/2000/svg",xhtml:vl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),cc.hasOwnProperty(t)?{space:cc[t],local:e}:e}function N_(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===vl&&t.documentElement.namespaceURI===vl?t.createElement(e):t.createElementNS(n,e)}}function I_(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function kg(e){var t=sr(e);return(t.local?I_:N_)(t)}function T_(){}function ql(e){return e==null?T_:function(){return this.querySelector(e)}}function q_(e){typeof e!="function"&&(e=ql(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=new Array(a),u,l,c=0;c<a;++c)(u=i[c])&&(l=e.call(u,u.__data__,c,i))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new Be(r,this._parents)}function A_(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function k_(){return[]}function Rg(e){return e==null?k_:function(){return this.querySelectorAll(e)}}function R_(e){return function(){return A_(e.apply(this,arguments))}}function M_(e){typeof e=="function"?e=R_(e):e=Rg(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a=t[i],s=a.length,u,l=0;l<s;++l)(u=a[l])&&(r.push(e.call(u,u.__data__,l,a)),o.push(u));return new Be(r,o)}function Mg(e){return function(){return this.matches(e)}}function Pg(e){return function(t){return t.matches(e)}}var P_=Array.prototype.find;function O_(e){return function(){return P_.call(this.children,e)}}function D_(){return this.firstElementChild}function $_(e){return this.select(e==null?D_:O_(typeof e=="function"?e:Pg(e)))}var B_=Array.prototype.filter;function L_(){return Array.from(this.children)}function z_(e){return function(){return B_.call(this.children,e)}}function V_(e){return this.selectAll(e==null?L_:z_(typeof e=="function"?e:Pg(e)))}function F_(e){typeof e!="function"&&(e=Mg(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=[],u,l=0;l<a;++l)(u=i[l])&&e.call(u,u.__data__,l,i)&&s.push(u);return new Be(r,this._parents)}function Og(e){return new Array(e.length)}function G_(){return new Be(this._enter||this._groups.map(Og),this._parents)}function Xn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Xn.prototype={constructor:Xn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function H_(e){return function(){return e}}function U_(e,t,n,r,o,i){for(var a=0,s,u=t.length,l=i.length;a<l;++a)(s=t[a])?(s.__data__=i[a],r[a]=s):n[a]=new Xn(e,i[a]);for(;a<u;++a)(s=t[a])&&(o[a]=s)}function j_(e,t,n,r,o,i,a){var s,u,l=new Map,c=t.length,d=i.length,f=new Array(c),h;for(s=0;s<c;++s)(u=t[s])&&(f[s]=h=a.call(u,u.__data__,s,t)+"",l.has(h)?o[s]=u:l.set(h,u));for(s=0;s<d;++s)h=a.call(e,i[s],s,i)+"",(u=l.get(h))?(r[s]=u,u.__data__=i[s],l.delete(h)):n[s]=new Xn(e,i[s]);for(s=0;s<c;++s)(u=t[s])&&l.get(f[s])===u&&(o[s]=u)}function Y_(e){return e.__data__}function K_(e,t){if(!arguments.length)return Array.from(this,Y_);var n=t?j_:U_,r=this._parents,o=this._groups;typeof e!="function"&&(e=H_(e));for(var i=o.length,a=new Array(i),s=new Array(i),u=new Array(i),l=0;l<i;++l){var c=r[l],d=o[l],f=d.length,h=X_(e.call(c,c&&c.__data__,l,r)),b=h.length,m=s[l]=new Array(b),g=a[l]=new Array(b),_=u[l]=new Array(f);n(c,d,m,g,_,h,t);for(var y=0,v=0,p,S;y<b;++y)if(p=m[y]){for(y>=v&&(v=y+1);!(S=g[v])&&++v<b;);p._next=S||null}}return a=new Be(a,r),a._enter=s,a._exit=u,a}function X_(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function W_(){return new Be(this._exit||this._groups.map(Og),this._parents)}function Z_(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function J_(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,a=Math.min(o,i),s=new Array(o),u=0;u<a;++u)for(var l=n[u],c=r[u],d=l.length,f=s[u]=new Array(d),h,b=0;b<d;++b)(h=l[b]||c[b])&&(f[b]=h);for(;u<o;++u)s[u]=n[u];return new Be(s,this._parents)}function Q_(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],a;--o>=0;)(a=r[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function eb(e){e||(e=tb);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a=n[i],s=a.length,u=o[i]=new Array(s),l,c=0;c<s;++c)(l=a[c])&&(u[c]=l);u.sort(t)}return new Be(o,this._parents).order()}function tb(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function nb(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function rb(){return Array.from(this)}function ob(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null}function ib(){let e=0;for(const t of this)++e;return e}function ab(){return!this.node()}function sb(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,a=o.length,s;i<a;++i)(s=o[i])&&e.call(s,s.__data__,i,o);return this}function ub(e){return function(){this.removeAttribute(e)}}function lb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cb(e,t){return function(){this.setAttribute(e,t)}}function db(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function fb(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function hb(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vb(e,t){var n=sr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?lb:ub:typeof t=="function"?n.local?hb:fb:n.local?db:cb)(n,t))}function Dg(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function pb(e){return function(){this.style.removeProperty(e)}}function gb(e,t,n){return function(){this.style.setProperty(e,t,n)}}function mb(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function yb(e,t,n){return arguments.length>1?this.each((t==null?pb:typeof t=="function"?mb:gb)(e,t,n??"")):Vt(this.node(),e)}function Vt(e,t){return e.style.getPropertyValue(t)||Dg(e).getComputedStyle(e,null).getPropertyValue(t)}function _b(e){return function(){delete this[e]}}function bb(e,t){return function(){this[e]=t}}function wb(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Eb(e,t){return arguments.length>1?this.each((t==null?_b:typeof t=="function"?wb:bb)(e,t)):this.node()[e]}function $g(e){return e.trim().split(/^|\s+/)}function Al(e){return e.classList||new Bg(e)}function Bg(e){this._node=e,this._names=$g(e.getAttribute("class")||"")}Bg.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Lg(e,t){for(var n=Al(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function zg(e,t){for(var n=Al(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Sb(e){return function(){Lg(this,e)}}function xb(e){return function(){zg(this,e)}}function Cb(e,t){return function(){(t.apply(this,arguments)?Lg:zg)(this,e)}}function Nb(e,t){var n=$g(e+"");if(arguments.length<2){for(var r=Al(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Cb:t?Sb:xb)(n,t))}function Ib(){this.textContent=""}function Tb(e){return function(){this.textContent=e}}function qb(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ab(e){return arguments.length?this.each(e==null?Ib:(typeof e=="function"?qb:Tb)(e)):this.node().textContent}function kb(){this.innerHTML=""}function Rb(e){return function(){this.innerHTML=e}}function Mb(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Pb(e){return arguments.length?this.each(e==null?kb:(typeof e=="function"?Mb:Rb)(e)):this.node().innerHTML}function Ob(){this.nextSibling&&this.parentNode.appendChild(this)}function Db(){return this.each(Ob)}function $b(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Bb(){return this.each($b)}function Lb(e){var t=typeof e=="function"?e:kg(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function zb(){return null}function Vb(e,t){var n=typeof e=="function"?e:kg(e),r=t==null?zb:typeof t=="function"?t:ql(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Fb(){var e=this.parentNode;e&&e.removeChild(this)}function Gb(){return this.each(Fb)}function Hb(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ub(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function jb(e){return this.select(e?Ub:Hb)}function Yb(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Kb(e){return function(t){e.call(this,t,this.__data__)}}function Xb(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Wb(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Zb(e,t,n){return function(){var r=this.__on,o,i=Kb(t);if(r){for(var a=0,s=r.length;a<s;++a)if((o=r[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Jb(e,t,n){var r=Xb(e+""),o,i=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(o=0,c=s[u];o<i;++o)if((a=r[o]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?Zb:Wb,o=0;o<i;++o)this.each(s(r[o],t,n));return this}function Vg(e,t,n){var r=Dg(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Qb(e,t){return function(){return Vg(this,e,t)}}function e0(e,t){return function(){return Vg(this,e,t.apply(this,arguments))}}function t0(e,t){return this.each((typeof t=="function"?e0:Qb)(e,t))}function*n0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,a;o<i;++o)(a=r[o])&&(yield a)}var Fg=[null];function Be(e,t){this._groups=e,this._parents=t}function bn(){return new Be([[document.documentElement]],Fg)}function r0(){return this}Be.prototype=bn.prototype={constructor:Be,select:q_,selectAll:M_,selectChild:$_,selectChildren:V_,filter:F_,data:K_,enter:G_,exit:W_,join:Z_,merge:J_,selection:r0,order:Q_,sort:eb,call:nb,nodes:rb,node:ob,size:ib,empty:ab,each:sb,attr:vb,style:yb,property:Eb,classed:Nb,text:Ab,html:Pb,raise:Db,lower:Bb,append:Lb,insert:Vb,remove:Gb,clone:jb,datum:Yb,on:Jb,dispatch:t0,[Symbol.iterator]:n0};function Fe(e){return typeof e=="string"?new Be([[document.querySelector(e)]],[document.documentElement]):new Be([[e]],Fg)}function o0(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Xe(e,t){if(e=o0(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const i0={passive:!1},hn={capture:!0,passive:!1};function $r(e){e.stopImmediatePropagation()}function $t(e){e.preventDefault(),e.stopImmediatePropagation()}function Gg(e){var t=e.document.documentElement,n=Fe(e).on("dragstart.drag",$t,hn);"onselectstart"in t?n.on("selectstart.drag",$t,hn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Hg(e,t){var n=e.document.documentElement,r=Fe(e).on("dragstart.drag",null);t&&(r.on("click.drag",$t,hn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const kn=e=>()=>e;function pl(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:a,y:s,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}pl.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function a0(e){return!e.ctrlKey&&!e.button}function s0(){return this.parentNode}function u0(e,t){return t??{x:e.x,y:e.y}}function l0(){return navigator.maxTouchPoints||"ontouchstart"in this}function c0(){var e=a0,t=s0,n=u0,r=l0,o={},i=ar("start","drag","end"),a=0,s,u,l,c,d=0;function f(p){p.on("mousedown.drag",h).filter(r).on("touchstart.drag",g).on("touchmove.drag",_,i0).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(p,S){if(!(c||!e.call(this,p,S))){var q=v(this,t.call(this,p,S),p,S,"mouse");q&&(Fe(p.view).on("mousemove.drag",b,hn).on("mouseup.drag",m,hn),Gg(p.view),$r(p),l=!1,s=p.clientX,u=p.clientY,q("start",p))}}function b(p){if($t(p),!l){var S=p.clientX-s,q=p.clientY-u;l=S*S+q*q>d}o.mouse("drag",p)}function m(p){Fe(p.view).on("mousemove.drag mouseup.drag",null),Hg(p.view,l),$t(p),o.mouse("end",p)}function g(p,S){if(e.call(this,p,S)){var q=p.changedTouches,A=t.call(this,p,S),O=q.length,B,$;for(B=0;B<O;++B)($=v(this,A,p,S,q[B].identifier,q[B]))&&($r(p),$("start",p,q[B]))}}function _(p){var S=p.changedTouches,q=S.length,A,O;for(A=0;A<q;++A)(O=o[S[A].identifier])&&($t(p),O("drag",p,S[A]))}function y(p){var S=p.changedTouches,q=S.length,A,O;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),A=0;A<q;++A)(O=o[S[A].identifier])&&($r(p),O("end",p,S[A]))}function v(p,S,q,A,O,B){var $=i.copy(),P=Xe(B||q,S),N,F,I;if((I=n.call(p,new pl("beforestart",{sourceEvent:q,target:f,identifier:O,active:a,x:P[0],y:P[1],dx:0,dy:0,dispatch:$}),A))!=null)return N=I.x-P[0]||0,F=I.y-P[1]||0,function L(M,U,K){var W=P,X;switch(M){case"start":o[O]=L,X=a++;break;case"end":delete o[O],--a;case"drag":P=Xe(K||U,S),X=a;break}$.call(M,p,new pl(M,{sourceEvent:U,subject:I,target:f,identifier:O,active:X,x:P[0]+N,y:P[1]+F,dx:P[0]-W[0],dy:P[1]-W[1],dispatch:$}),A)}}return f.filter=function(p){return arguments.length?(e=typeof p=="function"?p:kn(!!p),f):e},f.container=function(p){return arguments.length?(t=typeof p=="function"?p:kn(p),f):t},f.subject=function(p){return arguments.length?(n=typeof p=="function"?p:kn(p),f):n},f.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:kn(!!p),f):r},f.on=function(){var p=i.on.apply(i,arguments);return p===i?f:p},f.clickDistance=function(p){return arguments.length?(d=(p=+p)*p,f):Math.sqrt(d)},f}function kl(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ug(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function wn(){}var vn=.7,Wn=1/vn,Bt="\\s*([+-]?\\d+)\\s*",pn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Je="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",d0=/^#([0-9a-f]{3,8})$/,f0=new RegExp(`^rgb\\(${Bt},${Bt},${Bt}\\)$`),h0=new RegExp(`^rgb\\(${Je},${Je},${Je}\\)$`),v0=new RegExp(`^rgba\\(${Bt},${Bt},${Bt},${pn}\\)$`),p0=new RegExp(`^rgba\\(${Je},${Je},${Je},${pn}\\)$`),g0=new RegExp(`^hsl\\(${pn},${Je},${Je}\\)$`),m0=new RegExp(`^hsla\\(${pn},${Je},${Je},${pn}\\)$`),dc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kl(wn,Tt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fc,formatHex:fc,formatHex8:y0,formatHsl:_0,formatRgb:hc,toString:hc});function fc(){return this.rgb().formatHex()}function y0(){return this.rgb().formatHex8()}function _0(){return jg(this).formatHsl()}function hc(){return this.rgb().formatRgb()}function Tt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=d0.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?vc(t):n===3?new Pe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Rn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Rn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=f0.exec(e))?new Pe(t[1],t[2],t[3],1):(t=h0.exec(e))?new Pe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=v0.exec(e))?Rn(t[1],t[2],t[3],t[4]):(t=p0.exec(e))?Rn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=g0.exec(e))?mc(t[1],t[2]/100,t[3]/100,1):(t=m0.exec(e))?mc(t[1],t[2]/100,t[3]/100,t[4]):dc.hasOwnProperty(e)?vc(dc[e]):e==="transparent"?new Pe(NaN,NaN,NaN,0):null}function vc(e){return new Pe(e>>16&255,e>>8&255,e&255,1)}function Rn(e,t,n,r){return r<=0&&(e=t=n=NaN),new Pe(e,t,n,r)}function b0(e){return e instanceof wn||(e=Tt(e)),e?(e=e.rgb(),new Pe(e.r,e.g,e.b,e.opacity)):new Pe}function gl(e,t,n,r){return arguments.length===1?b0(e):new Pe(e,t,n,r??1)}function Pe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}kl(Pe,gl,Ug(wn,{brighter(e){return e=e==null?Wn:Math.pow(Wn,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?vn:Math.pow(vn,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pe(Nt(this.r),Nt(this.g),Nt(this.b),Zn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pc,formatHex:pc,formatHex8:w0,formatRgb:gc,toString:gc}));function pc(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}`}function w0(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}${Ct((isNaN(this.opacity)?1:this.opacity)*255)}`}function gc(){const e=Zn(this.opacity);return`${e===1?"rgb(":"rgba("}${Nt(this.r)}, ${Nt(this.g)}, ${Nt(this.b)}${e===1?")":`, ${e})`}`}function Zn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ct(e){return e=Nt(e),(e<16?"0":"")+e.toString(16)}function mc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ge(e,t,n,r)}function jg(e){if(e instanceof Ge)return new Ge(e.h,e.s,e.l,e.opacity);if(e instanceof wn||(e=Tt(e)),!e)return new Ge;if(e instanceof Ge)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-o,u=(i+o)/2;return s?(t===i?a=(n-r)/s+(n<r)*6:n===i?a=(r-t)/s+2:a=(t-n)/s+4,s/=u<.5?i+o:2-i-o,a*=60):s=u>0&&u<1?0:a,new Ge(a,s,u,e.opacity)}function E0(e,t,n,r){return arguments.length===1?jg(e):new Ge(e,t,n,r??1)}function Ge(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}kl(Ge,E0,Ug(wn,{brighter(e){return e=e==null?Wn:Math.pow(Wn,e),new Ge(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vn:Math.pow(vn,e),new Ge(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Pe(Br(e>=240?e-240:e+120,o,r),Br(e,o,r),Br(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Ge(yc(this.h),Mn(this.s),Mn(this.l),Zn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zn(this.opacity);return`${e===1?"hsl(":"hsla("}${yc(this.h)}, ${Mn(this.s)*100}%, ${Mn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yc(e){return e=(e||0)%360,e<0?e+360:e}function Mn(e){return Math.max(0,Math.min(1,e||0))}function Br(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Rl=e=>()=>e;function S0(e,t){return function(n){return e+n*t}}function x0(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function C0(e){return(e=+e)==1?Yg:function(t,n){return n-t?x0(t,n,e):Rl(isNaN(t)?n:t)}}function Yg(e,t){var n=t-e;return n?S0(e,n):Rl(isNaN(e)?t:e)}const Jn=(function e(t){var n=C0(t);function r(o,i){var a=n((o=gl(o)).r,(i=gl(i)).r),s=n(o.g,i.g),u=n(o.b,i.b),l=Yg(o.opacity,i.opacity);return function(c){return o.r=a(c),o.g=s(c),o.b=u(c),o.opacity=l(c),o+""}}return r.gamma=e,r})(1);function N0(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),o;return function(i){for(o=0;o<n;++o)r[o]=e[o]*(1-i)+t[o]*i;return r}}function I0(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function T0(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),i=new Array(n),a;for(a=0;a<r;++a)o[a]=ln(e[a],t[a]);for(;a<n;++a)i[a]=t[a];return function(s){for(a=0;a<r;++a)i[a]=o[a](s);return i}}function q0(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function We(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function A0(e,t){var n={},r={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=ln(e[o],t[o]):r[o]=t[o];return function(i){for(o in n)r[o]=n[o](i);return r}}var ml=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lr=new RegExp(ml.source,"g");function k0(e){return function(){return e}}function R0(e){return function(t){return e(t)+""}}function Kg(e,t){var n=ml.lastIndex=Lr.lastIndex=0,r,o,i,a=-1,s=[],u=[];for(e=e+"",t=t+"";(r=ml.exec(e))&&(o=Lr.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),s[a]?s[a]+=i:s[++a]=i),(r=r[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,u.push({i:a,x:We(r,o)})),n=Lr.lastIndex;return n<t.length&&(i=t.slice(n),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?R0(u[0].x):k0(t):(t=u.length,function(l){for(var c=0,d;c<t;++c)s[(d=u[c]).i]=d.x(l);return s.join("")})}function ln(e,t){var n=typeof t,r;return t==null||n==="boolean"?Rl(t):(n==="number"?We:n==="string"?(r=Tt(t))?(t=r,Jn):Kg:t instanceof Tt?Jn:t instanceof Date?q0:I0(t)?N0:Array.isArray(t)?T0:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?A0:We)(e,t)}var _c=180/Math.PI,yl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xg(e,t,n,r,o,i){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*_c,skewX:Math.atan(u)*_c,scaleX:a,scaleY:s}}var Pn;function M0(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?yl:Xg(t.a,t.b,t.c,t.d,t.e,t.f)}function P0(e){return e==null||(Pn||(Pn=document.createElementNS("http://www.w3.org/2000/svg","g")),Pn.setAttribute("transform",e),!(e=Pn.transform.baseVal.consolidate()))?yl:(e=e.matrix,Xg(e.a,e.b,e.c,e.d,e.e,e.f))}function Wg(e,t,n,r){function o(l){return l.length?l.pop()+" ":""}function i(l,c,d,f,h,b){if(l!==d||c!==f){var m=h.push("translate(",null,t,null,n);b.push({i:m-4,x:We(l,d)},{i:m-2,x:We(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function a(l,c,d,f){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:d.push(o(d)+"rotate(",null,r)-2,x:We(l,c)})):c&&d.push(o(d)+"rotate("+c+r)}function s(l,c,d,f){l!==c?f.push({i:d.push(o(d)+"skewX(",null,r)-2,x:We(l,c)}):c&&d.push(o(d)+"skewX("+c+r)}function u(l,c,d,f,h,b){if(l!==d||c!==f){var m=h.push(o(h)+"scale(",null,",",null,")");b.push({i:m-4,x:We(l,d)},{i:m-2,x:We(c,f)})}else(d!==1||f!==1)&&h.push(o(h)+"scale("+d+","+f+")")}return function(l,c){var d=[],f=[];return l=e(l),c=e(c),i(l.translateX,l.translateY,c.translateX,c.translateY,d,f),a(l.rotate,c.rotate,d,f),s(l.skewX,c.skewX,d,f),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,f),l=c=null,function(h){for(var b=-1,m=f.length,g;++b<m;)d[(g=f[b]).i]=g.x(h);return d.join("")}}}var O0=Wg(M0,"px, ","px)","deg)"),D0=Wg(P0,", ",")",")"),$0=1e-12;function bc(e){return((e=Math.exp(e))+1/e)/2}function B0(e){return((e=Math.exp(e))-1/e)/2}function L0(e){return((e=Math.exp(2*e))-1)/(e+1)}const Gn=(function e(t,n,r){function o(i,a){var s=i[0],u=i[1],l=i[2],c=a[0],d=a[1],f=a[2],h=c-s,b=d-u,m=h*h+b*b,g,_;if(m<$0)_=Math.log(f/l)/t,g=function(A){return[s+A*h,u+A*b,l*Math.exp(t*A*_)]};else{var y=Math.sqrt(m),v=(f*f-l*l+r*m)/(2*l*n*y),p=(f*f-l*l-r*m)/(2*f*n*y),S=Math.log(Math.sqrt(v*v+1)-v),q=Math.log(Math.sqrt(p*p+1)-p);_=(q-S)/t,g=function(A){var O=A*_,B=bc(S),$=l/(n*y)*(B*L0(t*O+S)-B0(S));return[s+$*h,u+$*b,l*B/bc(t*O+S)]}}return g.duration=_*1e3*t/Math.SQRT2,g}return o.rho=function(i){var a=Math.max(.001,+i),s=a*a,u=s*s;return e(a,s,u)},o})(Math.SQRT2,2,4);var Ft=0,tn=0,Jt=0,Zg=1e3,Qn,nn,er=0,qt=0,ur=0,gn=typeof performance=="object"&&performance.now?performance:Date,Jg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ml(){return qt||(Jg(z0),qt=gn.now()+ur)}function z0(){qt=0}function tr(){this._call=this._time=this._next=null}tr.prototype=Qg.prototype={constructor:tr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ml():+n)+(t==null?0:+t),!this._next&&nn!==this&&(nn?nn._next=this:Qn=this,nn=this),this._call=e,this._time=n,_l()},stop:function(){this._call&&(this._call=null,this._time=1/0,_l())}};function Qg(e,t,n){var r=new tr;return r.restart(e,t,n),r}function V0(){Ml(),++Ft;for(var e=Qn,t;e;)(t=qt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ft}function wc(){qt=(er=gn.now())+ur,Ft=tn=0;try{V0()}finally{Ft=0,G0(),qt=0}}function F0(){var e=gn.now(),t=e-er;t>Zg&&(ur-=t,er=e)}function G0(){for(var e,t=Qn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Qn=n);nn=e,_l(r)}function _l(e){if(!Ft){tn&&(tn=clearTimeout(tn));var t=e-qt;t>24?(e<1/0&&(tn=setTimeout(wc,e-gn.now()-ur)),Jt&&(Jt=clearInterval(Jt))):(Jt||(er=gn.now(),Jt=setInterval(F0,Zg)),Ft=1,Jg(wc))}}function Ec(e,t,n){var r=new tr;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var H0=ar("start","end","cancel","interrupt"),U0=[],em=0,Sc=1,bl=2,Hn=3,xc=4,wl=5,Un=6;function lr(e,t,n,r,o,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;j0(e,n,{name:t,index:r,group:o,on:H0,tween:U0,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:em})}function Pl(e,t){var n=Ye(e,t);if(n.state>em)throw new Error("too late; already scheduled");return n}function Qe(e,t){var n=Ye(e,t);if(n.state>Hn)throw new Error("too late; already running");return n}function Ye(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function j0(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=Qg(i,0,n.time);function i(l){n.state=Sc,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var c,d,f,h;if(n.state!==Sc)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===Hn)return Ec(a);h.state===xc?(h.state=Un,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=Un,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Ec(function(){n.state===Hn&&(n.state=xc,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=bl,n.on.call("start",e,e.__data__,n.index,n.group),n.state===bl){for(n.state=Hn,o=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function s(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=wl,1),d=-1,f=o.length;++d<f;)o[d].call(e,c);n.state===wl&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Un,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function jn(e,t){var n=e.__transition,r,o,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){i=!1;continue}o=r.state>bl&&r.state<wl,r.state=Un,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}i&&delete e.__transition}}function Y0(e){return this.each(function(){jn(this,e)})}function K0(e,t){var n,r;return function(){var o=Qe(this,e),i=o.tween;if(i!==n){r=n=i;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}o.tween=r}}function X0(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=Qe(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},u=0,l=o.length;u<l;++u)if(o[u].name===t){o[u]=s;break}u===l&&o.push(s)}i.tween=o}}function W0(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ye(this.node(),n).tween,o=0,i=r.length,a;o<i;++o)if((a=r[o]).name===e)return a.value;return null}return this.each((t==null?K0:X0)(n,e,t))}function Ol(e,t,n){var r=e._id;return e.each(function(){var o=Qe(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Ye(o,r).value[t]}}function tm(e,t){var n;return(typeof t=="number"?We:t instanceof Tt?Jn:(n=Tt(t))?(t=n,Jn):Kg)(e,t)}function Z0(e){return function(){this.removeAttribute(e)}}function J0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Q0(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function e1(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function t1(e,t,n){var r,o,i;return function(){var a,s=n(this),u;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=s+"",a===u?null:a===r&&u===o?i:(o=u,i=t(r=a,s)))}}function n1(e,t,n){var r,o,i;return function(){var a,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=s+"",a===u?null:a===r&&u===o?i:(o=u,i=t(r=a,s)))}}function r1(e,t){var n=sr(e),r=n==="transform"?D0:tm;return this.attrTween(e,typeof t=="function"?(n.local?n1:t1)(n,r,Ol(this,"attr."+e,t)):t==null?(n.local?J0:Z0)(n):(n.local?e1:Q0)(n,r,t))}function o1(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function i1(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function a1(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&i1(e,i)),n}return o._value=t,o}function s1(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&o1(e,i)),n}return o._value=t,o}function u1(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=sr(e);return this.tween(n,(r.local?a1:s1)(r,t))}function l1(e,t){return function(){Pl(this,e).delay=+t.apply(this,arguments)}}function c1(e,t){return t=+t,function(){Pl(this,e).delay=t}}function d1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?l1:c1)(t,e)):Ye(this.node(),t).delay}function f1(e,t){return function(){Qe(this,e).duration=+t.apply(this,arguments)}}function h1(e,t){return t=+t,function(){Qe(this,e).duration=t}}function v1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?f1:h1)(t,e)):Ye(this.node(),t).duration}function p1(e,t){if(typeof t!="function")throw new Error;return function(){Qe(this,e).ease=t}}function g1(e){var t=this._id;return arguments.length?this.each(p1(t,e)):Ye(this.node(),t).ease}function m1(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Qe(this,e).ease=n}}function y1(e){if(typeof e!="function")throw new Error;return this.each(m1(this._id,e))}function _1(e){typeof e!="function"&&(e=Mg(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=[],u,l=0;l<a;++l)(u=i[l])&&e.call(u,u.__data__,l,i)&&s.push(u);return new st(r,this._parents,this._name,this._id)}function b1(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var u=t[s],l=n[s],c=u.length,d=a[s]=new Array(c),f,h=0;h<c;++h)(f=u[h]||l[h])&&(d[h]=f);for(;s<r;++s)a[s]=t[s];return new st(a,this._parents,this._name,this._id)}function w1(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function E1(e,t,n){var r,o,i=w1(t)?Pl:Qe;return function(){var a=i(this,e),s=a.on;s!==r&&(o=(r=s).copy()).on(t,n),a.on=o}}function S1(e,t){var n=this._id;return arguments.length<2?Ye(this.node(),n).on.on(e):this.each(E1(n,e,t))}function x1(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function C1(){return this.on("end.remove",x1(this._id))}function N1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ql(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var s=r[a],u=s.length,l=i[a]=new Array(u),c,d,f=0;f<u;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),l[f]=d,lr(l[f],t,n,f,l,Ye(c,n)));return new st(i,this._parents,t,n)}function I1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Rg(e));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var u=r[s],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var f=e.call(c,c.__data__,d,u),h,b=Ye(c,n),m=0,g=f.length;m<g;++m)(h=f[m])&&lr(h,t,n,m,f,b);i.push(f),a.push(c)}return new st(i,a,t,n)}var T1=bn.prototype.constructor;function q1(){return new T1(this._groups,this._parents)}function A1(e,t){var n,r,o;return function(){var i=Vt(this,e),a=(this.style.removeProperty(e),Vt(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}function nm(e){return function(){this.style.removeProperty(e)}}function k1(e,t,n){var r,o=n+"",i;return function(){var a=Vt(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}function R1(e,t,n){var r,o,i;return function(){var a=Vt(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),Vt(this,e))),a===u?null:a===r&&u===o?i:(o=u,i=t(r=a,s))}}function M1(e,t){var n,r,o,i="style."+t,a="end."+i,s;return function(){var u=Qe(this,e),l=u.on,c=u.value[i]==null?s||(s=nm(t)):void 0;(l!==n||o!==c)&&(r=(n=l).copy()).on(a,o=c),u.on=r}}function P1(e,t,n){var r=(e+="")=="transform"?O0:tm;return t==null?this.styleTween(e,A1(e,r)).on("end.style."+e,nm(e)):typeof t=="function"?this.styleTween(e,R1(e,r,Ol(this,"style."+e,t))).each(M1(this._id,e)):this.styleTween(e,k1(e,r,t),n).on("end.style."+e,null)}function O1(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function D1(e,t,n){var r,o;function i(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&O1(e,a,n)),r}return i._value=t,i}function $1(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,D1(e,t,n??""))}function B1(e){return function(){this.textContent=e}}function L1(e){return function(){var t=e(this);this.textContent=t??""}}function z1(e){return this.tween("text",typeof e=="function"?L1(Ol(this,"text",e)):B1(e==null?"":e+""))}function V1(e){return function(t){this.textContent=e.call(this,t)}}function F1(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&V1(o)),t}return r._value=e,r}function G1(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,F1(e))}function H1(){for(var e=this._name,t=this._id,n=rm(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],s=a.length,u,l=0;l<s;++l)if(u=a[l]){var c=Ye(u,t);lr(u,e,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new st(r,this._parents,e,n)}function U1(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,a){var s={value:a},u={value:function(){--o===0&&i()}};n.each(function(){var l=Qe(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),l.on=t}),o===0&&i()})}var j1=0;function st(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function rm(){return++j1}var tt=bn.prototype;st.prototype={constructor:st,select:N1,selectAll:I1,selectChild:tt.selectChild,selectChildren:tt.selectChildren,filter:_1,merge:b1,selection:q1,transition:H1,call:tt.call,nodes:tt.nodes,node:tt.node,size:tt.size,empty:tt.empty,each:tt.each,on:S1,attr:r1,attrTween:u1,style:P1,styleTween:$1,text:z1,textTween:G1,remove:C1,tween:W0,delay:d1,duration:v1,ease:g1,easeVarying:y1,end:U1,[Symbol.iterator]:tt[Symbol.iterator]};function Y1(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var K1={time:null,delay:0,duration:250,ease:Y1};function X1(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function W1(e){var t,n;e instanceof st?(t=e._id,e=e._name):(t=rm(),(n=K1).time=Ml(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],s=a.length,u,l=0;l<s;++l)(u=a[l])&&lr(u,e,t,l,a,n||X1(u,t));return new st(r,this._parents,e,t)}bn.prototype.interrupt=Y0;bn.prototype.transition=W1;const On=e=>()=>e;function Z1(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function it(e,t,n){this.k=e,this.x=t,this.y=n}it.prototype={constructor:it,scale:function(e){return e===1?this:new it(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new it(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Gt=new it(1,0,0);it.prototype;function zr(e){e.stopImmediatePropagation()}function Qt(e){e.preventDefault(),e.stopImmediatePropagation()}function J1(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Q1(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Cc(){return this.__zoom||Gt}function ew(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function tw(){return navigator.maxTouchPoints||"ontouchstart"in this}function nw(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function rw(){var e=J1,t=Q1,n=nw,r=ew,o=tw,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,u=Gn,l=ar("start","zoom","end"),c,d,f,h=500,b=150,m=0,g=10;function _(I){I.property("__zoom",Cc).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",$).filter(o).on("touchstart.zoom",P).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(I,L,M,U){var K=I.selection?I.selection():I;K.property("__zoom",Cc),I!==K?S(I,L,M,U):K.interrupt().each(function(){q(this,arguments).event(U).start().zoom(null,typeof L=="function"?L.apply(this,arguments):L).end()})},_.scaleBy=function(I,L,M,U){_.scaleTo(I,function(){var K=this.__zoom.k,W=typeof L=="function"?L.apply(this,arguments):L;return K*W},M,U)},_.scaleTo=function(I,L,M,U){_.transform(I,function(){var K=t.apply(this,arguments),W=this.__zoom,X=M==null?p(K):typeof M=="function"?M.apply(this,arguments):M,ne=W.invert(X),ae=typeof L=="function"?L.apply(this,arguments):L;return n(v(y(W,ae),X,ne),K,a)},M,U)},_.translateBy=function(I,L,M,U){_.transform(I,function(){return n(this.__zoom.translate(typeof L=="function"?L.apply(this,arguments):L,typeof M=="function"?M.apply(this,arguments):M),t.apply(this,arguments),a)},null,U)},_.translateTo=function(I,L,M,U,K){_.transform(I,function(){var W=t.apply(this,arguments),X=this.__zoom,ne=U==null?p(W):typeof U=="function"?U.apply(this,arguments):U;return n(Gt.translate(ne[0],ne[1]).scale(X.k).translate(typeof L=="function"?-L.apply(this,arguments):-L,typeof M=="function"?-M.apply(this,arguments):-M),W,a)},U,K)};function y(I,L){return L=Math.max(i[0],Math.min(i[1],L)),L===I.k?I:new it(L,I.x,I.y)}function v(I,L,M){var U=L[0]-M[0]*I.k,K=L[1]-M[1]*I.k;return U===I.x&&K===I.y?I:new it(I.k,U,K)}function p(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function S(I,L,M,U){I.on("start.zoom",function(){q(this,arguments).event(U).start()}).on("interrupt.zoom end.zoom",function(){q(this,arguments).event(U).end()}).tween("zoom",function(){var K=this,W=arguments,X=q(K,W).event(U),ne=t.apply(K,W),ae=M==null?p(ne):typeof M=="function"?M.apply(K,W):M,de=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),R=K.__zoom,D=typeof L=="function"?L.apply(K,W):L,T=u(R.invert(ae).concat(de/R.k),D.invert(ae).concat(de/D.k));return function(C){if(C===1)C=D;else{var V=T(C),H=de/V[2];C=new it(H,ae[0]-V[0]*H,ae[1]-V[1]*H)}X.zoom(null,C)}})}function q(I,L,M){return!M&&I.__zooming||new A(I,L)}function A(I,L){this.that=I,this.args=L,this.active=0,this.sourceEvent=null,this.extent=t.apply(I,L),this.taps=0}A.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,L){return this.mouse&&I!=="mouse"&&(this.mouse[1]=L.invert(this.mouse[0])),this.touch0&&I!=="touch"&&(this.touch0[1]=L.invert(this.touch0[0])),this.touch1&&I!=="touch"&&(this.touch1[1]=L.invert(this.touch1[0])),this.that.__zoom=L,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var L=Fe(this.that).datum();l.call(I,this.that,new Z1(I,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:l}),L)}};function O(I,...L){if(!e.apply(this,arguments))return;var M=q(this,L).event(I),U=this.__zoom,K=Math.max(i[0],Math.min(i[1],U.k*Math.pow(2,r.apply(this,arguments)))),W=Xe(I);if(M.wheel)(M.mouse[0][0]!==W[0]||M.mouse[0][1]!==W[1])&&(M.mouse[1]=U.invert(M.mouse[0]=W)),clearTimeout(M.wheel);else{if(U.k===K)return;M.mouse=[W,U.invert(W)],jn(this),M.start()}Qt(I),M.wheel=setTimeout(X,b),M.zoom("mouse",n(v(y(U,K),M.mouse[0],M.mouse[1]),M.extent,a));function X(){M.wheel=null,M.end()}}function B(I,...L){if(f||!e.apply(this,arguments))return;var M=I.currentTarget,U=q(this,L,!0).event(I),K=Fe(I.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",de,!0),W=Xe(I,M),X=I.clientX,ne=I.clientY;Gg(I.view),zr(I),U.mouse=[W,this.__zoom.invert(W)],jn(this),U.start();function ae(R){if(Qt(R),!U.moved){var D=R.clientX-X,T=R.clientY-ne;U.moved=D*D+T*T>m}U.event(R).zoom("mouse",n(v(U.that.__zoom,U.mouse[0]=Xe(R,M),U.mouse[1]),U.extent,a))}function de(R){K.on("mousemove.zoom mouseup.zoom",null),Hg(R.view,U.moved),Qt(R),U.event(R).end()}}function $(I,...L){if(e.apply(this,arguments)){var M=this.__zoom,U=Xe(I.changedTouches?I.changedTouches[0]:I,this),K=M.invert(U),W=M.k*(I.shiftKey?.5:2),X=n(v(y(M,W),U,K),t.apply(this,L),a);Qt(I),s>0?Fe(this).transition().duration(s).call(S,X,U,I):Fe(this).call(_.transform,X,U,I)}}function P(I,...L){if(e.apply(this,arguments)){var M=I.touches,U=M.length,K=q(this,L,I.changedTouches.length===U).event(I),W,X,ne,ae;for(zr(I),X=0;X<U;++X)ne=M[X],ae=Xe(ne,this),ae=[ae,this.__zoom.invert(ae),ne.identifier],K.touch0?!K.touch1&&K.touch0[2]!==ae[2]&&(K.touch1=ae,K.taps=0):(K.touch0=ae,W=!0,K.taps=1+!!c);c&&(c=clearTimeout(c)),W&&(K.taps<2&&(d=ae[0],c=setTimeout(function(){c=null},h)),jn(this),K.start())}}function N(I,...L){if(this.__zooming){var M=q(this,L).event(I),U=I.changedTouches,K=U.length,W,X,ne,ae;for(Qt(I),W=0;W<K;++W)X=U[W],ne=Xe(X,this),M.touch0&&M.touch0[2]===X.identifier?M.touch0[0]=ne:M.touch1&&M.touch1[2]===X.identifier&&(M.touch1[0]=ne);if(X=M.that.__zoom,M.touch1){var de=M.touch0[0],R=M.touch0[1],D=M.touch1[0],T=M.touch1[1],C=(C=D[0]-de[0])*C+(C=D[1]-de[1])*C,V=(V=T[0]-R[0])*V+(V=T[1]-R[1])*V;X=y(X,Math.sqrt(C/V)),ne=[(de[0]+D[0])/2,(de[1]+D[1])/2],ae=[(R[0]+T[0])/2,(R[1]+T[1])/2]}else if(M.touch0)ne=M.touch0[0],ae=M.touch0[1];else return;M.zoom("touch",n(v(X,ne,ae),M.extent,a))}}function F(I,...L){if(this.__zooming){var M=q(this,L).event(I),U=I.changedTouches,K=U.length,W,X;for(zr(I),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),W=0;W<K;++W)X=U[W],M.touch0&&M.touch0[2]===X.identifier?delete M.touch0:M.touch1&&M.touch1[2]===X.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(X=Xe(X,this),Math.hypot(d[0]-X[0],d[1]-X[1])<g)){var ne=Fe(this).on("dblclick.zoom");ne&&ne.apply(this,arguments)}}}return _.wheelDelta=function(I){return arguments.length?(r=typeof I=="function"?I:On(+I),_):r},_.filter=function(I){return arguments.length?(e=typeof I=="function"?I:On(!!I),_):e},_.touchable=function(I){return arguments.length?(o=typeof I=="function"?I:On(!!I),_):o},_.extent=function(I){return arguments.length?(t=typeof I=="function"?I:On([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),_):t},_.scaleExtent=function(I){return arguments.length?(i[0]=+I[0],i[1]=+I[1],_):[i[0],i[1]]},_.translateExtent=function(I){return arguments.length?(a[0][0]=+I[0][0],a[1][0]=+I[1][0],a[0][1]=+I[0][1],a[1][1]=+I[1][1],_):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},_.constrain=function(I){return arguments.length?(n=I,_):n},_.duration=function(I){return arguments.length?(s=+I,_):s},_.interpolate=function(I){return arguments.length?(u=I,_):u},_.on=function(){var I=l.on.apply(l,arguments);return I===l?_:I},_.clickDistance=function(I){return arguments.length?(m=(I=+I)*I,_):Math.sqrt(m)},_.tapDistance=function(I){return arguments.length?(g=+I,_):g},_}var ie=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(ie||{}),Dl=(e=>(e.Partial="partial",e.Full="full",e))(Dl||{}),St=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(St||{}),yt=(e=>(e.Strict="strict",e.Loose="loose",e))(yt||{}),El=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(El||{}),cn=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(cn||{}),om=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(om||{});const ow=["INPUT","SELECT","TEXTAREA"],iw=typeof document<"u"?document:null;function Sl(e){var t,n;const r=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,o=typeof r?.hasAttribute=="function"?r.hasAttribute("contenteditable"):!1,i=typeof r?.closest=="function"?r.closest(".nokey"):null;return ow.includes(r?.nodeName)||o||!!i}function aw(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function Nc(e,t,n,r){const o=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(a=>a.trim().toLowerCase());if(o.length===1)return e.toLowerCase()===t.toLowerCase();r||n.add(e.toLowerCase());const i=o.every((a,s)=>n.has(a)&&Array.from(n.values())[s]===o[s]);return r&&n.delete(e.toLowerCase()),i}function sw(e,t){return n=>{if(!n.code&&!n.key)return!1;const r=uw(n.code,e);return Array.isArray(e)?e.some(o=>Nc(n[r],o,t,n.type==="keyup")):Nc(n[r],e,t,n.type==="keyup")}}function uw(e,t){return t.includes(e)?"code":"key"}function dn(e,t){const n=le(()=>ve(t?.target)??iw),r=Yn(ve(e)===!0);let o=!1;const i=new Set;let a=u(ve(e));be(()=>ve(e),(l,c)=>{typeof c=="boolean"&&typeof l!="boolean"&&s(),a=u(l)},{immediate:!0}),Ag(["blur","contextmenu"],s),uc((...l)=>a(...l),l=>{var c,d;const f=ve(t?.actInsideInputWithModifier)??!0,h=ve(t?.preventDefault)??!1;if(o=aw(l),(!o||o&&!f)&&Sl(l))return;const m=((d=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:d[0])||l.target,g=m?.nodeName==="BUTTON"||m?.nodeName==="A";!h&&(o||!g)&&l.preventDefault(),r.value=!0},{eventName:"keydown",target:n}),uc((...l)=>a(...l),l=>{const c=ve(t?.actInsideInputWithModifier)??!0;if(r.value){if((!o||o&&!c)&&Sl(l))return;o=!1,r.value=!1}},{eventName:"keyup",target:n});function s(){o=!1,i.clear(),r.value=ve(e)===!0}function u(l){return l===null?(s(),()=>!1):typeof l=="boolean"?(s(),r.value=l,()=>!1):Array.isArray(l)||typeof l=="string"?sw(l,i):l}return r}const im="vue-flow__node-desc",am="vue-flow__edge-desc",lw="vue-flow__aria-live",sm=["Enter"," ","Escape"],Lt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function nr(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function rr(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)}function cr(e){return{width:e.offsetWidth,height:e.offsetHeight}}function At(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function um(e,t){return{x:At(e.x,t[0][0],t[1][0]),y:At(e.y,t[0][1],t[1][1])}}function Ic(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function _t(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function It(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!_t(e)}function rn(e){return It(e)&&"computedPosition"in e}function Dn(e){return!Number.isNaN(e)&&Number.isFinite(e)}function cw(e){return Dn(e.width)&&Dn(e.height)&&Dn(e.x)&&Dn(e.y)}function dw(e,t,n){const r={id:e.id.toString(),type:e.type??"default",dimensions:un({width:0,height:0}),computedPosition:un({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:qe(e.data)?e.data:{},events:un(qe(e.events)?e.events:{})};return Object.assign(t??r,e,{id:e.id.toString(),parentNode:n})}function lm(e,t,n){var r,o;const i={id:e.id.toString(),type:e.type??t?.type??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(r=e.sourceHandle)==null?void 0:r.toString(),targetHandle:(o=e.targetHandle)==null?void 0:o.toString(),updatable:e.updatable??n?.updatable,selectable:e.selectable??n?.selectable,focusable:e.focusable??n?.focusable,data:qe(e.data)?e.data:{},events:un(qe(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??n?.interactionWidth,...n??{}};return Object.assign(t??i,e,{id:e.id.toString()})}function cm(e,t,n,r){const o=typeof e=="string"?e:e.id,i=new Set,a=r==="source"?"target":"source";for(const s of n)s[a]===o&&i.add(s[r]);return t.filter(s=>i.has(s.id))}function fw(...e){if(e.length===3){const[i,a,s]=e;return cm(i,a,s,"target")}const[t,n]=e,r=typeof t=="string"?t:t.id;return n.filter(i=>_t(i)&&i.source===r).map(i=>n.find(a=>It(a)&&a.id===i.target))}function hw(...e){if(e.length===3){const[i,a,s]=e;return cm(i,a,s,"source")}const[t,n]=e,r=typeof t=="string"?t:t.id;return n.filter(i=>_t(i)&&i.target===r).map(i=>n.find(a=>It(a)&&a.id===i.source))}function dm({source:e,sourceHandle:t,target:n,targetHandle:r}){return`vueflow__edge-${e}${t??""}-${n}${r??""}`}function vw(e,t){return t.some(n=>_t(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function mn({x:e,y:t},{x:n,y:r,zoom:o}){return{x:e*o+n,y:t*o+r}}function yn({x:e,y:t},{x:n,y:r,zoom:o},i=!1,a=[1,1]){const s={x:(e-n)/o,y:(t-r)/o};return i?dr(s,a):s}function pw(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function fm({x:e,y:t,width:n,height:r}){return{x:e,y:t,x2:e+n,y2:t+r}}function gw({x:e,y:t,x2:n,y2:r}){return{x:e,y:t,width:n-e,height:r-t}}function hm(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const r=e[n];t=pw(t,fm({...r.computedPosition,...r.dimensions}))}return gw(t)}function vm(e,t,n={x:0,y:0,zoom:1},r=!1,o=!1){const i={...yn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},a=[];for(const s of e){const{dimensions:u,selectable:l=!0,hidden:c=!1}=s,d=u.width??s.width??null,f=u.height??s.height??null;if(o&&!l||c)continue;const h=rr(i,nr(s)),b=d===null||f===null,m=r&&h>0,g=(d??0)*(f??0);(b||m||h>=g||s.dragging)&&a.push(s)}return a}function pm(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const r of e)n.add(r.id);return t.filter(r=>n.has(r.source)||n.has(r.target))}function Dt(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return En(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function mw(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Dt(e,n),o=Dt(e,t);return{top:r,right:o,bottom:r,left:o,x:o*2,y:r*2}}if(typeof e=="object"){const r=Dt(e.top??e.y??0,n),o=Dt(e.bottom??e.y??0,n),i=Dt(e.left??e.x??0,t),a=Dt(e.right??e.x??0,t);return{top:r,right:a,bottom:o,left:i,x:i+a,y:r+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function yw(e,t,n,r,o,i){const{x:a,y:s}=mn(e,{x:t,y:n,zoom:r}),{x:u,y:l}=mn({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:r}),c=o-u,d=i-l;return{left:Math.floor(a),top:Math.floor(s),right:Math.floor(c),bottom:Math.floor(d)}}function Tc(e,t,n,r,o,i=.1){const a=mw(i,t,n),s=(t-a.x)/e.width,u=(n-a.y)/e.height,l=Math.min(s,u),c=At(l,r,o),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c,b=n/2-f*c,m=yw(e,h,b,c,t,n),g={left:Math.min(m.left-a.left,0),top:Math.min(m.top-a.top,0),right:Math.min(m.right-a.right,0),bottom:Math.min(m.bottom-a.bottom,0)};return{x:h-g.left+g.right,y:b-g.top+g.bottom,zoom:c}}function _w(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function gm(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:gm(n,t):!1}function _n(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`}function qc(e){const t=e.ctrlKey&&or()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function Ac(e,t,n){return e<t?At(Math.abs(e-t),1,t)/t:e>n?-At(Math.abs(e-n),1,t)/t:0}function mm(e,t,n=15,r=40){const o=Ac(e.x,r,t.width-r)*n,i=Ac(e.y,r,t.height-r)*n;return[o,i]}function Vr(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,r=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||r>0||e.position.x<0||e.position.y<0){let o={};if(typeof t.style=="function"?o={...t.style(t)}:t.style&&(o={...t.style}),o.width=o.width??`${t.dimensions.width}px`,o.height=o.height??`${t.dimensions.height}px`,n>0)if(typeof o.width=="string"){const i=Number(o.width.replace("px",""));o.width=`${i+n}px`}else o.width+=n;if(r>0)if(typeof o.height=="string"){const i=Number(o.height.replace("px",""));o.height=`${i+r}px`}else o.height+=r;if(e.position.x<0){const i=Math.abs(e.position.x);if(t.position.x=t.position.x-i,typeof o.width=="string"){const a=Number(o.width.replace("px",""));o.width=`${a+i}px`}else o.width+=i;e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);if(t.position.y=t.position.y-i,typeof o.height=="string"){const a=Number(o.height.replace("px",""));o.height=`${a+i}px`}else o.height+=i;e.position.y=0}t.dimensions.width=Number(o.width.toString().replace("px","")),t.dimensions.height=Number(o.height.toString().replace("px","")),typeof t.style=="function"?t.style=i=>{const a=t.style;return{...a(i),...o}}:t.style={...t.style,...o}}}}function kc(e,t){var n,r;const o=e.filter(a=>a.type==="add"||a.type==="remove");for(const a of o)if(a.type==="add")t.findIndex(u=>u.id===a.item.id)===-1&&t.push(a.item);else if(a.type==="remove"){const s=t.findIndex(u=>u.id===a.id);s!==-1&&t.splice(s,1)}const i=t.map(a=>a.id);for(const a of t)for(const s of e)if(s.id===a.id)switch(s.type){case"select":a.selected=s.selected;break;case"position":if(rn(a)&&(typeof s.position<"u"&&(a.position=s.position),typeof s.dragging<"u"&&(a.dragging=s.dragging),a.expandParent&&a.parentNode)){const u=t[i.indexOf(a.parentNode)];u&&rn(u)&&Vr(a,u)}break;case"dimensions":if(rn(a)&&(typeof s.dimensions<"u"&&(a.dimensions=s.dimensions),typeof s.updateStyle<"u"&&s.updateStyle&&(a.style={...a.style||{},width:`${(n=s.dimensions)==null?void 0:n.width}px`,height:`${(r=s.dimensions)==null?void 0:r.height}px`}),typeof s.resizing<"u"&&(a.resizing=s.resizing),a.expandParent&&a.parentNode)){const u=t[i.indexOf(a.parentNode)];u&&rn(u)&&(!!u.dimensions.width&&!!u.dimensions.height?Vr(a,u):He(()=>{Vr(a,u)}))}break}return t}function pt(e,t){return{id:e,type:"select",selected:t}}function Rc(e){return{item:e,type:"add"}}function Mc(e){return{id:e,type:"remove"}}function Pc(e,t,n,r,o){return{id:e,source:t,target:n,sourceHandle:r||null,targetHandle:o||null,type:"remove"}}function gt(e,t=new Set,n=!1){const r=[];for(const[o,i]of e){const a=t.has(o);!(i.selected===void 0&&!a)&&i.selected!==a&&(n&&(i.selected=a),r.push(pt(i.id,a)))}return r}const Oc=()=>{};function Q(e){const t=new Set;let n=Oc,r=()=>!1;const o=()=>t.size>0||r(),i=f=>{n=f},a=()=>{n=Oc},s=f=>{r=f},u=()=>{r=()=>!1},l=f=>{t.delete(f)};return{on:f=>{t.add(f);const h=()=>l(f);return fn(h),{off:h}},off:l,trigger:f=>{const h=[n];return o()?h.push(...t):e&&h.push(e),Promise.allSettled(h.map(b=>b(f)))},hasListeners:o,listeners:t,setEmitter:i,removeEmitter:a,setHasEmitListeners:s,removeHasEmitListeners:u}}function Dc(e,t,n){let r=e;do{if(r&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function bw(e,t,n,r){var o,i;const a=new Map;for(const[s,u]of e)(u.selected||u.id===r)&&(!u.parentNode||!gm(u,e))&&(u.draggable||t&&typeof u.draggable>"u")&&e.get(s)&&a.set(s,{id:u.id,position:u.position||{x:0,y:0},distance:{x:n.x-((o=u.computedPosition)==null?void 0:o.x)||0,y:n.y-((i=u.computedPosition)==null?void 0:i.y)||0},from:{x:u.computedPosition.x,y:u.computedPosition.y},extent:u.extent,parentNode:u.parentNode,dimensions:{...u.dimensions},expandParent:u.expandParent});return Array.from(a.values())}function Fr({id:e,dragItems:t,findNode:n}){const r=[];for(const o of t){const i=n(o.id);i&&r.push(i)}return[e?r.find(o=>o.id===e):r[0],r]}function ym(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function ww(e,t,n){const[r,o,i,a]=typeof e!="string"?ym(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+a,n.computedPosition.y+r],[n.computedPosition.x+n.dimensions.width-o,n.computedPosition.y+n.dimensions.height-i]]:!1}function Ew(e,t,n,r){let o=e.extent||n;if((o==="parent"||!Array.isArray(o)&&o?.range==="parent")&&!e.expandParent)if(e.parentNode&&r&&e.dimensions.width&&e.dimensions.height){const i=ww(o,e,r);i&&(o=i)}else t(new Re(Ae.NODE_EXTENT_INVALID,e.id)),o=n;else if(Array.isArray(o)){const i=r?.computedPosition.x||0,a=r?.computedPosition.y||0;o=[[o[0][0]+i,o[0][1]+a],[o[1][0]+i,o[1][1]+a]]}else if(o!=="parent"&&o?.range&&Array.isArray(o.range)){const[i,a,s,u]=ym(o.padding),l=r?.computedPosition.x||0,c=r?.computedPosition.y||0;o=[[o.range[0][0]+l+u,o.range[0][1]+c+i],[o.range[1][0]+l-a,o.range[1][1]+c-s]]}return o==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:o}function Sw({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function $l(e,t,n,r,o){const i=Sw(e.dimensions,Ew(e,n,r,o)),a=um(t,i);return{position:{x:a.x-(o?.computedPosition.x||0),y:a.y-(o?.computedPosition.y||0)},computedPosition:a}}function Ht(e,t,n=ie.Left,r=!1){const o=(t?.x??0)+e.computedPosition.x,i=(t?.y??0)+e.computedPosition.y,{width:a,height:s}=t??Iw(e);if(r)return{x:o+a/2,y:i+s/2};switch(t?.position??n){case ie.Top:return{x:o+a/2,y:i};case ie.Right:return{x:o+a,y:i+s/2};case ie.Bottom:return{x:o+a/2,y:i+s};case ie.Left:return{x:o,y:i+s/2}}}function $c(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function xw({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:i,width:a,height:s,viewport:u}){const l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+i)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c=fm({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:a/u.zoom,height:s/u.zoom}),d=Math.max(0,Math.min(c.x2,l.x2)-Math.max(c.x,l.x)),f=Math.max(0,Math.min(c.y2,l.y2)-Math.max(c.y,l.y));return Math.ceil(d*f)>0}function Cw(e,t,n=!1){const r=typeof e.zIndex=="number";let o=r?e.zIndex:0;const i=t(e.source),a=t(e.target);return!i||!a?0:(n&&(o=r?e.zIndex:Math.max(i.computedPosition.z||0,a.computedPosition.z||0)),o)}var Ae=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Ae||{});const Bc={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Re extends Error{constructor(t,...n){var r;super((r=Bc[t])==null?void 0:r.call(Bc,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Bl(e){return"clientX"in e}function Nw(e){return"sourceEvent"in e}function Ze(e,t){const n=Bl(e);let r,o;return n?(r=e.clientX,o=e.clientY):"touches"in e&&e.touches.length>0?(r=e.touches[0].clientX,o=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(r=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY):(r=0,o=0),{x:r-(t?.left??0),y:o-(t?.top??0)}}const or=()=>{var e;return typeof navigator<"u"&&((e=navigator?.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Iw(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function dr(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const Tw=()=>!0;function Gr(e){e?.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function qw(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())rr(o,nr(i))>0&&r.push(i);return r}const Aw=250;function kw(e,t,n,r){var o,i;let a=[],s=Number.POSITIVE_INFINITY;const u=qw(e,n,t+Aw);for(const l of u){const c=[...((o=l.handleBounds)==null?void 0:o.source)??[],...((i=l.handleBounds)==null?void 0:i.target)??[]];for(const d of c){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:f,y:h}=Ht(l,d,d.position,!0),b=Math.sqrt((f-e.x)**2+(h-e.y)**2);b>t||(b<s?(a=[{...d,x:f,y:h}],s=b):b===s&&a.push({...d,x:f,y:h}))}}if(!a.length)return null;if(a.length>1){const l=r.type==="source"?"target":"source";return a.find(c=>c.type===l)??a[0]}return a[0]}function Lc(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:a,lib:s,flowId:u,isValidConnection:l=Tw},c,d,f,h){const b=i==="target",m=t?a.querySelector(`.${s}-flow__handle[data-id="${u}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:g,y:_}=Ze(e),y=a.elementFromPoint(g,_),v=y?.classList.contains(`${s}-flow__handle`)?y:m,p={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const S=_m(void 0,v),q=v.getAttribute("data-nodeid"),A=v.getAttribute("data-handleid"),O=v.classList.contains("connectable"),B=v.classList.contains("connectableend");if(!q||!S)return p;const $={source:b?q:r,sourceHandle:b?A:o,target:b?r:q,targetHandle:b?o:A};p.connection=$;const N=O&&B&&(n===yt.Strict?b&&S==="source"||!b&&S==="target":q!==r||A!==o);p.isValid=N&&l($,{nodes:d,edges:c,sourceNode:f($.source),targetNode:f($.target)}),p.toHandle=bm(q,S,A,h,n,!0)}return p}function _m(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Rw(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Mw(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function bm(e,t,n,r,o,i=!1){var a,s,u;const l=r.get(e);if(!l)return null;const c=o===yt.Strict?(a=l.handleBounds)==null?void 0:a[t]:[...((s=l.handleBounds)==null?void 0:s.source)??[],...((u=l.handleBounds)==null?void 0:u.target)??[]],d=(n?c?.find(f=>f.id===n):c?.[0])??null;return d&&i?{...d,...Ht(l,d,d.position,!0)}:d}const xl={[ie.Left]:ie.Right,[ie.Right]:ie.Left,[ie.Top]:ie.Bottom,[ie.Bottom]:ie.Top},Pw=["production","prod"];function En(e,...t){wm()&&console.warn(`[Vue Flow]: ${e}`,...t)}function wm(){return!Pw.includes("production")}function zc(e,t,n,r,o){const i=t.querySelectorAll(`.vue-flow__handle.${e}`);return i?.length?Array.from(i).map(a=>{const s=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:e,nodeId:o,position:a.getAttribute("data-handlepos"),x:(s.left-n.left)/r,y:(s.top-n.top)/r,...cr(a)}}):null}function Cl(e,t,n,r,o,i=!1,a){o.value=!1,e.selected?(i||e.selected&&t)&&(r([e]),He(()=>{a.blur()})):n([e])}function qe(e){return typeof Y(e)<"u"}function Ow(e,t,n,r){if(!e||!e.source||!e.target)return n(new Re(Ae.EDGE_INVALID,e?.id??"[ID UNKNOWN]")),!1;let o;return _t(e)?o=e:o={...e,id:dm(e)},o=lm(o,void 0,r),vw(o,t)?!1:o}function Dw(e,t,n,r,o){if(!t.source||!t.target)return o(new Re(Ae.EDGE_INVALID,e.id)),!1;if(!n)return o(new Re(Ae.EDGE_NOT_FOUND,e.id)),!1;const{id:i,...a}=e;return{...a,id:r?dm(t):i,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function Vc(e,t,n){const r={},o=[];for(let i=0;i<e.length;++i){const a=e[i];if(!It(a)){n(new Re(Ae.NODE_INVALID,a?.id)||`[ID UNKNOWN|INDEX ${i}]`);continue}const s=dw(a,t(a.id),a.parentNode);a.parentNode&&(r[a.parentNode]=!0),o[i]=s}for(const i of o){const a=t(i.parentNode)||o.find(s=>s.id===i.parentNode);i.parentNode&&!a&&n(new Re(Ae.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||r[i.id])&&(r[i.id]&&(i.isParent=!0),a&&(a.isParent=!0))}return o}function Fc(e,t,n,r,o,i){let a=o;const s=r.get(a)||new Map;r.set(a,s.set(n,t)),a=`${o}-${e}`;const u=r.get(a)||new Map;if(r.set(a,u.set(n,t)),i){a=`${o}-${e}-${i}`;const l=r.get(a)||new Map;r.set(a,l.set(n,t))}}function Hr(e,t,n){e.clear();for(const r of n){const{source:o,target:i,sourceHandle:a=null,targetHandle:s=null}=r,u={edgeId:r.id,source:o,target:i,sourceHandle:a,targetHandle:s},l=`${o}-${a}--${i}-${s}`,c=`${i}-${s}--${o}-${a}`;Fc("source",u,c,e,o,a),Fc("target",u,l,e,i,s)}}function Gc(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Ur(e,t,n,r,o,i,a,s){const u=[];for(const l of e){const c=_t(l)?l:Ow(l,s,o,i);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){o(new Re(Ae.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){o(new Re(Ae.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){o(new Re(Ae.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:s,nodes:a,sourceNode:d,targetNode:f})){o(new Re(Ae.EDGE_INVALID,c.id));continue}const h=r(c.id);u.push({...lm(c,h,i),sourceNode:d,targetNode:f})}return u}const Hc=Symbol("vueFlow"),Em=Symbol("nodeId"),Sm=Symbol("nodeRef"),$w=Symbol("edgeId"),Bw=Symbol("edgeRef"),fr=Symbol("slots");function xm(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:r,noDragClassName:o,nodeLookup:i,nodeExtent:a,nodeDragThreshold:s,viewport:u,autoPanOnNodeDrag:l,autoPanSpeed:c,nodesDraggable:d,panBy:f,findNode:h,multiSelectionActive:b,nodesSelectionActive:m,selectNodesOnDrag:g,removeSelectedElements:_,addSelectedNodes:y,updateNodePositions:v,emits:p}=Ee(),{onStart:S,onDrag:q,onStop:A,onClick:O,el:B,disabled:$,id:P,selectable:N,dragHandle:F}=e,I=Yn(!1);let L=[],M,U=null,K={x:void 0,y:void 0},W={x:0,y:0},X=null,ne=!1,ae=!1,de=0,R=!1;const D=Vw(),T=({x:ce,y:se})=>{K={x:ce,y:se};let x=!1;if(L=L.map(w=>{const k={x:ce-w.distance.x,y:se-w.distance.y},{computedPosition:E}=$l(w,n.value?dr(k,r.value):k,p.error,a.value,w.parentNode?h(w.parentNode):void 0);return x=x||w.position.x!==E.x||w.position.y!==E.y,w.position=E,w}),ae=ae||x,!!x&&(v(L,!0,!0),I.value=!0,X)){const[w,k]=Fr({id:P,dragItems:L,findNode:h});q({event:X,node:w,nodes:k})}},C=()=>{if(!U)return;const[ce,se]=mm(W,U,c.value);if(ce!==0||se!==0){const x={x:(K.x??0)-ce/u.value.zoom,y:(K.y??0)-se/u.value.zoom};f({x:ce,y:se})&&T(x)}de=requestAnimationFrame(C)},V=(ce,se)=>{ne=!0;const x=h(P);!g.value&&!b.value&&x&&(x.selected||_()),x&&ve(N)&&g.value&&Cl(x,b.value,y,_,m,!1,se);const w=D(ce.sourceEvent);if(K=w,L=bw(i.value,d.value,w,P),L.length){const[k,E]=Fr({id:P,dragItems:L,findNode:h});S({event:ce.sourceEvent,node:k,nodes:E})}},H=(ce,se)=>{var x;ce.sourceEvent.type==="touchmove"&&ce.sourceEvent.touches.length>1||(ae=!1,s.value===0&&V(ce,se),K=D(ce.sourceEvent),U=((x=t.value)==null?void 0:x.getBoundingClientRect())||null,W=Ze(ce.sourceEvent,U))},re=(ce,se)=>{const x=D(ce.sourceEvent);if(!R&&ne&&l.value&&(R=!0,C()),!ne){const w=x.xSnapped-(K.x??0),k=x.ySnapped-(K.y??0);Math.sqrt(w*w+k*k)>s.value&&V(ce,se)}(K.x!==x.xSnapped||K.y!==x.ySnapped)&&L.length&&ne&&(X=ce.sourceEvent,W=Ze(ce.sourceEvent,U),T(x))},fe=ce=>{let se=!1;if(!ne&&!I.value&&!b.value){const x=ce.sourceEvent,w=D(x),k=w.xSnapped-(K.x??0),E=w.ySnapped-(K.y??0),G=Math.sqrt(k*k+E*E);G!==0&&G<=s.value&&(O?.(x),se=!0)}if(L.length&&!se){ae&&(v(L,!1,!1),ae=!1);const[x,w]=Fr({id:P,dragItems:L,findNode:h});A({event:ce.sourceEvent,node:x,nodes:w})}L=[],I.value=!1,R=!1,ne=!1,K={x:void 0,y:void 0},cancelAnimationFrame(de)};return be([()=>ve($),B],([ce,se],x,w)=>{if(se){const k=Fe(se);ce||(M=c0().on("start",E=>H(E,se)).on("drag",E=>re(E,se)).on("end",E=>fe(E)).filter(E=>{const G=E.target,J=ve(F);return!E.button&&(!o.value||!Dc(G,`.${o.value}`,se)&&(!J||Dc(G,J,se)))}),k.call(M)),w(()=>{k.on(".drag",null),M&&(M.on("start",null),M.on("drag",null),M.on("end",null))})}}),I}function Lw(){return{doubleClick:Q(),click:Q(),mouseEnter:Q(),mouseMove:Q(),mouseLeave:Q(),contextMenu:Q(),updateStart:Q(),update:Q(),updateEnd:Q()}}function zw(e,t){const n=Lw();return n.doubleClick.on(r=>{var o,i;t.edgeDoubleClick(r),(i=(o=e.events)==null?void 0:o.doubleClick)==null||i.call(o,r)}),n.click.on(r=>{var o,i;t.edgeClick(r),(i=(o=e.events)==null?void 0:o.click)==null||i.call(o,r)}),n.mouseEnter.on(r=>{var o,i;t.edgeMouseEnter(r),(i=(o=e.events)==null?void 0:o.mouseEnter)==null||i.call(o,r)}),n.mouseMove.on(r=>{var o,i;t.edgeMouseMove(r),(i=(o=e.events)==null?void 0:o.mouseMove)==null||i.call(o,r)}),n.mouseLeave.on(r=>{var o,i;t.edgeMouseLeave(r),(i=(o=e.events)==null?void 0:o.mouseLeave)==null||i.call(o,r)}),n.contextMenu.on(r=>{var o,i;t.edgeContextMenu(r),(i=(o=e.events)==null?void 0:o.contextMenu)==null||i.call(o,r)}),n.updateStart.on(r=>{var o,i;t.edgeUpdateStart(r),(i=(o=e.events)==null?void 0:o.updateStart)==null||i.call(o,r)}),n.update.on(r=>{var o,i;t.edgeUpdate(r),(i=(o=e.events)==null?void 0:o.update)==null||i.call(o,r)}),n.updateEnd.on(r=>{var o,i;t.edgeUpdateEnd(r),(i=(o=e.events)==null?void 0:o.updateEnd)==null||i.call(o,r)}),Object.entries(n).reduce((r,[o,i])=>(r.emit[o]=i.trigger,r.on[o]=i.on,r),{emit:{},on:{}})}function Vw(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:r}=Ee();return o=>{var i;const a=((i=r.value)==null?void 0:i.getBoundingClientRect())??{left:0,top:0},s=Nw(o)?o.sourceEvent:o,{x:u,y:l}=Ze(s,a),c=yn({x:u,y:l},e.value),{x:d,y:f}=n.value?dr(c,t.value):c;return{xSnapped:d,ySnapped:f,...c}}}function $n(){return!0}function Cm({handleId:e,nodeId:t,type:n,isValidConnection:r,edgeUpdaterType:o,onEdgeUpdate:i,onEdgeUpdateEnd:a}){const{id:s,vueFlowRef:u,connectionMode:l,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:f,nodesConnectable:h,autoPanOnConnect:b,autoPanSpeed:m,findNode:g,panBy:_,startConnection:y,updateConnection:v,endConnection:p,emits:S,viewport:q,edges:A,nodes:O,isValidConnection:B,nodeLookup:$}=Ee();let P=null,N=!1,F=null;function I(M){var U;const K=ve(n)==="target",W=Bl(M),X=Ic(M.target),ne=M.currentTarget;if(ne&&(W&&M.button===0||!W)){let ae=function(te){x=Ze(te,fe),T=kw(yn(x,q.value,!1,[1,1]),c.value,$.value,E),w||(k(),w=!0);const ue=Lc(te,{handle:T,connectionMode:l.value,fromNodeId:ve(t),fromHandleId:ve(e),fromType:K?"target":"source",isValidConnection:D,doc:X,lib:"vue",flowId:s,nodeLookup:$.value},A.value,O.value,g,$.value);F=ue.handleDomNode,P=ue.connection,N=Mw(!!T,ue.isValid);const he={...ee,isValid:N,to:ue.toHandle&&N?mn({x:ue.toHandle.x,y:ue.toHandle.y},q.value):x,toHandle:ue.toHandle,toPosition:N&&ue.toHandle?ue.toHandle.position:xl[E.position],toNode:ue.toHandle?$.value.get(ue.toHandle.nodeId):null};if(N&&T&&ee?.toHandle&&he.toHandle&&ee.toHandle.type===he.toHandle.type&&ee.toHandle.nodeId===he.toHandle.nodeId&&ee.toHandle.id===he.toHandle.id&&ee.to.x===he.to.x&&ee.to.y===he.to.y)return;const pe=T??ue.toHandle;if(v(pe&&N?mn({x:pe.x,y:pe.y},q.value):x,ue.toHandle,Rw(!!pe,N)),ee=he,!T&&!N&&!F)return Gr(se);P&&P.source!==P.target&&F&&(Gr(se),se=F,F.classList.add("connecting","vue-flow__handle-connecting"),F.classList.toggle("valid",!!N),F.classList.toggle("vue-flow__handle-valid",!!N))},de=function(te){"touches"in te&&te.touches.length>0||((T||F)&&P&&N&&(i?i(te,P):S.connect(P)),S.connectEnd(te),o&&a?.(te),Gr(se),cancelAnimationFrame(C),p(te),w=!1,N=!1,P=null,F=null,X.removeEventListener("mousemove",ae),X.removeEventListener("mouseup",de),X.removeEventListener("touchmove",ae),X.removeEventListener("touchend",de))};const R=g(ve(t));let D=ve(r)||B.value||$n;!D&&R&&(D=(K?R.isValidSourcePos:R.isValidTargetPos)||$n);let T,C=0;const{x:V,y:H}=Ze(M),re=_m(ve(o),ne),fe=(U=u.value)==null?void 0:U.getBoundingClientRect();if(!fe||!re)return;const ce=bm(ve(t),re,ve(e),$.value,l.value);if(!ce)return;let se,x=Ze(M,fe),w=!1;const k=()=>{if(!b.value)return;const[te,ue]=mm(x,fe,m.value);_({x:te,y:ue}),C=requestAnimationFrame(k)},E={...ce,nodeId:ve(t),type:re,position:ce.position},G=$.value.get(ve(t)),oe={inProgress:!0,isValid:null,from:Ht(G,E,ie.Left,!0),fromHandle:E,fromPosition:E.position,fromNode:G,to:x,toHandle:null,toPosition:xl[E.position],toNode:null};y({nodeId:ve(t),id:ve(e),type:re,position:ne?.getAttribute("data-handlepos")||ie.Top,...x},{x:V-fe.left,y:H-fe.top}),S.connectStart({event:M,nodeId:ve(t),handleId:ve(e),handleType:re});let ee=oe;X.addEventListener("mousemove",ae),X.addEventListener("mouseup",de),X.addEventListener("touchmove",ae),X.addEventListener("touchend",de)}}function L(M){var U,K;if(!d.value)return;const W=ve(n)==="target";if(!f.value){S.clickConnectStart({event:M,nodeId:ve(t),handleId:ve(e)}),y({nodeId:ve(t),type:ve(n),id:ve(e),position:ie.Top,...Ze(M)},void 0,!0);return}let X=ve(r)||B.value||$n;const ne=g(ve(t));if(!X&&ne&&(X=(W?ne.isValidSourcePos:ne.isValidTargetPos)||$n),ne&&(typeof ne.connectable>"u"?h.value:ne.connectable)===!1)return;const ae=Ic(M.target),de=Lc(M,{handle:{nodeId:ve(t),id:ve(e),type:ve(n),position:ie.Top,...Ze(M)},connectionMode:l.value,fromNodeId:f.value.nodeId,fromHandleId:f.value.id??null,fromType:f.value.type,isValidConnection:X,doc:ae,lib:"vue",flowId:s,nodeLookup:$.value},A.value,O.value,g,$.value),R=((U=de.connection)==null?void 0:U.source)===((K=de.connection)==null?void 0:K.target);de.isValid&&de.connection&&!R&&S.connect(de.connection),S.clickConnectEnd(M),p(M,!0)}return{handlePointerDown:I,handleClick:L}}function Fw(){return Ut(Em,"")}function Nm(e){const t=e??Fw()??"",n=Ut(Sm,ye(null)),{findNode:r,edges:o,emits:i}=Ee(),a=r(t);return a||i.error(new Re(Ae.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:a,parentNode:le(()=>r(a.parentNode)),connectedEdges:le(()=>pm([a],o.value))}}function Gw(){return{doubleClick:Q(),click:Q(),mouseEnter:Q(),mouseMove:Q(),mouseLeave:Q(),contextMenu:Q(),dragStart:Q(),drag:Q(),dragStop:Q()}}function Hw(e,t){const n=Gw();return n.doubleClick.on(r=>{var o,i;t.nodeDoubleClick(r),(i=(o=e.events)==null?void 0:o.doubleClick)==null||i.call(o,r)}),n.click.on(r=>{var o,i;t.nodeClick(r),(i=(o=e.events)==null?void 0:o.click)==null||i.call(o,r)}),n.mouseEnter.on(r=>{var o,i;t.nodeMouseEnter(r),(i=(o=e.events)==null?void 0:o.mouseEnter)==null||i.call(o,r)}),n.mouseMove.on(r=>{var o,i;t.nodeMouseMove(r),(i=(o=e.events)==null?void 0:o.mouseMove)==null||i.call(o,r)}),n.mouseLeave.on(r=>{var o,i;t.nodeMouseLeave(r),(i=(o=e.events)==null?void 0:o.mouseLeave)==null||i.call(o,r)}),n.contextMenu.on(r=>{var o,i;t.nodeContextMenu(r),(i=(o=e.events)==null?void 0:o.contextMenu)==null||i.call(o,r)}),n.dragStart.on(r=>{var o,i;t.nodeDragStart(r),(i=(o=e.events)==null?void 0:o.dragStart)==null||i.call(o,r)}),n.drag.on(r=>{var o,i;t.nodeDrag(r),(i=(o=e.events)==null?void 0:o.drag)==null||i.call(o,r)}),n.dragStop.on(r=>{var o,i;t.nodeDragStop(r),(i=(o=e.events)==null?void 0:o.dragStop)==null||i.call(o,r)}),Object.entries(n).reduce((r,[o,i])=>(r.emit[o]=i.trigger,r.on[o]=i.on,r),{emit:{},on:{}})}function Im(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:r,snapGrid:o,snapToGrid:i,nodesDraggable:a,emits:s}=Ee();return(u,l=!1)=>{const c=i.value?o.value[0]:5,d=i.value?o.value[1]:5,f=l?4:1,h=u.x*c*f,b=u.y*d*f,m=[];for(const g of e.value)if(g.draggable||a&&typeof g.draggable>"u"){const _={x:g.computedPosition.x+h,y:g.computedPosition.y+b},{position:y}=$l(g,_,s.error,t.value,g.parentNode?r(g.parentNode):void 0);m.push({id:g.id,position:y,from:g.position,distance:{x:u.x,y:u.y},dimensions:g.dimensions})}n(m,!0,!1)}}const Bn=.1,Uw=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function vt(){return En("Viewport not initialized yet."),Promise.resolve(!1)}const jw={zoomIn:vt,zoomOut:vt,zoomTo:vt,fitView:vt,setCenter:vt,fitBounds:vt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:vt,setTransform:vt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Yw(e){function t(r,o){return new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(o?.interpolate==="linear"?ln:Gn).scaleBy(jr(e.d3Selection,o?.duration,o?.ease,()=>{i(!0)}),r):i(!1)})}function n(r,o,i,a){return new Promise(s=>{var u;const{x:l,y:c}=um({x:-r,y:-o},e.translateExtent),d=Gt.translate(-l,-c).scale(i);e.d3Selection&&e.d3Zoom?(u=e.d3Zoom)==null||u.interpolate(a?.interpolate==="linear"?ln:Gn).transform(jr(e.d3Selection,a?.duration,a?.ease,()=>{s(!0)}),d):s(!1)})}return le(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:o=>t(1.2,o),zoomOut:o=>t(1/1.2,o),zoomTo:(o,i)=>new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(i?.interpolate==="linear"?ln:Gn).scaleTo(jr(e.d3Selection,i?.duration,i?.ease,()=>{a(!0)}),o):a(!1)}),setViewport:(o,i)=>n(o.x,o.y,o.zoom,i),setTransform:(o,i)=>n(o.x,o.y,o.zoom,i),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(o={padding:Bn,includeHiddenNodes:!1,duration:0})=>{var i,a;const s=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&(o?.includeHiddenNodes||!f.hidden)&&(!((i=o.nodes)!=null&&i.length)||(a=o.nodes)!=null&&a.length&&o.nodes.includes(f.id))&&s.push(f);if(!s.length)return Promise.resolve(!1);const u=hm(s),{x:l,y:c,zoom:d}=Tc(u,e.dimensions.width,e.dimensions.height,o.minZoom??e.minZoom,o.maxZoom??e.maxZoom,o.padding??Bn);return n(l,c,d,o)},setCenter:(o,i,a)=>{const s=typeof a?.zoom<"u"?a.zoom:e.maxZoom,u=e.dimensions.width/2-o*s,l=e.dimensions.height/2-i*s;return n(u,l,s,a)},fitBounds:(o,i={padding:Bn})=>{const{x:a,y:s,zoom:u}=Tc(o,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,i.padding??Bn);return n(a,s,u,i)},project:o=>yn(o,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:o=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),s={x:o.x-i,y:o.y-a};return yn(s,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:o=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),s={x:o.x+i,y:o.y+a};return mn(s,e.viewport)}return{x:0,y:0}}}:jw)}function jr(e,t=0,n=Uw,r=()=>{}){const o=typeof t=="number"&&t>0;return o||r(),o?e.transition().duration(t).ease(n).on("end",r):e}function Kw(e,t,n){const r=wg(!0);return r.run(()=>{const o=()=>{r.run(()=>{let m,g,_=!!(n.nodes.value.length||n.edges.value.length);m=Ot([e.modelValue,()=>{var y,v;return(v=(y=e.modelValue)==null?void 0:y.value)==null?void 0:v.length}],([y])=>{y&&Array.isArray(y)&&(g?.pause(),n.setElements(y),!g&&!_&&y.length?_=!0:g?.resume())}),g=Ot([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([y,v])=>{var p;(p=e.modelValue)!=null&&p.value&&Array.isArray(e.modelValue.value)&&(m?.pause(),e.modelValue.value=[...y,...v],He(()=>{m?.resume()}))},{immediate:_}),Vn(()=>{m?.stop(),g?.stop()})})},i=()=>{r.run(()=>{let m,g,_=!!n.nodes.value.length;m=Ot([e.nodes,()=>{var y,v;return(v=(y=e.nodes)==null?void 0:y.value)==null?void 0:v.length}],([y])=>{y&&Array.isArray(y)&&(g?.pause(),n.setNodes(y),!g&&!_&&y.length?_=!0:g?.resume())}),g=Ot([n.nodes,()=>n.nodes.value.length],([y])=>{var v;(v=e.nodes)!=null&&v.value&&Array.isArray(e.nodes.value)&&(m?.pause(),e.nodes.value=[...y],He(()=>{m?.resume()}))},{immediate:_}),Vn(()=>{m?.stop(),g?.stop()})})},a=()=>{r.run(()=>{let m,g,_=!!n.edges.value.length;m=Ot([e.edges,()=>{var y,v;return(v=(y=e.edges)==null?void 0:y.value)==null?void 0:v.length}],([y])=>{y&&Array.isArray(y)&&(g?.pause(),n.setEdges(y),!g&&!_&&y.length?_=!0:g?.resume())}),g=Ot([n.edges,()=>n.edges.value.length],([y])=>{var v;(v=e.edges)!=null&&v.value&&Array.isArray(e.edges.value)&&(m?.pause(),e.edges.value=[...y],He(()=>{m?.resume()}))},{immediate:_}),Vn(()=>{m?.stop(),g?.stop()})})},s=()=>{r.run(()=>{be(()=>t.maxZoom,()=>{t.maxZoom&&qe(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},u=()=>{r.run(()=>{be(()=>t.minZoom,()=>{t.minZoom&&qe(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},l=()=>{r.run(()=>{be(()=>t.translateExtent,()=>{t.translateExtent&&qe(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{r.run(()=>{be(()=>t.nodeExtent,()=>{t.nodeExtent&&qe(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{r.run(()=>{be(()=>t.applyDefault,()=>{qe(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},f=()=>{r.run(()=>{const m=async g=>{let _=g;typeof t.autoConnect=="function"&&(_=await t.autoConnect(g)),_!==!1&&n.addEdges([_])};be(()=>t.autoConnect,()=>{qe(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),be(n.autoConnect,(g,_,y)=>{g?n.onConnect(m):n.hooks.value.connect.off(m),y(()=>{n.hooks.value.connect.off(m)})},{immediate:!0})})},h=()=>{const m=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const g of Object.keys(t)){const _=g;if(!m.includes(_)){const y=we(()=>t[_]),v=n[_];Il(v)&&r.run(()=>{be(y,p=>{qe(p)&&(v.value=p)},{immediate:!0})})}}};(()=>{o(),i(),a(),u(),s(),l(),c(),d(),f(),h()})()}),()=>r.stop()}function Xw(){return{edgesChange:Q(),nodesChange:Q(),nodeDoubleClick:Q(),nodeClick:Q(),nodeMouseEnter:Q(),nodeMouseMove:Q(),nodeMouseLeave:Q(),nodeContextMenu:Q(),nodeDragStart:Q(),nodeDrag:Q(),nodeDragStop:Q(),nodesInitialized:Q(),miniMapNodeClick:Q(),miniMapNodeDoubleClick:Q(),miniMapNodeMouseEnter:Q(),miniMapNodeMouseMove:Q(),miniMapNodeMouseLeave:Q(),connect:Q(),connectStart:Q(),connectEnd:Q(),clickConnectStart:Q(),clickConnectEnd:Q(),paneReady:Q(),init:Q(),move:Q(),moveStart:Q(),moveEnd:Q(),selectionDragStart:Q(),selectionDrag:Q(),selectionDragStop:Q(),selectionContextMenu:Q(),selectionStart:Q(),selectionEnd:Q(),viewportChangeStart:Q(),viewportChange:Q(),viewportChangeEnd:Q(),paneScroll:Q(),paneClick:Q(),paneContextMenu:Q(),paneMouseEnter:Q(),paneMouseMove:Q(),paneMouseLeave:Q(),edgeContextMenu:Q(),edgeMouseEnter:Q(),edgeMouseMove:Q(),edgeMouseLeave:Q(),edgeDoubleClick:Q(),edgeClick:Q(),edgeUpdateStart:Q(),edgeUpdate:Q(),edgeUpdateEnd:Q(),updateNodeInternals:Q(),error:Q(e=>En(e.message))}}function Ww(e,t){const n=jt();zy(()=>{for(const[o,i]of Object.entries(t.value)){const a=s=>{e(o,s)};i.setEmitter(a),fn(i.removeEmitter),i.setHasEmitListeners(()=>r(o)),fn(i.removeHasEmitListeners)}});function r(o){var i;const a=Zw(o);return!!((i=n?.vnode.props)==null?void 0:i[a])}}function Zw(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,(o,i)=>i.toUpperCase())}${n.length?`:${n.join(":")}`:""}`}function Tm(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Dl.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:cn.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:St.Bezier,style:{}},connectionMode:yt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:or()?"Meta":"Control",zoomActivationKeyCode:or()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Xw(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Jw=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Qw(e,t,n){const r=Yw(e),o=x=>{const w=x??[];e.hooks.updateNodeInternals.trigger(w)},i=x=>hw(x,e.nodes,e.edges),a=x=>fw(x,e.nodes,e.edges),s=x=>pm(x,e.edges),u=({id:x,type:w,nodeId:k})=>{var E;const G=x?`-${w}-${x}`:`-${w}`;return Array.from(((E=e.connectionLookup.get(`${k}${G}`))==null?void 0:E.values())??[])},l=x=>{if(x)return t.value.get(x)},c=x=>{if(x)return n.value.get(x)},d=(x,w,k)=>{var E,G;const J=[];for(const oe of x){const ee={id:oe.id,type:"position",dragging:k,from:oe.from};if(w&&(ee.position=oe.position,oe.parentNode)){const te=l(oe.parentNode);ee.position={x:ee.position.x-(((E=te?.computedPosition)==null?void 0:E.x)??0),y:ee.position.y-(((G=te?.computedPosition)==null?void 0:G.y)??0)}}J.push(ee)}J?.length&&e.hooks.nodesChange.trigger(J)},f=x=>{if(!e.vueFlowRef)return;const w=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!w)return;const k=window.getComputedStyle(w),{m22:E}=new window.DOMMatrixReadOnly(k.transform),G=[];for(const J of x){const oe=J,ee=l(oe.id);if(ee){const te=cr(oe.nodeElement);if(!!(te.width&&te.height&&(ee.dimensions.width!==te.width||ee.dimensions.height!==te.height||oe.forceUpdate))){const he=oe.nodeElement.getBoundingClientRect();ee.dimensions=te,ee.handleBounds.source=zc("source",oe.nodeElement,he,E,ee.id),ee.handleBounds.target=zc("target",oe.nodeElement,he,E,ee.id),G.push({id:ee.id,type:"dimensions",dimensions:te})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&r.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),G.length&&e.hooks.nodesChange.trigger(G)},h=(x,w)=>{const k=new Set,E=new Set;for(const oe of x)It(oe)?k.add(oe.id):_t(oe)&&E.add(oe.id);const G=gt(t.value,k,!0),J=gt(n.value,E);if(e.multiSelectionActive){for(const oe of k)G.push(pt(oe,w));for(const oe of E)J.push(pt(oe,w))}G.length&&e.hooks.nodesChange.trigger(G),J.length&&e.hooks.edgesChange.trigger(J)},b=x=>{if(e.multiSelectionActive){const w=x.map(k=>pt(k.id,!0));e.hooks.nodesChange.trigger(w);return}e.hooks.nodesChange.trigger(gt(t.value,new Set(x.map(w=>w.id)),!0)),e.hooks.edgesChange.trigger(gt(n.value))},m=x=>{if(e.multiSelectionActive){const w=x.map(k=>pt(k.id,!0));e.hooks.edgesChange.trigger(w);return}e.hooks.edgesChange.trigger(gt(n.value,new Set(x.map(w=>w.id)))),e.hooks.nodesChange.trigger(gt(t.value,new Set,!0))},g=x=>{h(x,!0)},_=x=>{const k=(x||e.nodes).map(E=>(E.selected=!1,pt(E.id,!1)));e.hooks.nodesChange.trigger(k)},y=x=>{const k=(x||e.edges).map(E=>(E.selected=!1,pt(E.id,!1)));e.hooks.edgesChange.trigger(k)},v=x=>{if(!x||!x.length)return h([],!1);const w=x.reduce((k,E)=>{const G=pt(E.id,!1);return It(E)?k.nodes.push(G):k.edges.push(G),k},{nodes:[],edges:[]});w.nodes.length&&e.hooks.nodesChange.trigger(w.nodes),w.edges.length&&e.hooks.edgesChange.trigger(w.edges)},p=x=>{var w;(w=e.d3Zoom)==null||w.scaleExtent([x,e.maxZoom]),e.minZoom=x},S=x=>{var w;(w=e.d3Zoom)==null||w.scaleExtent([e.minZoom,x]),e.maxZoom=x},q=x=>{var w;(w=e.d3Zoom)==null||w.translateExtent(x),e.translateExtent=x},A=x=>{e.nodeExtent=x,o()},O=x=>{var w;(w=e.d3Zoom)==null||w.clickDistance(x)},B=x=>{e.nodesDraggable=x,e.nodesConnectable=x,e.elementsSelectable=x},$=x=>{const w=x instanceof Function?x(e.nodes):x;!e.initialized&&!w.length||(e.nodes=Vc(w,l,e.hooks.error.trigger))},P=x=>{const w=x instanceof Function?x(e.edges):x;if(!e.initialized&&!w.length)return;const k=Ur(w,e.isValidConnection,l,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);Hr(e.connectionLookup,n.value,k),e.edges=k},N=x=>{const w=x instanceof Function?x([...e.nodes,...e.edges]):x;!e.initialized&&!w.length||($(w.filter(It)),P(w.filter(_t)))},F=x=>{let w=x instanceof Function?x(e.nodes):x;w=Array.isArray(w)?w:[w];const k=Vc(w,l,e.hooks.error.trigger),E=[];for(const G of k)E.push(Rc(G));E.length&&e.hooks.nodesChange.trigger(E)},I=x=>{let w=x instanceof Function?x(e.edges):x;w=Array.isArray(w)?w:[w];const k=Ur(w,e.isValidConnection,l,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),E=[];for(const G of k)E.push(Rc(G));E.length&&e.hooks.edgesChange.trigger(E)},L=(x,w=!0,k=!1)=>{const E=x instanceof Function?x(e.nodes):x,G=Array.isArray(E)?E:[E],J=[],oe=[];function ee(ue){const he=s(ue);for(const pe of he)(!qe(pe.deletable)||pe.deletable)&&oe.push(Pc(pe.id,pe.source,pe.target,pe.sourceHandle,pe.targetHandle))}function te(ue){const he=[];for(const pe of e.nodes)pe.parentNode===ue&&he.push(pe);if(he.length){for(const pe of he)J.push(Mc(pe.id));w&&ee(he);for(const pe of he)te(pe.id)}}for(const ue of G){const he=typeof ue=="string"?l(ue):ue;he&&(qe(he.deletable)&&!he.deletable||(J.push(Mc(he.id)),w&&ee([he]),k&&te(he.id)))}oe.length&&e.hooks.edgesChange.trigger(oe),J.length&&e.hooks.nodesChange.trigger(J)},M=x=>{const w=x instanceof Function?x(e.edges):x,k=Array.isArray(w)?w:[w],E=[];for(const G of k){const J=typeof G=="string"?c(G):G;J&&(qe(J.deletable)&&!J.deletable||E.push(Pc(typeof G=="string"?G:G.id,J.source,J.target,J.sourceHandle,J.targetHandle)))}e.hooks.edgesChange.trigger(E)},U=(x,w,k=!0)=>{const E=c(x.id);if(!E)return!1;const G=e.edges.indexOf(E),J=Dw(x,w,E,k,e.hooks.error.trigger);if(J){const[oe]=Ur([J],e.isValidConnection,l,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((ee,te)=>te===G?oe:ee),Hr(e.connectionLookup,n.value,[oe]),oe}return!1},K=(x,w,k={replace:!1})=>{const E=c(x);if(!E)return;const G=typeof w=="function"?w(E):w;E.data=k.replace?G:{...E.data,...G}},W=x=>kc(x,e.nodes),X=x=>{const w=kc(x,e.edges);return Hr(e.connectionLookup,n.value,w),w},ne=(x,w,k={replace:!1})=>{const E=l(x);if(!E)return;const G=typeof w=="function"?w(E):w;k.replace?e.nodes.splice(e.nodes.indexOf(E),1,G):Object.assign(E,G)},ae=(x,w,k={replace:!1})=>{const E=l(x);if(!E)return;const G=typeof w=="function"?w(E):w;E.data=k.replace?G:{...E.data,...G}},de=(x,w,k=!1)=>{k?e.connectionClickStartHandle=x:e.connectionStartHandle=x,e.connectionEndHandle=null,e.connectionStatus=null,w&&(e.connectionPosition=w)},R=(x,w=null,k=null)=>{e.connectionStartHandle&&(e.connectionPosition=x,e.connectionEndHandle=w,e.connectionStatus=k)},D=(x,w)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,w?e.connectionClickStartHandle=null:e.connectionStartHandle=null},T=x=>{const w=cw(x),k=w?null:rn(x)?x:l(x.id);return!w&&!k?[null,null,w]:[w?x:nr(k),k,w]},C=(x,w=!0,k=e.nodes)=>{const[E,G,J]=T(x);if(!E)return[];const oe=[];for(const ee of k||e.nodes){if(!J&&(ee.id===G.id||!ee.computedPosition))continue;const te=nr(ee),ue=rr(te,E);(w&&ue>0||ue>=te.width*te.height||ue>=Number(E.width)*Number(E.height))&&oe.push(ee)}return oe},V=(x,w,k=!0)=>{const[E]=T(x);if(!E)return!1;const G=rr(E,w);return k&&G>0||G>=Number(E.width)*Number(E.height)},H=x=>{const{viewport:w,dimensions:k,d3Zoom:E,d3Selection:G,translateExtent:J}=e;if(!E||!G||!x.x&&!x.y)return!1;const oe=Gt.translate(w.x+x.x,w.y+x.y).scale(w.zoom),ee=[[0,0],[k.width,k.height]],te=E.constrain()(oe,ee,J),ue=e.viewport.x!==te.x||e.viewport.y!==te.y||e.viewport.zoom!==te.k;return E.transform(G,te),ue},re=x=>{const w=x instanceof Function?x(e):x,k=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];qe(w.defaultEdgeOptions)&&(e.defaultEdgeOptions=w.defaultEdgeOptions);const E=w.modelValue||w.nodes||w.edges?[]:void 0;E&&(w.modelValue&&E.push(...w.modelValue),w.nodes&&E.push(...w.nodes),w.edges&&E.push(...w.edges),N(E));const G=()=>{qe(w.maxZoom)&&S(w.maxZoom),qe(w.minZoom)&&p(w.minZoom),qe(w.translateExtent)&&q(w.translateExtent)};for(const J of Object.keys(w)){const oe=J,ee=w[oe];![...Jw,...k].includes(oe)&&qe(ee)&&(e[oe]=ee)}hl(()=>e.d3Zoom).not.toBeNull().then(G),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:f,setElements:N,setNodes:$,setEdges:P,addNodes:F,addEdges:I,removeNodes:L,removeEdges:M,findNode:l,findEdge:c,updateEdge:U,updateEdgeData:K,updateNode:ne,updateNodeData:ae,applyEdgeChanges:X,applyNodeChanges:W,addSelectedElements:g,addSelectedNodes:b,addSelectedEdges:m,setMinZoom:p,setMaxZoom:S,setTranslateExtent:q,setNodeExtent:A,setPaneClickDistance:O,removeSelectedElements:v,removeSelectedNodes:_,removeSelectedEdges:y,startConnection:de,updateConnection:R,endConnection:D,setInteractive:B,setState:re,getIntersectingNodes:C,getIncomers:i,getOutgoers:a,getConnectedEdges:s,getHandleConnections:u,isNodeIntersecting:V,panBy:H,fitView:x=>r.value.fitView(x),zoomIn:x=>r.value.zoomIn(x),zoomOut:x=>r.value.zoomOut(x),zoomTo:(x,w)=>r.value.zoomTo(x,w),setViewport:(x,w)=>r.value.setViewport(x,w),setTransform:(x,w)=>r.value.setTransform(x,w),getViewport:()=>r.value.getViewport(),getTransform:()=>r.value.getTransform(),setCenter:(x,w,k)=>r.value.setCenter(x,w,k),fitBounds:(x,w)=>r.value.fitBounds(x,w),project:x=>r.value.project(x),screenToFlowCoordinate:x=>r.value.screenToFlowCoordinate(x),flowToScreenCoordinate:x=>r.value.flowToScreenCoordinate(x),toObject:()=>{const x=[],w=[];for(const k of e.nodes){const{computedPosition:E,handleBounds:G,selected:J,dimensions:oe,isParent:ee,resizing:te,dragging:ue,events:he,...pe}=k;x.push(pe)}for(const k of e.edges){const{selected:E,sourceNode:G,targetNode:J,events:oe,...ee}=k;w.push(ee)}return JSON.parse(JSON.stringify({nodes:x,edges:w,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:x=>new Promise(w=>{const{nodes:k,edges:E,position:G,zoom:J,viewport:oe}=x;k&&$(k),E&&P(E);const[ee,te]=oe?.x&&oe?.y?[oe.x,oe.y]:G??[null,null];if(ee&&te){const ue=oe?.zoom||J||e.viewport.zoom;return hl(()=>r.value.viewportInitialized).toBe(!0).then(()=>{r.value.setViewport({x:ee,y:te,zoom:ue}).then(()=>{w(!0)})})}else w(!0)}),updateNodeInternals:o,viewportHelper:r,$reset:()=>{const x=Tm();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const w=Gt.translate(x.defaultViewport.x??0,x.defaultViewport.y??0).scale(At(x.defaultViewport.zoom??1,x.minZoom,x.maxZoom)),k=e.viewportRef.getBoundingClientRect(),E=[[0,0],[k.width,k.height]],G=e.d3Zoom.constrain()(w,E,x.translateExtent);e.d3Zoom.transform(e.d3Selection,G)}re(x)},$destroy:()=>{}}}const eE=["data-id","data-handleid","data-nodeid","data-handlepos"],tE={name:"Handle",compatConfig:{MODE:3}},mt=Se({...tE,props:{id:{default:null},type:{},position:{default:()=>ie.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=Ly(e,["position","connectable","connectableStart","connectableEnd","id"]),r=we(()=>n.type??"source"),o=we(()=>n.isValidConnection??null),{id:i,connectionStartHandle:a,connectionClickStartHandle:s,connectionEndHandle:u,vueFlowRef:l,nodesConnectable:c,noDragClassName:d,noPanClassName:f}=Ee(),{id:h,node:b,nodeEl:m,connectedEdges:g}=Nm(),_=ye(),y=we(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),v=we(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),p=we(()=>{var P,N,F,I,L,M;return((P=a.value)==null?void 0:P.nodeId)===h&&((N=a.value)==null?void 0:N.id)===e.id&&((F=a.value)==null?void 0:F.type)===r.value||((I=u.value)==null?void 0:I.nodeId)===h&&((L=u.value)==null?void 0:L.id)===e.id&&((M=u.value)==null?void 0:M.type)===r.value}),S=we(()=>{var P,N,F;return((P=s.value)==null?void 0:P.nodeId)===h&&((N=s.value)==null?void 0:N.id)===e.id&&((F=s.value)==null?void 0:F.type)===r.value}),{handlePointerDown:q,handleClick:A}=Cm({nodeId:h,handleId:e.id,isValidConnection:o,type:r}),O=le(()=>typeof e.connectable=="string"&&e.connectable==="single"?!g.value.some(P=>{const N=P[`${r.value}Handle`];return P[r.value]!==h?!1:N?N===e.id:!0}):typeof e.connectable=="number"?g.value.filter(P=>{const N=P[`${r.value}Handle`];return P[r.value]!==h?!1:N?N===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(b,g.value):qe(e.connectable)?e.connectable:c.value);ut(()=>{var P;if(!b.dimensions.width||!b.dimensions.height)return;const N=(P=b.handleBounds[r.value])==null?void 0:P.find(W=>W.id===e.id);if(!l.value||N)return;const F=l.value.querySelector(".vue-flow__transformationpane");if(!m.value||!_.value||!F||!e.id)return;const I=m.value.getBoundingClientRect(),L=_.value.getBoundingClientRect(),M=window.getComputedStyle(F),{m22:U}=new window.DOMMatrixReadOnly(M.transform),K={id:e.id,position:e.position,x:(L.left-I.left)/U,y:(L.top-I.top)/U,type:r.value,nodeId:h,...cr(_.value)};b.handleBounds[r.value]=[...b.handleBounds[r.value]??[],K]});function B(P){const N=Bl(P);O.value&&y.value&&(N&&P.button===0||!N)&&q(P)}function $(P){!h||!s.value&&!y.value||O.value&&A(P)}return t({handleClick:A,handlePointerDown:q,onClick:$,onPointerDown:B}),(P,N)=>(j(),Z("div",{ref_key:"handle",ref:_,"data-id":`${Y(i)}-${Y(h)}-${e.id}-${r.value}`,"data-handleid":e.id,"data-nodeid":Y(h),"data-handlepos":P.position,class:Oe(["vue-flow__handle",[`vue-flow__handle-${P.position}`,`vue-flow__handle-${e.id}`,Y(d),Y(f),r.value,{connectable:O.value,connecting:S.value,connectablestart:y.value,connectableend:v.value,connectionindicator:O.value&&(y.value&&!p.value||v.value&&p.value)}]]),onMousedown:B,onTouchstartPassive:B,onClick:$},[Ce(P.$slots,"default",{id:P.id})],42,eE))}}),hr=function({sourcePosition:e=ie.Bottom,targetPosition:t=ie.Top,label:n,connectable:r=!0,isValidTargetPos:o,isValidSourcePos:i,data:a}){const s=a.label??n;return[_e(mt,{type:"target",position:t,connectable:r,isValidConnection:o}),typeof s!="string"&&s?_e(s):_e(Te,[s]),_e(mt,{type:"source",position:e,connectable:r,isValidConnection:i})]};hr.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];hr.inheritAttrs=!1;hr.compatConfig={MODE:3};const nE=hr,vr=function({targetPosition:e=ie.Top,label:t,connectable:n=!0,isValidTargetPos:r,data:o}){const i=o.label??t;return[_e(mt,{type:"target",position:e,connectable:n,isValidConnection:r}),typeof i!="string"&&i?_e(i):_e(Te,[i])]};vr.props=["targetPosition","label","isValidTargetPos","connectable","data"];vr.inheritAttrs=!1;vr.compatConfig={MODE:3};const rE=vr,pr=function({sourcePosition:e=ie.Bottom,label:t,connectable:n=!0,isValidSourcePos:r,data:o}){const i=o.label??t;return[typeof i!="string"&&i?_e(i):_e(Te,[i]),_e(mt,{type:"source",position:e,connectable:n,isValidConnection:r})]};pr.props=["sourcePosition","label","isValidSourcePos","connectable","data"];pr.inheritAttrs=!1;pr.compatConfig={MODE:3};const oE=pr,iE=["transform"],aE=["width","height","x","y","rx","ry"],sE=["y"],uE={name:"EdgeText",compatConfig:{MODE:3}},lE=Se({...uE,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=ye({x:0,y:0,width:0,height:0}),n=ye(null),r=le(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);ut(o),be([()=>e.x,()=>e.y,n,()=>e.label],o);function o(){if(!n.value)return;const i=n.value.getBBox();(i.width!==t.value.width||i.height!==t.value.height)&&(t.value=i)}return(i,a)=>(j(),Z("g",{transform:r.value,class:"vue-flow__edge-textwrapper"},[i.labelShowBg?(j(),Z("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*i.labelBgPadding[0]}px`,height:`${t.value.height+2*i.labelBgPadding[1]}px`,x:-i.labelBgPadding[0],y:-i.labelBgPadding[1],style:Ue(i.labelBgStyle),rx:i.labelBgBorderRadius,ry:i.labelBgBorderRadius},null,12,aE)):me("",!0),z("text",Cg(i.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:i.labelStyle}),[Ce(i.$slots,"default",{},()=>[typeof i.label!="string"?(j(),Ne(Et(i.label),{key:0})):(j(),Z(Te,{key:1},[$e(Ie(i.label),1)],64))])],16,sE)],8,iE))}}),cE=["id","d","marker-end","marker-start"],dE=["d","stroke-width"],fE={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},gr=Se({...fE,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=ye(null),r=ye(null),o=ye(null),i=Hy();return t({pathEl:n,interactionEl:r,labelEl:o}),(a,s)=>(j(),Z(Te,null,[z("path",Cg(Y(i),{id:a.id,ref_key:"pathEl",ref:n,d:a.path,class:"vue-flow__edge-path","marker-end":a.markerEnd,"marker-start":a.markerStart}),null,16,cE),a.interactionWidth?(j(),Z("path",{key:0,ref_key:"interactionEl",ref:r,fill:"none",d:a.path,"stroke-width":a.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,dE)):me("",!0),a.label&&a.labelX&&a.labelY?(j(),Ne(lE,{key:1,ref_key:"labelEl",ref:o,x:a.labelX,y:a.labelY,label:a.label,"label-show-bg":a.labelShowBg,"label-bg-style":a.labelBgStyle,"label-bg-padding":a.labelBgPadding,"label-bg-border-radius":a.labelBgBorderRadius,"label-style":a.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):me("",!0)],64))}});function qm({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,a=Math.abs(r-t)/2,s=r<t?r+a:r-a;return[i,s,o,a]}function Am({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:a,targetControlY:s}){const u=e*.125+o*.375+a*.375+n*.125,l=t*.125+i*.375+s*.375+r*.125,c=Math.abs(u-e),d=Math.abs(l-t);return[u,l,c,d]}function Ln(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Uc({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){let a,s;switch(e){case ie.Left:a=t-Ln(t-r,i),s=n;break;case ie.Right:a=t+Ln(r-t,i),s=n;break;case ie.Top:a=t,s=n-Ln(n-o,i);break;case ie.Bottom:a=t,s=n+Ln(o-n,i);break}return[a,s]}function km(e){const{sourceX:t,sourceY:n,sourcePosition:r=ie.Bottom,targetX:o,targetY:i,targetPosition:a=ie.Top,curvature:s=.25}=e,[u,l]=Uc({pos:r,x1:t,y1:n,x2:o,y2:i,c:s}),[c,d]=Uc({pos:a,x1:o,y1:i,x2:t,y2:n,c:s}),[f,h,b,m]=Am({sourceX:t,sourceY:n,targetX:o,targetY:i,sourceControlX:u,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${t},${n} C${u},${l} ${c},${d} ${o},${i}`,f,h,b,m]}function jc({pos:e,x1:t,y1:n,x2:r,y2:o}){let i,a;switch(e){case ie.Left:case ie.Right:i=.5*(t+r),a=n;break;case ie.Top:case ie.Bottom:i=t,a=.5*(n+o);break}return[i,a]}function Rm(e){const{sourceX:t,sourceY:n,sourcePosition:r=ie.Bottom,targetX:o,targetY:i,targetPosition:a=ie.Top}=e,[s,u]=jc({pos:r,x1:t,y1:n,x2:o,y2:i}),[l,c]=jc({pos:a,x1:o,y1:i,x2:t,y2:n}),[d,f,h,b]=Am({sourceX:t,sourceY:n,targetX:o,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:l,targetControlY:c});return[`M${t},${n} C${s},${u} ${l},${c} ${o},${i}`,d,f,h,b]}const Yc={[ie.Left]:{x:-1,y:0},[ie.Right]:{x:1,y:0},[ie.Top]:{x:0,y:-1},[ie.Bottom]:{x:0,y:1}};function hE({source:e,sourcePosition:t=ie.Bottom,target:n}){return t===ie.Left||t===ie.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Kc(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function vE({source:e,sourcePosition:t=ie.Bottom,target:n,targetPosition:r=ie.Top,center:o,offset:i}){const a=Yc[t],s=Yc[r],u={x:e.x+a.x*i,y:e.y+a.y*i},l={x:n.x+s.x*i,y:n.y+s.y*i},c=hE({source:u,sourcePosition:t,target:l}),d=c.x!==0?"x":"y",f=c[d];let h,b,m;const g={x:0,y:0},_={x:0,y:0},[y,v,p,S]=qm({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*s[d]===-1){b=o.x??y,m=o.y??v;const A=[{x:b,y:u.y},{x:b,y:l.y}],O=[{x:u.x,y:m},{x:l.x,y:m}];a[d]===f?h=d==="x"?A:O:h=d==="x"?O:A}else{const A=[{x:u.x,y:l.y}],O=[{x:l.x,y:u.y}];if(d==="x"?h=a.x===f?O:A:h=a.y===f?A:O,t===r){const F=Math.abs(e[d]-n[d]);if(F<=i){const I=Math.min(i-1,i-F);a[d]===f?g[d]=(u[d]>e[d]?-1:1)*I:_[d]=(l[d]>n[d]?-1:1)*I}}if(t!==r){const F=d==="x"?"y":"x",I=a[d]===s[F],L=u[F]>l[F],M=u[F]<l[F];(a[d]===1&&(!I&&L||I&&M)||a[d]!==1&&(!I&&M||I&&L))&&(h=d==="x"?A:O)}const B={x:u.x+g.x,y:u.y+g.y},$={x:l.x+_.x,y:l.y+_.y},P=Math.max(Math.abs(B.x-h[0].x),Math.abs($.x-h[0].x)),N=Math.max(Math.abs(B.y-h[0].y),Math.abs($.y-h[0].y));P>=N?(b=(B.x+$.x)/2,m=h[0].y):(b=h[0].x,m=(B.y+$.y)/2)}return[[e,{x:u.x+g.x,y:u.y+g.y},...h,{x:l.x+_.x,y:l.y+_.y},n],b,m,p,S]}function pE(e,t,n,r){const o=Math.min(Kc(e,t)/2,Kc(t,n)/2,r),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a){const l=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${i+o*l},${a}Q ${i},${a} ${i},${a+o*c}`}const s=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${i},${a+o*u}Q ${i},${a} ${i+o*s},${a}`}function Nl(e){const{sourceX:t,sourceY:n,sourcePosition:r=ie.Bottom,targetX:o,targetY:i,targetPosition:a=ie.Top,borderRadius:s=5,centerX:u,centerY:l,offset:c=20}=e,[d,f,h,b,m]=vE({source:{x:t,y:n},sourcePosition:r,target:{x:o,y:i},targetPosition:a,center:{x:u,y:l},offset:c});return[d.reduce((_,y,v)=>{let p;return v>0&&v<d.length-1?p=pE(d[v-1],y,d[v+1],s):p=`${v===0?"M":"L"}${y.x} ${y.y}`,_+=p,_},""),f,h,b,m]}function gE(e){const{sourceX:t,sourceY:n,targetX:r,targetY:o}=e,[i,a,s,u]=qm({sourceX:t,sourceY:n,targetX:r,targetY:o});return[`M ${t},${n}L ${r},${o}`,i,a,s,u]}const mE=Se({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,o]=gE(e);return _e(gr,{path:n,labelX:r,labelY:o,...t,...e})}}}),yE=mE,_E=Se({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,o]=Nl({...e,sourcePosition:e.sourcePosition??ie.Bottom,targetPosition:e.targetPosition??ie.Top});return _e(gr,{path:n,labelX:r,labelY:o,...t,...e})}}}),Mm=_E,bE=Se({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>_e(Mm,{...e,...t,borderRadius:0})}}),wE=bE,EE=Se({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,o]=km({...e,sourcePosition:e.sourcePosition??ie.Bottom,targetPosition:e.targetPosition??ie.Top});return _e(gr,{path:n,labelX:r,labelY:o,...t,...e})}}}),SE=EE,xE=Se({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,o]=Rm({...e,sourcePosition:e.sourcePosition??ie.Bottom,targetPosition:e.targetPosition??ie.Top});return _e(gr,{path:n,labelX:r,labelY:o,...t,...e})}}}),CE=xE,NE={input:oE,default:nE,output:rE},IE={default:SE,straight:yE,step:wE,smoothstep:Mm,simplebezier:CE};function TE(e,t,n){const r=le(()=>m=>t.value.get(m)),o=le(()=>m=>n.value.get(m)),i=le(()=>{const m={...IE,...e.edgeTypes},g=Object.keys(m);for(const _ of e.edges)_.type&&!g.includes(_.type)&&(m[_.type]=_.type);return m}),a=le(()=>{const m={...NE,...e.nodeTypes},g=Object.keys(m);for(const _ of e.nodes)_.type&&!g.includes(_.type)&&(m[_.type]=_.type);return m}),s=le(()=>e.onlyRenderVisibleElements?vm(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),u=le(()=>{if(e.onlyRenderVisibleElements){const m=[];for(const g of e.edges){const _=t.value.get(g.source),y=t.value.get(g.target);xw({sourcePos:_.computedPosition||{x:0,y:0},targetPos:y.computedPosition||{x:0,y:0},sourceWidth:_.dimensions.width,sourceHeight:_.dimensions.height,targetWidth:y.dimensions.width,targetHeight:y.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&m.push(g)}return m}return e.edges}),l=le(()=>[...s.value,...u.value]),c=le(()=>{const m=[];for(const g of e.nodes)g.selected&&m.push(g);return m}),d=le(()=>{const m=[];for(const g of e.edges)g.selected&&m.push(g);return m}),f=le(()=>[...c.value,...d.value]),h=le(()=>{const m=[];for(const g of e.nodes)g.dimensions.width&&g.dimensions.height&&g.handleBounds!==void 0&&m.push(g);return m}),b=le(()=>s.value.length>0&&h.value.length===s.value.length);return{getNode:r,getEdge:o,getElements:l,getEdgeTypes:i,getNodeTypes:a,getEdges:u,getNodes:s,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:h,areNodesInitialized:b}}class xt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=jt())==null?void 0:t.appContext.app,r=n?.config.globalProperties.$vueFlowStorage??xt.instance;return xt.instance=r??new xt,n&&(n.config.globalProperties.$vueFlowStorage=xt.instance),xt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const r=Tm(),o=By(r),i={};for(const[f,h]of Object.entries(o.hooks)){const b=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;i[b]=h.on}const a={};for(const[f,h]of Object.entries(o.hooks))a[f]=h.trigger;const s=le(()=>{const f=new Map;for(const h of o.nodes)f.set(h.id,h);return f}),u=le(()=>{const f=new Map;for(const h of o.edges)f.set(h.id,h);return f}),l=TE(o,s,u),c=Qw(o,s,u);c.setState({...o,...n});const d={...i,...l,...c,...__(o),nodeLookup:s,edgeLookup:u,emits:a,id:t,vueFlowVersion:"1.48.0",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Ee(e){const t=xt.getInstance(),n=bg(),r=typeof e=="object",o=r?e:{id:e},i=o.id,a=i??n?.vueFlowId;let s;if(n){const u=Ut(Hc,null);typeof u<"u"&&u!==null&&(!a||u.id===a)&&(s=u)}if(s||a&&(s=t.get(a)),!s||a&&s.id!==a){const u=i??t.getId(),l=t.create(u,o);s=l,(n??wg(!0)).run(()=>{be(l.applyDefault,(d,f,h)=>{const b=g=>{l.applyNodeChanges(g)},m=g=>{l.applyEdgeChanges(g)};d?(l.onNodesChange(b),l.onEdgesChange(m)):(l.hooks.value.nodesChange.off(b),l.hooks.value.edgesChange.off(m)),h(()=>{l.hooks.value.nodesChange.off(b),l.hooks.value.edgesChange.off(m)})},{immediate:!0}),fn(()=>{if(s){const d=t.get(s.id);d?d.$destroy():En(`No store instance found for id ${s.id} in storage.`)}})})}else r&&s.setState(o);if(n&&(zt(Hc,s),n.vueFlowId=s.id),r){const u=jt();u?.type.name!=="VueFlow"&&s.emits.error(new Re(Ae.USEVUEFLOW_OPTIONS))}return s}function qE(e){const{emits:t,dimensions:n}=Ee();let r;ut(()=>{const o=()=>{var i,a;if(!e.value||!(((a=(i=e.value).checkVisibility)==null?void 0:a.call(i))??!0))return;const s=cr(e.value);(s.width===0||s.height===0)&&t.error(new Re(Ae.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:s.width||500,height:s.height||500}};o(),window.addEventListener("resize",o),e.value&&(r=new ResizeObserver(()=>o()),r.observe(e.value)),Sg(()=>{window.removeEventListener("resize",o),r&&e.value&&r.unobserve(e.value)})})}const AE={name:"UserSelection",compatConfig:{MODE:3}},kE=Se({...AE,props:{userSelectionRect:{}},setup(e){return(t,n)=>(j(),Z("div",{class:"vue-flow__selection vue-flow__container",style:Ue({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),RE=["tabIndex"],ME={name:"NodesSelection",compatConfig:{MODE:3}},PE=Se({...ME,setup(e){const{emits:t,viewport:n,getSelectedNodes:r,noPanClassName:o,disableKeyboardA11y:i,userSelectionActive:a}=Ee(),s=Im(),u=ye(null),l=xm({el:u,onStart(b){t.selectionDragStart(b),t.nodeDragStart(b)},onDrag(b){t.selectionDrag(b),t.nodeDrag(b)},onStop(b){t.selectionDragStop(b),t.nodeDragStop(b)}});ut(()=>{var b;i.value||(b=u.value)==null||b.focus({preventScroll:!0})});const c=le(()=>hm(r.value)),d=le(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function f(b){t.selectionContextMenu({event:b,nodes:r.value})}function h(b){i.value||Lt[b.key]&&(b.preventDefault(),s({x:Lt[b.key].x,y:Lt[b.key].y},b.shiftKey))}return(b,m)=>!Y(a)&&c.value.width&&c.value.height?(j(),Z("div",{key:0,class:Oe(["vue-flow__nodesselection vue-flow__container",Y(o)]),style:Ue({transform:`translate(${Y(n).x}px,${Y(n).y}px) scale(${Y(n).zoom})`})},[z("div",{ref_key:"el",ref:u,class:Oe([{dragging:Y(l)},"vue-flow__nodesselection-rect"]),style:Ue(d.value),tabIndex:Y(i)?void 0:-1,onContextmenu:f,onKeydown:h},null,46,RE)],6)):me("",!0)}});function OE(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const DE={name:"Pane",compatConfig:{MODE:3}},$E=Se({...DE,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:r,emits:o,userSelectionActive:i,removeSelectedElements:a,userSelectionRect:s,elementsSelectable:u,nodesSelectionActive:l,getSelectedEdges:c,getSelectedNodes:d,removeNodes:f,removeEdges:h,selectionMode:b,deleteKeyCode:m,multiSelectionKeyCode:g,multiSelectionActive:_,edgeLookup:y,nodeLookup:v,connectionLookup:p,defaultEdgeOptions:S,connectionStartHandle:q}=Ee(),A=ye(null),O=ye(new Set),B=ye(new Set),$=ye(),P=we(()=>u.value&&(e.isSelecting||i.value)),N=we(()=>q.value!==null);let F=!1,I=!1;const L=dn(m,{actInsideInputWithModifier:!1}),M=dn(g);be(L,R=>{R&&(f(d.value),h(c.value),l.value=!1)}),be(M,R=>{_.value=R});function U(R,D){return T=>{T.target===D&&R?.(T)}}function K(R){if(F||N.value){F=!1;return}o.paneClick(R),a(),l.value=!1}function W(R){R.preventDefault(),R.stopPropagation(),o.paneContextMenu(R)}function X(R){o.paneScroll(R)}function ne(R){var D,T,C;if($.value=(D=t.value)==null?void 0:D.getBoundingClientRect(),!u.value||!e.isSelecting||R.button!==0||R.target!==A.value||!$.value)return;(C=(T=R.target)==null?void 0:T.setPointerCapture)==null||C.call(T,R.pointerId);const{x:V,y:H}=OE(R,$.value);I=!0,F=!1,a(),s.value={width:0,height:0,startX:V,startY:H,x:V,y:H},o.selectionStart(R)}function ae(R){var D;if(!$.value||!s.value)return;F=!0;const{x:T,y:C}=Ze(R,$.value),{startX:V=0,startY:H=0}=s.value,re={startX:V,startY:H,x:T<V?T:V,y:C<H?C:H,width:Math.abs(T-V),height:Math.abs(C-H)},fe=O.value,ce=B.value;O.value=new Set(vm(n.value,re,r.value,b.value===Dl.Partial,!0).map(x=>x.id)),B.value=new Set;const se=((D=S.value)==null?void 0:D.selectable)??!0;for(const x of O.value){const w=p.value.get(x);if(w)for(const{edgeId:k}of w.values()){const E=y.value.get(k);E&&(E.selectable??se)&&B.value.add(k)}}if(!Gc(fe,O.value)){const x=gt(v.value,O.value,!0);o.nodesChange(x)}if(!Gc(ce,B.value)){const x=gt(y.value,B.value);o.edgesChange(x)}s.value=re,i.value=!0,l.value=!1}function de(R){var D;R.button!==0||!I||((D=R.target)==null||D.releasePointerCapture(R.pointerId),!i.value&&s.value&&R.target===A.value&&K(R),i.value=!1,s.value=null,l.value=O.value.size>0,o.selectionEnd(R),e.selectionKeyPressed&&(F=!1),I=!1)}return(R,D)=>(j(),Z("div",{ref_key:"container",ref:A,class:Oe(["vue-flow__pane vue-flow__container",{selection:R.isSelecting}]),onClick:D[0]||(D[0]=T=>P.value?void 0:U(K,A.value)(T)),onContextmenu:D[1]||(D[1]=T=>U(W,A.value)(T)),onWheelPassive:D[2]||(D[2]=T=>U(X,A.value)(T)),onPointerenter:D[3]||(D[3]=T=>P.value?void 0:Y(o).paneMouseEnter(T)),onPointerdown:D[4]||(D[4]=T=>P.value?ne(T):Y(o).paneMouseMove(T)),onPointermove:D[5]||(D[5]=T=>P.value?ae(T):Y(o).paneMouseMove(T)),onPointerup:D[6]||(D[6]=T=>P.value?de(T):void 0),onPointerleave:D[7]||(D[7]=T=>Y(o).paneMouseLeave(T))},[Ce(R.$slots,"default"),Y(i)&&Y(s)?(j(),Ne(kE,{key:0,"user-selection-rect":Y(s)},null,8,["user-selection-rect"])):me("",!0),Y(l)&&Y(d).length?(j(),Ne(PE,{key:1})):me("",!0)],34))}}),BE={name:"Transform",compatConfig:{MODE:3}},LE=Se({...BE,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:r}=Ee(),o=le(()=>n.value?!r.value:!1),i=le(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(a,s)=>(j(),Z("div",{class:"vue-flow__transformationpane vue-flow__container",style:Ue({transform:i.value,opacity:o.value?0:void 0})},[Ce(a.$slots,"default")],4))}}),zE={name:"Viewport",compatConfig:{MODE:3}},VE=Se({...zE,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:r,translateExtent:o,zoomActivationKeyCode:i,selectionKeyCode:a,panActivationKeyCode:s,panOnScroll:u,panOnScrollMode:l,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:f,zoomOnPinch:h,zoomOnScroll:b,preventScrolling:m,noWheelClassName:g,noPanClassName:_,emits:y,connectionStartHandle:v,userSelectionActive:p,paneDragging:S,d3Zoom:q,d3Selection:A,d3ZoomHandler:O,viewport:B,viewportRef:$,paneClickDistance:P}=Ee();qE($);const N=Yn(!1),F=Yn(!1);let I=null,L=!1,M=0,U={x:0,y:0,zoom:0};const K=dn(s),W=dn(a),X=dn(i),ne=we(()=>(!W.value||W.value&&a.value===!0)&&(K.value||d.value)),ae=we(()=>K.value||u.value),de=we(()=>W.value||a.value===!0&&ne.value!==!0),R=we(()=>v.value!==null);ut(()=>{if(!$.value){En("Viewport element is missing");return}const H=$.value,re=H.getBoundingClientRect(),fe=rw().clickDistance(P.value).scaleExtent([t.value,n.value]).translateExtent(o.value),ce=Fe(H).call(fe),se=ce.on("wheel.zoom"),x=Gt.translate(r.value.x??0,r.value.y??0).scale(At(r.value.zoom??1,t.value,n.value)),w=[[0,0],[re.width,re.height]],k=fe.constrain()(x,w,o.value);fe.transform(ce,k),fe.wheelDelta(qc),q.value=fe,A.value=ce,O.value=se,B.value={x:k.x,y:k.y,zoom:k.k},fe.on("start",E=>{var G;if(!E.sourceEvent)return null;M=E.sourceEvent.button,N.value=!0;const J=C(E.transform);((G=E.sourceEvent)==null?void 0:G.type)==="mousedown"&&(S.value=!0),U=J,y.viewportChangeStart(J),y.moveStart({event:E,flowTransform:J})}),fe.on("end",E=>{if(!E.sourceEvent)return null;if(N.value=!1,S.value=!1,D(ne.value,M??0)&&!L&&y.paneContextMenu(E.sourceEvent),L=!1,T(U,E.transform)){const G=C(E.transform);U=G,y.viewportChangeEnd(G),y.moveEnd({event:E,flowTransform:G})}}),fe.filter(E=>{var G;const J=X.value||b.value,oe=h.value&&E.ctrlKey,ee=E.button,te=E.type==="wheel";if(ee===1&&E.type==="mousedown"&&(V(E,"vue-flow__node")||V(E,"vue-flow__edge")))return!0;if(!ne.value&&!J&&!ae.value&&!f.value&&!h.value||p.value||R.value&&!te||!f.value&&E.type==="dblclick"||V(E,g.value)&&te||V(E,_.value)&&(!te||ae.value&&te&&!X.value)||!h.value&&E.ctrlKey&&te||!J&&!ae.value&&!oe&&te)return!1;if(!h&&E.type==="touchstart"&&((G=E.touches)==null?void 0:G.length)>1)return E.preventDefault(),!1;if(!ne.value&&(E.type==="mousedown"||E.type==="touchstart")||a.value===!0&&Array.isArray(d.value)&&d.value.includes(0)&&ee===0||Array.isArray(d.value)&&!d.value.includes(ee)&&(E.type==="mousedown"||E.type==="touchstart"))return!1;const ue=Array.isArray(d.value)&&d.value.includes(ee)||a.value===!0&&Array.isArray(d.value)&&!d.value.includes(0)||!ee||ee<=1;return(!E.ctrlKey||K.value||te)&&ue}),be([p,ne],()=>{p.value&&!N.value?fe.on("zoom",null):p.value||fe.on("zoom",E=>{B.value={x:E.transform.x,y:E.transform.y,zoom:E.transform.k};const G=C(E.transform);L=D(ne.value,M??0),y.viewportChange(G),y.move({event:E,flowTransform:G})})},{immediate:!0}),be([p,ae,l,X,h,m,g],()=>{ae.value&&!X.value&&!p.value?ce.on("wheel.zoom",E=>{if(V(E,g.value))return!1;const G=X.value||b.value,J=h.value&&E.ctrlKey;if(!(!m.value||ae.value||G||J))return!1;E.preventDefault(),E.stopImmediatePropagation();const ee=ce.property("__zoom").k||1,te=or();if(!K.value&&E.ctrlKey&&h.value&&te){const dt=Xe(E),ft=qc(E),Tn=ee*2**ft;fe.scaleTo(ce,Tn,dt,E);return}const ue=E.deltaMode===1?20:1;let he=l.value===cn.Vertical?0:E.deltaX*ue,pe=l.value===cn.Horizontal?0:E.deltaY*ue;!te&&E.shiftKey&&l.value!==cn.Vertical&&!he&&pe&&(he=pe,pe=0),fe.translateBy(ce,-(he/ee)*c.value,-(pe/ee)*c.value);const Le=C(ce.property("__zoom"));I&&clearTimeout(I),F.value?(y.move({event:E,flowTransform:Le}),y.viewportChange(Le),I=setTimeout(()=>{y.moveEnd({event:E,flowTransform:Le}),y.viewportChangeEnd(Le),F.value=!1},150)):(F.value=!0,y.moveStart({event:E,flowTransform:Le}),y.viewportChangeStart(Le))},{passive:!1}):typeof se<"u"&&ce.on("wheel.zoom",function(E,G){const J=!m.value&&E.type==="wheel"&&!E.ctrlKey,oe=X.value||b.value,ee=h.value&&E.ctrlKey;if(!oe&&!u.value&&!ee&&E.type==="wheel"||J||V(E,g.value))return null;E.preventDefault(),se.call(this,E,G)},{passive:!1})},{immediate:!0})});function D(H,re){return re===2&&Array.isArray(H)&&H.includes(2)}function T(H,re){return H.x!==re.x&&!Number.isNaN(re.x)||H.y!==re.y&&!Number.isNaN(re.y)||H.zoom!==re.k&&!Number.isNaN(re.k)}function C(H){return{x:H.x,y:H.y,zoom:H.k}}function V(H,re){return H.target.closest(`.${re}`)}return(H,re)=>(j(),Z("div",{ref_key:"viewportRef",ref:$,class:"vue-flow__viewport vue-flow__container"},[ge($E,{"is-selecting":de.value,"selection-key-pressed":Y(W),class:Oe({connecting:R.value,dragging:Y(S),draggable:Y(d)===!0||Array.isArray(Y(d))&&Y(d).includes(0)})},{default:Me(()=>[ge(LE,null,{default:Me(()=>[Ce(H.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),FE=["id"],GE=["id"],HE=["id"],UE={name:"A11yDescriptions",compatConfig:{MODE:3}},jE=Se({...UE,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:r}=Ee();return(o,i)=>(j(),Z(Te,null,[z("div",{id:`${Y(im)}-${Y(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Ie(Y(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,FE),z("div",{id:`${Y(am)}-${Y(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,GE),Y(n)?me("",!0):(j(),Z("div",{key:0,id:`${Y(lw)}-${Y(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Ie(Y(r)),9,HE))],64))}});function YE(){const e=Ee();be(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function KE(e,t,n){return n===ie.Left?e-t:n===ie.Right?e+t:e}function XE(e,t,n){return n===ie.Top?e-t:n===ie.Bottom?e+t:e}const Ll=function({radius:e=10,centerX:t=0,centerY:n=0,position:r=ie.Top,type:o}){return _e("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${o}`,cx:KE(t,e,r),cy:XE(n,e,r),r:e,stroke:"transparent",fill:"transparent"})};Ll.props=["radius","centerX","centerY","position","type"];Ll.compatConfig={MODE:3};const Xc=Ll,WE=Se({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:r,edgeUpdaterRadius:o,emits:i,nodesSelectionActive:a,noPanClassName:s,getEdgeTypes:u,removeSelectedEdges:l,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:h,disableKeyboardA11y:b,elementsSelectable:m,edgesUpdatable:g,edgesFocusable:_,hooks:y}=Ee(),v=le(()=>c(e.id)),{emit:p,on:S}=zw(v.value,i),q=Ut(fr),A=jt(),O=ye(!1),B=ye(!1),$=ye(""),P=ye(null),N=ye("source"),F=ye(null),I=we(()=>typeof v.value.selectable>"u"?m.value:v.value.selectable),L=we(()=>typeof v.value.updatable>"u"?g.value:v.value.updatable),M=we(()=>typeof v.value.focusable>"u"?_.value:v.value.focusable);zt($w,e.id),zt(Bw,F);const U=le(()=>v.value.class instanceof Function?v.value.class(v.value):v.value.class),K=le(()=>v.value.style instanceof Function?v.value.style(v.value):v.value.style),W=le(()=>{const w=v.value.type||"default",k=q?.[`edge-${w}`];if(k)return k;let E=v.value.template??u.value[w];if(typeof E=="string"&&A){const G=Object.keys(A.appContext.components);G&&G.includes(w)&&(E=xg(w,!1))}return E&&typeof E!="string"?E:(i.error(new Re(Ae.EDGE_TYPE_MISSING,E)),!1)}),{handlePointerDown:X}=Cm({nodeId:$,handleId:P,type:N,isValidConnection:f,edgeUpdaterType:N,onEdgeUpdate:de,onEdgeUpdateEnd:R});return()=>{const w=d(v.value.source),k=d(v.value.target),E="pathOptions"in v.value?v.value.pathOptions:{};if(!w&&!k)return i.error(new Re(Ae.EDGE_SOURCE_TARGET_MISSING,v.value.id,v.value.source,v.value.target)),null;if(!w)return i.error(new Re(Ae.EDGE_SOURCE_MISSING,v.value.id,v.value.source)),null;if(!k)return i.error(new Re(Ae.EDGE_TARGET_MISSING,v.value.id,v.value.target)),null;if(!v.value||v.value.hidden||w.hidden||k.hidden)return null;let G;r.value===yt.Strict?G=w.handleBounds.source:G=[...w.handleBounds.source||[],...w.handleBounds.target||[]];const J=$c(G,v.value.sourceHandle);let oe;r.value===yt.Strict?oe=k.handleBounds.target:oe=[...k.handleBounds.target||[],...k.handleBounds.source||[]];const ee=$c(oe,v.value.targetHandle),te=J?.position||ie.Bottom,ue=ee?.position||ie.Top,{x:he,y:pe}=Ht(w,J,te),{x:Le,y:dt}=Ht(k,ee,ue);return v.value.sourceX=he,v.value.sourceY=pe,v.value.targetX=Le,v.value.targetY=dt,_e("g",{ref:F,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${W.value===!1?"default":v.value.type||"default"}`,s.value,U.value,{updating:O.value,selected:v.value.selected,animated:v.value.animated,inactive:!I.value&&!y.value.edgeClick.hasListeners()}],tabIndex:M.value?0:void 0,"aria-label":v.value.ariaLabel===null?void 0:v.value.ariaLabel??`Edge from ${v.value.source} to ${v.value.target}`,"aria-describedby":M.value?`${am}-${t}`:void 0,"aria-roledescription":"edge",role:M.value?"group":"img",...v.value.domAttributes,onClick:T,onContextmenu:C,onDblclick:V,onMouseenter:H,onMousemove:re,onMouseleave:fe,onKeyDown:M.value?x:void 0},[B.value?null:_e(W.value===!1?u.value.default:W.value,{id:e.id,sourceNode:w,targetNode:k,source:v.value.source,target:v.value.target,type:v.value.type,updatable:L.value,selected:v.value.selected,animated:v.value.animated,label:v.value.label,labelStyle:v.value.labelStyle,labelShowBg:v.value.labelShowBg,labelBgStyle:v.value.labelBgStyle,labelBgPadding:v.value.labelBgPadding,labelBgBorderRadius:v.value.labelBgBorderRadius,data:v.value.data,events:{...v.value.events,...S},style:K.value,markerStart:`url('#${_n(v.value.markerStart,t)}')`,markerEnd:`url('#${_n(v.value.markerEnd,t)}')`,sourcePosition:te,targetPosition:ue,sourceX:he,sourceY:pe,targetX:Le,targetY:dt,sourceHandleId:v.value.sourceHandle,targetHandleId:v.value.targetHandle,interactionWidth:v.value.interactionWidth,...E}),[L.value==="source"||L.value===!0?[_e("g",{onMousedown:ce,onMouseenter:ne,onMouseout:ae},_e(Xc,{position:te,centerX:he,centerY:pe,radius:o.value,type:"source","data-type":"source"}))]:null,L.value==="target"||L.value===!0?[_e("g",{onMousedown:se,onMouseenter:ne,onMouseout:ae},_e(Xc,{position:ue,centerX:Le,centerY:dt,radius:o.value,type:"target","data-type":"target"}))]:null]])};function ne(){O.value=!0}function ae(){O.value=!1}function de(w,k){p.update({event:w,edge:v.value,connection:k})}function R(w){p.updateEnd({event:w,edge:v.value}),B.value=!1}function D(w,k){w.button===0&&(B.value=!0,$.value=k?v.value.target:v.value.source,P.value=(k?v.value.targetHandle:v.value.sourceHandle)??null,N.value=k?"target":"source",p.updateStart({event:w,edge:v.value}),X(w))}function T(w){var k;const E={event:w,edge:v.value};I.value&&(a.value=!1,v.value.selected&&h.value?(l([v.value]),(k=F.value)==null||k.blur()):n([v.value])),p.click(E)}function C(w){p.contextMenu({event:w,edge:v.value})}function V(w){p.doubleClick({event:w,edge:v.value})}function H(w){p.mouseEnter({event:w,edge:v.value})}function re(w){p.mouseMove({event:w,edge:v.value})}function fe(w){p.mouseLeave({event:w,edge:v.value})}function ce(w){D(w,!0)}function se(w){D(w,!1)}function x(w){var k;!b.value&&sm.includes(w.key)&&I.value&&(w.key==="Escape"?((k=F.value)==null||k.blur(),l([c(e.id)])):n([c(e.id)]))}}}),ZE=WE,JE=Se({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:r,connectionEndHandle:o,connectionPosition:i,connectionLineType:a,connectionLineStyle:s,connectionLineOptions:u,connectionStatus:l,viewport:c,findNode:d}=Ee(),f=(e=Ut(fr))==null?void 0:e["connection-line"],h=le(()=>{var y;return d((y=r.value)==null?void 0:y.nodeId)}),b=le(()=>{var y;return d((y=o.value)==null?void 0:y.nodeId)??null}),m=le(()=>({x:(i.value.x-c.value.x)/c.value.zoom,y:(i.value.y-c.value.y)/c.value.zoom})),g=le(()=>u.value.markerStart?`url(#${_n(u.value.markerStart,t)})`:""),_=le(()=>u.value.markerEnd?`url(#${_n(u.value.markerEnd,t)})`:"");return()=>{var y,v,p;if(!h.value||!r.value)return null;const S=r.value.id,q=r.value.type,A=h.value.handleBounds;let O=A?.[q]??[];if(n.value===yt.Loose){const K=A?.[q==="source"?"target":"source"]??[];O=[...O,...K]}if(!O)return null;const B=(S?O.find(K=>K.id===S):O[0])??null,$=B?.position??ie.Top,{x:P,y:N}=Ht(h.value,B,$);let F=null;b.value&&(n.value===yt.Strict?F=((y=b.value.handleBounds[q==="source"?"target":"source"])==null?void 0:y.find(K=>{var W;return K.id===((W=o.value)==null?void 0:W.id)}))||null:F=((v=[...b.value.handleBounds.source??[],...b.value.handleBounds.target??[]])==null?void 0:v.find(K=>{var W;return K.id===((W=o.value)==null?void 0:W.id)}))||null);const I=((p=o.value)==null?void 0:p.position)??($?xl[$]:null);if(!$||!I)return null;const L=a.value??u.value.type??St.Bezier;let M="";const U={sourceX:P,sourceY:N,sourcePosition:$,targetX:m.value.x,targetY:m.value.y,targetPosition:I};return L===St.Bezier?[M]=km(U):L===St.Step?[M]=Nl({...U,borderRadius:0}):L===St.SmoothStep?[M]=Nl(U):L===St.SimpleBezier?[M]=Rm(U):M=`M${P},${N} ${m.value.x},${m.value.y}`,_e("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},_e("g",{class:"vue-flow__connection"},f?_e(f,{sourceX:P,sourceY:N,sourcePosition:$,targetX:m.value.x,targetY:m.value.y,targetPosition:I,sourceNode:h.value,sourceHandle:B,targetNode:b.value,targetHandle:F,markerEnd:_.value,markerStart:g.value,connectionStatus:l.value}):_e("path",{d:M,class:[u.value.class,l.value,"vue-flow__connection-path"],style:{...s.value,...u.value.style},"marker-end":_.value,"marker-start":g.value})))}}}),QE=JE,eS=["id","markerWidth","markerHeight","markerUnits","orient"],tS={name:"MarkerType",compatConfig:{MODE:3}},nS=Se({...tS,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(j(),Z("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===Y(El).ArrowClosed?(j(),Z("polyline",{key:0,style:Ue({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):me("",!0),t.type===Y(El).Arrow?(j(),Z("polyline",{key:1,style:Ue({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):me("",!0)],8,eS))}}),rS={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},oS={name:"MarkerDefinitions",compatConfig:{MODE:3}},iS=Se({...oS,setup(e){const{id:t,edges:n,connectionLineOptions:r,defaultMarkerColor:o}=Ee(),i=le(()=>{const a=new Set,s=[],u=l=>{if(l){const c=_n(l,t);a.has(c)||(typeof l=="object"?s.push({...l,id:c,color:l.color||o.value}):s.push({id:c,color:o.value,type:l}),a.add(c))}};for(const l of[r.value.markerEnd,r.value.markerStart])u(l);for(const l of n.value)for(const c of[l.markerStart,l.markerEnd])u(c);return s.sort((l,c)=>l.id.localeCompare(c.id))});return(a,s)=>(j(),Z("svg",rS,[z("defs",null,[(j(!0),Z(Te,null,ot(i.value,u=>(j(),Ne(nS,{id:u.id,key:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,"stroke-width":u.strokeWidth,orient:u.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),aS={name:"Edges",compatConfig:{MODE:3}},sS=Se({...aS,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:r}=Ee();return(o,i)=>(j(),Z(Te,null,[ge(iS),(j(!0),Z(Te,null,ot(Y(n),a=>(j(),Z("svg",{key:a.id,class:"vue-flow__edges vue-flow__container",style:Ue({zIndex:Y(Cw)(a,Y(t),Y(r))})},[ge(Y(ZE),{id:a.id},null,8,["id"])],4))),128)),ge(Y(QE))],64))}}),uS=Se({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:r,nodesSelectionActive:o,multiSelectionActive:i,emits:a,removeSelectedNodes:s,addSelectedNodes:u,updateNodeDimensions:l,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:f,elevateNodesOnSelect:h,disableKeyboardA11y:b,ariaLiveMessage:m,snapToGrid:g,snapGrid:_,nodeDragThreshold:y,nodesDraggable:v,elementsSelectable:p,nodesConnectable:S,nodesFocusable:q,hooks:A}=Ee(),O=ye(null);zt(Sm,O),zt(Em,e.id);const B=Ut(fr),$=jt(),P=Im(),{node:N,parentNode:F}=Nm(e.id),{emit:I,on:L}=Hw(N,a),M=we(()=>typeof N.draggable>"u"?v.value:N.draggable),U=we(()=>typeof N.selectable>"u"?p.value:N.selectable),K=we(()=>typeof N.connectable>"u"?S.value:N.connectable),W=we(()=>typeof N.focusable>"u"?q.value:N.focusable),X=le(()=>U.value||M.value||A.value.nodeClick.hasListeners()||A.value.nodeDoubleClick.hasListeners()||A.value.nodeMouseEnter.hasListeners()||A.value.nodeMouseMove.hasListeners()||A.value.nodeMouseLeave.hasListeners()),ne=we(()=>!!N.dimensions.width&&!!N.dimensions.height),ae=le(()=>{const k=N.type||"default",E=B?.[`node-${k}`];if(E)return E;let G=N.template||d.value[k];if(typeof G=="string"&&$){const J=Object.keys($.appContext.components);J&&J.includes(k)&&(G=xg(k,!1))}return G&&typeof G!="string"?G:(a.error(new Re(Ae.NODE_TYPE_MISSING,G)),!1)}),de=xm({id:e.id,el:O,disabled:()=>!M.value,selectable:U,dragHandle:()=>N.dragHandle,onStart(k){I.dragStart(k)},onDrag(k){I.drag(k)},onStop(k){I.dragStop(k)},onClick(k){x(k)}}),R=le(()=>N.class instanceof Function?N.class(N):N.class),D=le(()=>{const k=(N.style instanceof Function?N.style(N):N.style)||{},E=N.width instanceof Function?N.width(N):N.width,G=N.height instanceof Function?N.height(N):N.height;return!k.width&&E&&(k.width=typeof E=="string"?E:`${E}px`),!k.height&&G&&(k.height=typeof G=="string"?G:`${G}px`),k}),T=we(()=>Number(N.zIndex??D.value.zIndex??0));return c(k=>{(k.includes(e.id)||!k.length)&&V()}),ut(()=>{be(()=>N.hidden,(k=!1,E,G)=>{!k&&O.value&&(e.resizeObserver.observe(O.value),G(()=>{O.value&&e.resizeObserver.unobserve(O.value)}))},{immediate:!0,flush:"post"})}),be([()=>N.type,()=>N.sourcePosition,()=>N.targetPosition],()=>{He(()=>{l([{id:e.id,nodeElement:O.value,forceUpdate:!0}])})}),be([()=>N.position.x,()=>N.position.y,()=>{var k;return(k=F.value)==null?void 0:k.computedPosition.x},()=>{var k;return(k=F.value)==null?void 0:k.computedPosition.y},()=>{var k;return(k=F.value)==null?void 0:k.computedPosition.z},T,()=>N.selected,()=>N.dimensions.height,()=>N.dimensions.width,()=>{var k;return(k=F.value)==null?void 0:k.dimensions.height},()=>{var k;return(k=F.value)==null?void 0:k.dimensions.width}],([k,E,G,J,oe,ee])=>{const te={x:k,y:E,z:ee+(h.value&&N.selected?1e3:0)};typeof G<"u"&&typeof J<"u"?N.computedPosition=_w({x:G,y:J,z:oe},te):N.computedPosition=te},{flush:"post",immediate:!0}),be([()=>N.extent,f],([k,E],[G,J])=>{(k!==G||E!==J)&&C()}),N.extent==="parent"||typeof N.extent=="object"&&"range"in N.extent&&N.extent.range==="parent"?hl(()=>ne).toBe(!0).then(C):C(),()=>N.hidden?null:_e("div",{ref:O,"data-id":N.id,class:["vue-flow__node",`vue-flow__node-${ae.value===!1?"default":N.type||"default"}`,{[n.value]:M.value,dragging:de?.value,draggable:M.value,selected:N.selected,selectable:U.value,parent:N.isParent},R.value],style:{visibility:ne.value?"visible":"hidden",zIndex:N.computedPosition.z??T.value,transform:`translate(${N.computedPosition.x}px,${N.computedPosition.y}px)`,pointerEvents:X.value?"all":"none",...D.value},tabIndex:W.value?0:void 0,role:W.value?"group":void 0,"aria-describedby":b.value?void 0:`${im}-${t}`,"aria-label":N.ariaLabel,"aria-roledescription":"node",...N.domAttributes,onMouseenter:H,onMousemove:re,onMouseleave:fe,onContextmenu:ce,onClick:x,onDblclick:se,onKeydown:w},[_e(ae.value===!1?d.value.default:ae.value,{id:N.id,type:N.type,data:N.data,events:{...N.events,...L},selected:N.selected,resizing:N.resizing,dragging:de.value,connectable:K.value,position:N.computedPosition,dimensions:N.dimensions,isValidTargetPos:N.isValidTargetPos,isValidSourcePos:N.isValidSourcePos,parent:N.parentNode,parentNodeId:N.parentNode,zIndex:N.computedPosition.z??T.value,targetPosition:N.targetPosition,sourcePosition:N.sourcePosition,label:N.label,dragHandle:N.dragHandle,onUpdateNodeInternals:V})]);function C(){const k=N.computedPosition,{computedPosition:E,position:G}=$l(N,g.value?dr(k,_.value):k,a.error,f.value,F.value);(N.computedPosition.x!==E.x||N.computedPosition.y!==E.y)&&(N.computedPosition={...N.computedPosition,...E}),(N.position.x!==G.x||N.position.y!==G.y)&&(N.position=G)}function V(){O.value&&l([{id:e.id,nodeElement:O.value,forceUpdate:!0}])}function H(k){de?.value||I.mouseEnter({event:k,node:N})}function re(k){de?.value||I.mouseMove({event:k,node:N})}function fe(k){de?.value||I.mouseLeave({event:k,node:N})}function ce(k){return I.contextMenu({event:k,node:N})}function se(k){return I.doubleClick({event:k,node:N})}function x(k){U.value&&(!r.value||!M.value||y.value>0)&&Cl(N,i.value,u,s,o,!1,O.value),I.click({event:k,node:N})}function w(k){if(!(Sl(k)||b.value))if(sm.includes(k.key)&&U.value){const E=k.key==="Escape";Cl(N,i.value,u,s,o,E,O.value)}else M.value&&N.selected&&Lt[k.key]&&(k.preventDefault(),m.value=`Moved selected node ${k.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~N.position.x}, y: ${~~N.position.y}`,P({x:Lt[k.key].x,y:Lt[k.key].y},k.shiftKey))}}}),lS=uS;function cS(e={includeHiddenNodes:!1}){const{nodes:t}=Ee();return le(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&(n?.handleBounds===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const dS={class:"vue-flow__nodes vue-flow__container"},fS={name:"Nodes",compatConfig:{MODE:3}},hS=Se({...fS,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:r}=Ee(),o=cS(),i=ye();return be(o,a=>{a&&He(()=>{r.nodesInitialized(t.value)})},{immediate:!0}),ut(()=>{i.value=new ResizeObserver(a=>{const s=a.map(u=>({id:u.target.getAttribute("data-id"),nodeElement:u.target,forceUpdate:!0}));He(()=>n(s))})}),Sg(()=>{var a;return(a=i.value)==null?void 0:a.disconnect()}),(a,s)=>(j(),Z("div",dS,[i.value?(j(!0),Z(Te,{key:0},ot(Y(t),(u,l,c,d)=>{const f=[u.id];if(d&&d.key===u.id&&Vy(d,f))return d;const h=(j(),Ne(Y(lS),{id:u.id,key:u.id,"resize-observer":i.value},null,8,["id","resize-observer"]));return h.memo=f,h},s,0),128)):me("",!0)]))}});function vS(){const{emits:e}=Ee();ut(()=>{if(wm()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new Re(Ae.MISSING_STYLES))}})}const pS=z("div",{class:"vue-flow__edge-labels"},null,-1),gS={name:"VueFlow",compatConfig:{MODE:3}},mS=Se({...gS,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const r=e,o=$y(),i=Dr(r,"modelValue",n),a=Dr(r,"nodes",n),s=Dr(r,"edges",n),u=Ee(r),l=Kw({modelValue:i,nodes:a,edges:s},r,u);return Ww(n,u.hooks),YE(),vS(),zt(fr,o),Eg(l),t(u),(c,d)=>(j(),Z("div",{ref:Y(u).vueFlowRef,class:"vue-flow"},[ge(VE,null,{default:Me(()=>[ge(sS),pS,ge(hS),Ce(c.$slots,"zoom-pane")]),_:3}),Ce(c.$slots,"default"),ge(jE)],512))}}),yS={name:"Panel",compatConfig:{MODE:3}},_S=Se({...yS,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Ee(),r=le(()=>`${t.position}`.split("-"));return(o,i)=>(j(),Z("div",{class:Oe(["vue-flow__panel",r.value]),style:Ue({pointerEvents:Y(n)?"none":"all"})},[Ce(o.$slots,"default")],6))}});var at=(e=>(e.Lines="lines",e.Dots="dots",e))(at||{});const Pm=function({dimensions:e,size:t,color:n}){return _e("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},Om=function({radius:e,color:t}){return _e("circle",{cx:e,cy:e,r:e,fill:t})};at.Lines+"",at.Dots+"";const bS={[at.Dots]:"#81818a",[at.Lines]:"#eee"},wS=["id","x","y","width","height","patternTransform"],ES={key:2,height:"100",width:"100"},SS=["fill"],xS=["x","y","fill"],CS={name:"Background",compatConfig:{MODE:3}},NS=Se({...CS,props:{id:{},variant:{default:()=>at.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(e){const{id:t,viewport:n}=Ee(),r=le(()=>{const a=n.value.zoom,[s,u]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],l=[s*a||1,u*a||1],c=e.size*a,[d,f]=Array.isArray(e.offset)?e.offset:[e.offset,e.offset],h=[d*a||1+l[0]/2,f*a||1+l[1]/2];return{scaledGap:l,offset:h,size:c}}),o=we(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),i=we(()=>e.color||e.patternColor||bS[e.variant||at.Dots]);return(a,s)=>(j(),Z("svg",{class:"vue-flow__background vue-flow__container",style:Ue({height:`${a.height>100?100:a.height}%`,width:`${a.width>100?100:a.width}%`})},[Ce(a.$slots,"pattern-container",{id:o.value},()=>[z("pattern",{id:o.value,x:Y(n).x%r.value.scaledGap[0],y:Y(n).y%r.value.scaledGap[1],width:r.value.scaledGap[0],height:r.value.scaledGap[1],patternTransform:`translate(-${r.value.offset[0]},-${r.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[Ce(a.$slots,"pattern",{},()=>[a.variant===Y(at).Lines?(j(),Ne(Y(Pm),{key:0,size:a.lineWidth,color:i.value,dimensions:r.value.scaledGap},null,8,["size","color","dimensions"])):a.variant===Y(at).Dots?(j(),Ne(Y(Om),{key:1,color:i.value,radius:r.value.size/2},null,8,["color","radius"])):me("",!0),a.bgColor?(j(),Z("svg",ES,[z("rect",{width:"100%",height:"100%",fill:a.bgColor},null,8,SS)])):me("",!0)])],8,wS)]),z("rect",{x:a.x,y:a.y,width:"100%",height:"100%",fill:`url(#${o.value})`},null,8,xS),Ce(a.$slots,"default",{id:o.value})],4))}}),IS={name:"ControlButton",compatConfig:{MODE:3}},TS=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},qS={type:"button",class:"vue-flow__controls-button"};function AS(e,t,n,r,o,i){return j(),Z("button",qS,[Ce(e.$slots,"default")])}const zn=TS(IS,[["render",AS]]),kS={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},RS=z("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),MS=[RS];function PS(e,t){return j(),Z("svg",kS,MS)}const OS={render:PS},DS={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},$S=z("path",{d:"M0 0h32v4.2H0z"},null,-1),BS=[$S];function LS(e,t){return j(),Z("svg",DS,BS)}const zS={render:LS},VS={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},FS=z("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),GS=[FS];function HS(e,t){return j(),Z("svg",VS,GS)}const US={render:HS},jS={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},YS=z("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),KS=[YS];function XS(e,t){return j(),Z("svg",jS,KS)}const WS={render:XS},ZS={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},JS=z("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),QS=[JS];function ex(e,t){return j(),Z("svg",ZS,QS)}const tx={render:ex},nx={name:"Controls",compatConfig:{MODE:3}},rx=Se({...nx,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>om.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:r,elementsSelectable:o,setInteractive:i,zoomIn:a,zoomOut:s,fitView:u,viewport:l,minZoom:c,maxZoom:d}=Ee(),f=we(()=>n.value||r.value||o.value),h=we(()=>l.value.zoom<=c.value),b=we(()=>l.value.zoom>=d.value);function m(){a(),t("zoomIn")}function g(){s(),t("zoomOut")}function _(){u(e.fitViewParams),t("fitView")}function y(){i(!f.value),t("interactionChange",!f.value)}return(v,p)=>(j(),Ne(Y(_S),{class:"vue-flow__controls",position:v.position},{default:Me(()=>[Ce(v.$slots,"top"),v.showZoom?(j(),Z(Te,{key:0},[Ce(v.$slots,"control-zoom-in",{},()=>[ge(zn,{class:"vue-flow__controls-zoomin",disabled:b.value,onClick:m},{default:Me(()=>[Ce(v.$slots,"icon-zoom-in",{},()=>[(j(),Ne(Et(Y(OS))))])]),_:3},8,["disabled"])]),Ce(v.$slots,"control-zoom-out",{},()=>[ge(zn,{class:"vue-flow__controls-zoomout",disabled:h.value,onClick:g},{default:Me(()=>[Ce(v.$slots,"icon-zoom-out",{},()=>[(j(),Ne(Et(Y(zS))))])]),_:3},8,["disabled"])])],64)):me("",!0),v.showFitView?Ce(v.$slots,"control-fit-view",{key:1},()=>[ge(zn,{class:"vue-flow__controls-fitview",onClick:_},{default:Me(()=>[Ce(v.$slots,"icon-fit-view",{},()=>[(j(),Ne(Et(Y(US))))])]),_:3})]):me("",!0),v.showInteractive?Ce(v.$slots,"control-interactive",{key:2},()=>[v.showInteractive?(j(),Ne(zn,{key:0,class:"vue-flow__controls-interactive",onClick:y},{default:Me(()=>[f.value?Ce(v.$slots,"icon-unlock",{key:0},()=>[(j(),Ne(Et(Y(tx))))]):me("",!0),f.value?me("",!0):Ce(v.$slots,"icon-lock",{key:1},()=>[(j(),Ne(Et(Y(WS))))])]),_:3})):me("",!0)]):me("",!0),Ce(v.$slots,"default")]),_:3},8,["position"]))}}),ox={class:"trigger-circle"},ix={class:"node-body"},ax={class:"node-info"},sx={class:"node-title"},ux={key:0,class:"node-subtitle"},lx={__name:"WorkflowNode",props:{id:{type:String,required:!0},data:{type:Object,required:!0},selected:{type:Boolean,default:!1}},setup(e){const t=e,n=le(()=>{switch(t.data.type){case"event":return Ng;case"action":return Kn;case"condition":return c_;case"wait":return dl;default:return Kn}}),r=le(()=>{switch(t.data.type){case"event":return"node-event";case"action":return"node-action";case"condition":return"node-condition";case"wait":return"node-wait";default:return"node-default"}}),o=le(()=>t.data.subtype==="event_trigger"),i=le(()=>{if(t.data.label)return t.data.label;const s=t.data.subtype||t.data.type,u={event_trigger:"Gatilho de Evento",send_message:"Enviar Mensagem",wait_days:"Aguardar",create_appointment:"Criar Agendamento",update_patient:"Atualizar Paciente",check_variable:"Verificar Condio",procedure_completed:"Procedimento Realizado"};return u[s]?u[s]:s.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" ")}),a=le(()=>{const s=t.data.config||{};if(t.data.subtype==="event_trigger"){const u=s.eventType||"No configurado";return{appointment_created:"Agendamento Criado",appointment_updated:"Agendamento Atualizado",appointment_completed:"Agendamento Realizado",appointment_canceled:"Agendamento Cancelado",appointment_confirmed:"Agendamento Confirmado",procedure_completed:"Procedimento Realizado"}[u]||u}return t.data.subtype==="wait_days"?s.days||s.hours||s.minutes?s.days?`Aguardar ${s.days} dia(s)`:s.hours?`Aguardar ${s.hours} hora(s)`:s.minutes?`Aguardar ${s.minutes} minuto(s)`:"Configurar tempo de espera":"Configurar tempo de espera":t.data.subtype==="send_message"?s.templateId?"Modelo selecionado":"Selecionar modelo":t.data.subtype==="create_appointment"?s.procedureId?"Configurado":"Configurar agendamento":t.data.subtype==="update_patient"?s.field?"Configurado":"Configurar atualizao":t.data.subtype==="check_variable"?s.variable?"Configurado":"Configurar condio":t.data.subtype==="procedure_completed"?s.procedure_code?`Procedimento: ${s.procedure_code}`:"Selecionar procedimento":t.data.description||""});return(s,u)=>o.value?(j(),Z("div",{key:0,class:Oe(["trigger-node",{selected:e.selected}])},[ge(Y(mt),{type:"target",position:Y(ie).Top,class:"handle"},null,8,["position"]),z("div",ox,[ge(Y(Ig),{size:28,fill:"white"})]),ge(Y(mt),{type:"source",position:Y(ie).Bottom,class:"handle"},null,8,["position"])],2)):(j(),Z("div",{key:1,class:Oe(["workflow-node",[r.value,{selected:e.selected}]])},[ge(Y(mt),{type:"target",position:Y(ie).Top,class:"handle"},null,8,["position"]),z("div",ix,[z("div",{class:Oe(["node-icon-box",`icon-${e.data.type}`])},[(j(),Ne(Et(n.value),{size:18}))],2),z("div",ax,[z("div",sx,Ie(i.value),1),a.value?(j(),Z("div",ux,Ie(a.value),1)):me("",!0)])]),ge(Y(mt),{type:"source",position:Y(ie).Bottom,class:"handle"},null,8,["position"])],2))}},cx=Tl(lx,[["__scopeId","data-v-306d2d16"]]),dx={class:"form-group"},fx={key:0,class:"form-label"},hx={key:0,class:"required-asterisk"},vx={class:"styled-multi-select"},px={class:"selected-display"},gx=["onClick"],mx={class:"selected-pill"},yx={class:"count-badge"},_x={key:2,class:"placeholder-text"},bx={class:"button-actions"},wx={key:0,class:"search-container"},Ex={class:"options-list"},Sx=["onMousedown"],xx={class:"option-checkbox"},Cx={key:0,class:"no-results"},Nx={__name:"StyledMultiSelect",props:{modelValue:{type:Array,default:()=>[]},label:String,options:{type:Array,required:!0},required:{type:Boolean,default:!1},error:{type:Boolean,default:!1},placeholder:{type:String,default:"Selecione..."},searchable:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,r=t,o=ye(!1),i=ye(""),a=ye(null),s=ye(null),u=ye(null),l=ye({}),c=le(()=>!n.modelValue||n.modelValue.length===0?[]:n.options.filter(y=>n.modelValue.includes(y.value)));le(()=>c.value.length===0?n.placeholder:c.value.length===1?c.value[0].label:`${c.value.length} selecionado(s)`);const d=le(()=>{if(!i.value)return n.options;const y=i.value.toLowerCase();return n.options.filter(v=>v.label.toLowerCase().includes(y))});async function f(){if(!o.value||!a.value)return;await He();const y=a.value.getBoundingClientRect(),p=window.innerHeight-y.bottom,S=300;let q=y.bottom+4;p<S&&y.top>S&&(q=y.top-S-4),l.value={position:"fixed",top:`${q}px`,left:`${y.left}px`,width:`${y.width}px`}}const h=y=>{a.value&&!a.value.contains(y.target)&&s.value&&!s.value.contains(y.target)&&(o.value=!1)};be(o,y=>{y?(f(),window.addEventListener("scroll",f,!0),window.addEventListener("resize",f),He(()=>{document.addEventListener("click",h),n.searchable&&u.value&&u.value.focus()})):(window.removeEventListener("scroll",f,!0),window.removeEventListener("resize",f),document.removeEventListener("click",h),i.value="")}),Eg(()=>{document.removeEventListener("click",h),window.removeEventListener("scroll",f,!0),window.removeEventListener("resize",f)});function b(y){const v=[...n.modelValue||[]],p=v.indexOf(y.value);p>-1?v.splice(p,1):v.push(y.value),r("update:modelValue",v)}function m(y){return(n.modelValue||[]).includes(y.value)}function g(y,v){v.stopPropagation();const p=[...n.modelValue||[]],S=p.indexOf(y);S>-1&&(p.splice(S,1),r("update:modelValue",p))}function _(y){y.stopPropagation(),r("update:modelValue",[])}return(y,v)=>(j(),Z("div",dx,[e.label?(j(),Z("label",fx,[$e(Ie(e.label)+" ",1),e.required?(j(),Z("span",hx,"*")):me("",!0)])):me("",!0),z("div",vx,[z("button",{ref_key:"selectButtonRef",ref:a,type:"button",class:Oe(["select-button",{"has-error":e.error,"has-value":c.value.length>0}]),onClick:v[1]||(v[1]=p=>o.value=!o.value)},[z("div",px,[c.value.length>0&&c.value.length<=2?(j(!0),Z(Te,{key:0},ot(c.value,p=>(j(),Z("span",{key:p.value,class:"selected-pill",onClick:qn(S=>g(p.value,S),["stop"])},[$e(Ie(p.label)+" ",1),ge(Y(Pr),{size:14,class:"remove-icon"})],8,gx))),128)):c.value.length>2?(j(),Z(Te,{key:1},[z("span",mx,[$e(Ie(c.value[0].label)+" ",1),ge(Y(Pr),{size:14,class:"remove-icon",onClick:v[0]||(v[0]=qn(p=>g(c.value[0].value,p),["stop"]))})]),z("span",yx,"+"+Ie(c.value.length-1),1)],64)):(j(),Z("span",_x,Ie(e.placeholder),1))]),z("div",bx,[c.value.length>0?(j(),Ne(Y(Pr),{key:0,size:16,class:"clear-icon",onClick:_})):me("",!0),ge(Y(jy),{size:16,class:Oe(["arrow-icon",{"is-open":o.value}])},null,8,["class"])])],2),(j(),Ne(Xy,{to:"body"},[ge(Ky,{name:"fade"},{default:Me(()=>[o.value?(j(),Z("div",{key:0,ref_key:"optionsListRef",ref:s,class:"options-dropdown",style:Ue(l.value)},[e.searchable?(j(),Z("div",wx,[nt(z("input",{ref_key:"searchInputRef",ref:u,"onUpdate:modelValue":v[2]||(v[2]=p=>i.value=p),type:"text",class:"search-input",placeholder:"Buscar...",onClick:v[3]||(v[3]=qn(()=>{},["stop"]))},null,512),[[en,i.value]])])):me("",!0),z("ul",Ex,[(j(!0),Z(Te,null,ot(d.value,p=>(j(),Z("li",{key:p.value,onMousedown:qn(S=>b(p),["prevent"]),class:Oe(["option-item",{"is-selected":m(p)}])},[z("span",xx,[m(p)?(j(),Ne(Y(Yy),{key:0,size:14})):me("",!0)]),$e(" "+Ie(p.label),1)],42,Sx))),128)),d.value.length===0?(j(),Z("li",Cx," Nenhum resultado encontrado ")):me("",!0)])],4)):me("",!0)]),_:1})]))])]))}},Ix=Tl(Nx,[["__scopeId","data-v-0b3b237e"]]);function zl(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Yr,Wc;function Tx(){if(Wc)return Yr;Wc=1;function e(){this.__data__=[],this.size=0}return Yr=e,Yr}var Kr,Zc;function Yt(){if(Zc)return Kr;Zc=1;function e(t,n){return t===n||t!==t&&n!==n}return Kr=e,Kr}var Xr,Jc;function mr(){if(Jc)return Xr;Jc=1;var e=Yt();function t(n,r){for(var o=n.length;o--;)if(e(n[o][0],r))return o;return-1}return Xr=t,Xr}var Wr,Qc;function qx(){if(Qc)return Wr;Qc=1;var e=mr(),t=Array.prototype,n=t.splice;function r(o){var i=this.__data__,a=e(i,o);if(a<0)return!1;var s=i.length-1;return a==s?i.pop():n.call(i,a,1),--this.size,!0}return Wr=r,Wr}var Zr,ed;function Ax(){if(ed)return Zr;ed=1;var e=mr();function t(n){var r=this.__data__,o=e(r,n);return o<0?void 0:r[o][1]}return Zr=t,Zr}var Jr,td;function kx(){if(td)return Jr;td=1;var e=mr();function t(n){return e(this.__data__,n)>-1}return Jr=t,Jr}var Qr,nd;function Rx(){if(nd)return Qr;nd=1;var e=mr();function t(n,r){var o=this.__data__,i=e(o,n);return i<0?(++this.size,o.push([n,r])):o[i][1]=r,this}return Qr=t,Qr}var eo,rd;function yr(){if(rd)return eo;rd=1;var e=Tx(),t=qx(),n=Ax(),r=kx(),o=Rx();function i(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=o,eo=i,eo}var to,od;function Mx(){if(od)return to;od=1;var e=yr();function t(){this.__data__=new e,this.size=0}return to=t,to}var no,id;function Px(){if(id)return no;id=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return no=e,no}var ro,ad;function Ox(){if(ad)return ro;ad=1;function e(t){return this.__data__.get(t)}return ro=e,ro}var oo,sd;function Dx(){if(sd)return oo;sd=1;function e(t){return this.__data__.has(t)}return oo=e,oo}var io,ud;function Dm(){if(ud)return io;ud=1;var e=typeof An=="object"&&An&&An.Object===Object&&An;return io=e,io}var ao,ld;function Ke(){if(ld)return ao;ld=1;var e=Dm(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return ao=n,ao}var so,cd;function Kt(){if(cd)return so;cd=1;var e=Ke(),t=e.Symbol;return so=t,so}var uo,dd;function $x(){if(dd)return uo;dd=1;var e=Kt(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,o=e?e.toStringTag:void 0;function i(a){var s=n.call(a,o),u=a[o];try{a[o]=void 0;var l=!0}catch{}var c=r.call(a);return l&&(s?a[o]=u:delete a[o]),c}return uo=i,uo}var lo,fd;function Bx(){if(fd)return lo;fd=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return lo=n,lo}var co,hd;function kt(){if(hd)return co;hd=1;var e=Kt(),t=$x(),n=Bx(),r="[object Null]",o="[object Undefined]",i=e?e.toStringTag:void 0;function a(s){return s==null?s===void 0?o:r:i&&i in Object(s)?t(s):n(s)}return co=a,co}var fo,vd;function ze(){if(vd)return fo;vd=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return fo=e,fo}var ho,pd;function Sn(){if(pd)return ho;pd=1;var e=kt(),t=ze(),n="[object AsyncFunction]",r="[object Function]",o="[object GeneratorFunction]",i="[object Proxy]";function a(s){if(!t(s))return!1;var u=e(s);return u==r||u==o||u==n||u==i}return ho=a,ho}var vo,gd;function Lx(){if(gd)return vo;gd=1;var e=Ke(),t=e["__core-js_shared__"];return vo=t,vo}var po,md;function zx(){if(md)return po;md=1;var e=Lx(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return po=n,po}var go,yd;function $m(){if(yd)return go;yd=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return go=n,go}var mo,_d;function Vx(){if(_d)return mo;_d=1;var e=Sn(),t=zx(),n=ze(),r=$m(),o=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var h=e(f)?c:i;return h.test(r(f))}return mo=d,mo}var yo,bd;function Fx(){if(bd)return yo;bd=1;function e(t,n){return t?.[n]}return yo=e,yo}var _o,wd;function Rt(){if(wd)return _o;wd=1;var e=Vx(),t=Fx();function n(r,o){var i=t(r,o);return e(i)?i:void 0}return _o=n,_o}var bo,Ed;function Vl(){if(Ed)return bo;Ed=1;var e=Rt(),t=Ke(),n=e(t,"Map");return bo=n,bo}var wo,Sd;function _r(){if(Sd)return wo;Sd=1;var e=Rt(),t=e(Object,"create");return wo=t,wo}var Eo,xd;function Gx(){if(xd)return Eo;xd=1;var e=_r();function t(){this.__data__=e?e(null):{},this.size=0}return Eo=t,Eo}var So,Cd;function Hx(){if(Cd)return So;Cd=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return So=e,So}var xo,Nd;function Ux(){if(Nd)return xo;Nd=1;var e=_r(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function o(i){var a=this.__data__;if(e){var s=a[i];return s===t?void 0:s}return r.call(a,i)?a[i]:void 0}return xo=o,xo}var Co,Id;function jx(){if(Id)return Co;Id=1;var e=_r(),t=Object.prototype,n=t.hasOwnProperty;function r(o){var i=this.__data__;return e?i[o]!==void 0:n.call(i,o)}return Co=r,Co}var No,Td;function Yx(){if(Td)return No;Td=1;var e=_r(),t="__lodash_hash_undefined__";function n(r,o){var i=this.__data__;return this.size+=this.has(r)?0:1,i[r]=e&&o===void 0?t:o,this}return No=n,No}var Io,qd;function Kx(){if(qd)return Io;qd=1;var e=Gx(),t=Hx(),n=Ux(),r=jx(),o=Yx();function i(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=o,Io=i,Io}var To,Ad;function Xx(){if(Ad)return To;Ad=1;var e=Kx(),t=yr(),n=Vl();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return To=r,To}var qo,kd;function Wx(){if(kd)return qo;kd=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return qo=e,qo}var Ao,Rd;function br(){if(Rd)return Ao;Rd=1;var e=Wx();function t(n,r){var o=n.__data__;return e(r)?o[typeof r=="string"?"string":"hash"]:o.map}return Ao=t,Ao}var ko,Md;function Zx(){if(Md)return ko;Md=1;var e=br();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return ko=t,ko}var Ro,Pd;function Jx(){if(Pd)return Ro;Pd=1;var e=br();function t(n){return e(this,n).get(n)}return Ro=t,Ro}var Mo,Od;function Qx(){if(Od)return Mo;Od=1;var e=br();function t(n){return e(this,n).has(n)}return Mo=t,Mo}var Po,Dd;function eC(){if(Dd)return Po;Dd=1;var e=br();function t(n,r){var o=e(this,n),i=o.size;return o.set(n,r),this.size+=o.size==i?0:1,this}return Po=t,Po}var Oo,$d;function Fl(){if($d)return Oo;$d=1;var e=Xx(),t=Zx(),n=Jx(),r=Qx(),o=eC();function i(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=o,Oo=i,Oo}var Do,Bd;function tC(){if(Bd)return Do;Bd=1;var e=yr(),t=Vl(),n=Fl(),r=200;function o(i,a){var s=this.__data__;if(s instanceof e){var u=s.__data__;if(!t||u.length<r-1)return u.push([i,a]),this.size=++s.size,this;s=this.__data__=new n(u)}return s.set(i,a),this.size=s.size,this}return Do=o,Do}var $o,Ld;function wr(){if(Ld)return $o;Ld=1;var e=yr(),t=Mx(),n=Px(),r=Ox(),o=Dx(),i=tC();function a(s){var u=this.__data__=new e(s);this.size=u.size}return a.prototype.clear=t,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=o,a.prototype.set=i,$o=a,$o}var Bo,zd;function Gl(){if(zd)return Bo;zd=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o&&n(t[r],r,t)!==!1;);return t}return Bo=e,Bo}var Lo,Vd;function Bm(){if(Vd)return Lo;Vd=1;var e=Rt(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Lo=t,Lo}var zo,Fd;function Er(){if(Fd)return zo;Fd=1;var e=Bm();function t(n,r,o){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[r]=o}return zo=t,zo}var Vo,Gd;function Sr(){if(Gd)return Vo;Gd=1;var e=Er(),t=Yt(),n=Object.prototype,r=n.hasOwnProperty;function o(i,a,s){var u=i[a];(!(r.call(i,a)&&t(u,s))||s===void 0&&!(a in i))&&e(i,a,s)}return Vo=o,Vo}var Fo,Hd;function xn(){if(Hd)return Fo;Hd=1;var e=Sr(),t=Er();function n(r,o,i,a){var s=!i;i||(i={});for(var u=-1,l=o.length;++u<l;){var c=o[u],d=a?a(i[c],r[c],c,i,r):void 0;d===void 0&&(d=r[c]),s?t(i,c,d):e(i,c,d)}return i}return Fo=n,Fo}var Go,Ud;function nC(){if(Ud)return Go;Ud=1;function e(t,n){for(var r=-1,o=Array(t);++r<t;)o[r]=n(r);return o}return Go=e,Go}var Ho,jd;function et(){if(jd)return Ho;jd=1;function e(t){return t!=null&&typeof t=="object"}return Ho=e,Ho}var Uo,Yd;function rC(){if(Yd)return Uo;Yd=1;var e=kt(),t=et(),n="[object Arguments]";function r(o){return t(o)&&e(o)==n}return Uo=r,Uo}var jo,Kd;function Cn(){if(Kd)return jo;Kd=1;var e=rC(),t=et(),n=Object.prototype,r=n.hasOwnProperty,o=n.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(a){return t(a)&&r.call(a,"callee")&&!o.call(a,"callee")};return jo=i,jo}var Yo,Xd;function ke(){if(Xd)return Yo;Xd=1;var e=Array.isArray;return Yo=e,Yo}var on={exports:{}},Ko,Wd;function oC(){if(Wd)return Ko;Wd=1;function e(){return!1}return Ko=e,Ko}on.exports;var Zd;function Xt(){return Zd||(Zd=1,(function(e,t){var n=Ke(),r=oC(),o=t&&!t.nodeType&&t,i=o&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===o,s=a?n.Buffer:void 0,u=s?s.isBuffer:void 0,l=u||r;e.exports=l})(on,on.exports)),on.exports}var Xo,Jd;function xr(){if(Jd)return Xo;Jd=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,o){var i=typeof r;return o=o??e,!!o&&(i=="number"||i!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<o}return Xo=n,Xo}var Wo,Qd;function Hl(){if(Qd)return Wo;Qd=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Wo=t,Wo}var Zo,ef;function iC(){if(ef)return Zo;ef=1;var e=kt(),t=Hl(),n=et(),r="[object Arguments]",o="[object Array]",i="[object Boolean]",a="[object Date]",s="[object Error]",u="[object Function]",l="[object Map]",c="[object Number]",d="[object Object]",f="[object RegExp]",h="[object Set]",b="[object String]",m="[object WeakMap]",g="[object ArrayBuffer]",_="[object DataView]",y="[object Float32Array]",v="[object Float64Array]",p="[object Int8Array]",S="[object Int16Array]",q="[object Int32Array]",A="[object Uint8Array]",O="[object Uint8ClampedArray]",B="[object Uint16Array]",$="[object Uint32Array]",P={};P[y]=P[v]=P[p]=P[S]=P[q]=P[A]=P[O]=P[B]=P[$]=!0,P[r]=P[o]=P[g]=P[i]=P[_]=P[a]=P[s]=P[u]=P[l]=P[c]=P[d]=P[f]=P[h]=P[b]=P[m]=!1;function N(F){return n(F)&&t(F.length)&&!!P[e(F)]}return Zo=N,Zo}var Jo,tf;function Cr(){if(tf)return Jo;tf=1;function e(t){return function(n){return t(n)}}return Jo=e,Jo}var an={exports:{}};an.exports;var nf;function Ul(){return nf||(nf=1,(function(e,t){var n=Dm(),r=t&&!t.nodeType&&t,o=r&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===r,a=i&&n.process,s=(function(){try{var u=o&&o.require&&o.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}})();e.exports=s})(an,an.exports)),an.exports}var Qo,rf;function Nn(){if(rf)return Qo;rf=1;var e=iC(),t=Cr(),n=Ul(),r=n&&n.isTypedArray,o=r?t(r):e;return Qo=o,Qo}var ei,of;function Lm(){if(of)return ei;of=1;var e=nC(),t=Cn(),n=ke(),r=Xt(),o=xr(),i=Nn(),a=Object.prototype,s=a.hasOwnProperty;function u(l,c){var d=n(l),f=!d&&t(l),h=!d&&!f&&r(l),b=!d&&!f&&!h&&i(l),m=d||f||h||b,g=m?e(l.length,String):[],_=g.length;for(var y in l)(c||s.call(l,y))&&!(m&&(y=="length"||h&&(y=="offset"||y=="parent")||b&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||o(y,_)))&&g.push(y);return g}return ei=u,ei}var ti,af;function Nr(){if(af)return ti;af=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,o=typeof r=="function"&&r.prototype||e;return n===o}return ti=t,ti}var ni,sf;function zm(){if(sf)return ni;sf=1;function e(t,n){return function(r){return t(n(r))}}return ni=e,ni}var ri,uf;function aC(){if(uf)return ri;uf=1;var e=zm(),t=e(Object.keys,Object);return ri=t,ri}var oi,lf;function jl(){if(lf)return oi;lf=1;var e=Nr(),t=aC(),n=Object.prototype,r=n.hasOwnProperty;function o(i){if(!e(i))return t(i);var a=[];for(var s in Object(i))r.call(i,s)&&s!="constructor"&&a.push(s);return a}return oi=o,oi}var ii,cf;function lt(){if(cf)return ii;cf=1;var e=Sn(),t=Hl();function n(r){return r!=null&&t(r.length)&&!e(r)}return ii=n,ii}var ai,df;function bt(){if(df)return ai;df=1;var e=Lm(),t=jl(),n=lt();function r(o){return n(o)?e(o):t(o)}return ai=r,ai}var si,ff;function sC(){if(ff)return si;ff=1;var e=xn(),t=bt();function n(r,o){return r&&e(o,t(o),r)}return si=n,si}var ui,hf;function uC(){if(hf)return ui;hf=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return ui=e,ui}var li,vf;function lC(){if(vf)return li;vf=1;var e=ze(),t=Nr(),n=uC(),r=Object.prototype,o=r.hasOwnProperty;function i(a){if(!e(a))return n(a);var s=t(a),u=[];for(var l in a)l=="constructor"&&(s||!o.call(a,l))||u.push(l);return u}return li=i,li}var ci,pf;function Mt(){if(pf)return ci;pf=1;var e=Lm(),t=lC(),n=lt();function r(o){return n(o)?e(o,!0):t(o)}return ci=r,ci}var di,gf;function cC(){if(gf)return di;gf=1;var e=xn(),t=Mt();function n(r,o){return r&&e(o,t(o),r)}return di=n,di}var sn={exports:{}};sn.exports;var mf;function Vm(){return mf||(mf=1,(function(e,t){var n=Ke(),r=t&&!t.nodeType&&t,o=r&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===r,a=i?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;function u(l,c){if(c)return l.slice();var d=l.length,f=s?s(d):new l.constructor(d);return l.copy(f),f}e.exports=u})(sn,sn.exports)),sn.exports}var fi,yf;function Fm(){if(yf)return fi;yf=1;function e(t,n){var r=-1,o=t.length;for(n||(n=Array(o));++r<o;)n[r]=t[r];return n}return fi=e,fi}var hi,_f;function Gm(){if(_f)return hi;_f=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,i=0,a=[];++r<o;){var s=t[r];n(s,r,t)&&(a[i++]=s)}return a}return hi=e,hi}var vi,bf;function Hm(){if(bf)return vi;bf=1;function e(){return[]}return vi=e,vi}var pi,wf;function Yl(){if(wf)return pi;wf=1;var e=Gm(),t=Hm(),n=Object.prototype,r=n.propertyIsEnumerable,o=Object.getOwnPropertySymbols,i=o?function(a){return a==null?[]:(a=Object(a),e(o(a),function(s){return r.call(a,s)}))}:t;return pi=i,pi}var gi,Ef;function dC(){if(Ef)return gi;Ef=1;var e=xn(),t=Yl();function n(r,o){return e(r,t(r),o)}return gi=n,gi}var mi,Sf;function Kl(){if(Sf)return mi;Sf=1;function e(t,n){for(var r=-1,o=n.length,i=t.length;++r<o;)t[i+r]=n[r];return t}return mi=e,mi}var yi,xf;function Ir(){if(xf)return yi;xf=1;var e=zm(),t=e(Object.getPrototypeOf,Object);return yi=t,yi}var _i,Cf;function Um(){if(Cf)return _i;Cf=1;var e=Kl(),t=Ir(),n=Yl(),r=Hm(),o=Object.getOwnPropertySymbols,i=o?function(a){for(var s=[];a;)e(s,n(a)),a=t(a);return s}:r;return _i=i,_i}var bi,Nf;function fC(){if(Nf)return bi;Nf=1;var e=xn(),t=Um();function n(r,o){return e(r,t(r),o)}return bi=n,bi}var wi,If;function jm(){if(If)return wi;If=1;var e=Kl(),t=ke();function n(r,o,i){var a=o(r);return t(r)?a:e(a,i(r))}return wi=n,wi}var Ei,Tf;function Ym(){if(Tf)return Ei;Tf=1;var e=jm(),t=Yl(),n=bt();function r(o){return e(o,n,t)}return Ei=r,Ei}var Si,qf;function hC(){if(qf)return Si;qf=1;var e=jm(),t=Um(),n=Mt();function r(o){return e(o,n,t)}return Si=r,Si}var xi,Af;function vC(){if(Af)return xi;Af=1;var e=Rt(),t=Ke(),n=e(t,"DataView");return xi=n,xi}var Ci,kf;function pC(){if(kf)return Ci;kf=1;var e=Rt(),t=Ke(),n=e(t,"Promise");return Ci=n,Ci}var Ni,Rf;function Km(){if(Rf)return Ni;Rf=1;var e=Rt(),t=Ke(),n=e(t,"Set");return Ni=n,Ni}var Ii,Mf;function gC(){if(Mf)return Ii;Mf=1;var e=Rt(),t=Ke(),n=e(t,"WeakMap");return Ii=n,Ii}var Ti,Pf;function Wt(){if(Pf)return Ti;Pf=1;var e=vC(),t=Vl(),n=pC(),r=Km(),o=gC(),i=kt(),a=$m(),s="[object Map]",u="[object Object]",l="[object Promise]",c="[object Set]",d="[object WeakMap]",f="[object DataView]",h=a(e),b=a(t),m=a(n),g=a(r),_=a(o),y=i;return(e&&y(new e(new ArrayBuffer(1)))!=f||t&&y(new t)!=s||n&&y(n.resolve())!=l||r&&y(new r)!=c||o&&y(new o)!=d)&&(y=function(v){var p=i(v),S=p==u?v.constructor:void 0,q=S?a(S):"";if(q)switch(q){case h:return f;case b:return s;case m:return l;case g:return c;case _:return d}return p}),Ti=y,Ti}var qi,Of;function mC(){if(Of)return qi;Of=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var o=r.length,i=new r.constructor(o);return o&&typeof r[0]=="string"&&t.call(r,"index")&&(i.index=r.index,i.input=r.input),i}return qi=n,qi}var Ai,Df;function Xm(){if(Df)return Ai;Df=1;var e=Ke(),t=e.Uint8Array;return Ai=t,Ai}var ki,$f;function Xl(){if($f)return ki;$f=1;var e=Xm();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return ki=t,ki}var Ri,Bf;function yC(){if(Bf)return Ri;Bf=1;var e=Xl();function t(n,r){var o=r?e(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.byteLength)}return Ri=t,Ri}var Mi,Lf;function _C(){if(Lf)return Mi;Lf=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Mi=t,Mi}var Pi,zf;function bC(){if(zf)return Pi;zf=1;var e=Kt(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(o){return n?Object(n.call(o)):{}}return Pi=r,Pi}var Oi,Vf;function Wm(){if(Vf)return Oi;Vf=1;var e=Xl();function t(n,r){var o=r?e(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.length)}return Oi=t,Oi}var Di,Ff;function wC(){if(Ff)return Di;Ff=1;var e=Xl(),t=yC(),n=_C(),r=bC(),o=Wm(),i="[object Boolean]",a="[object Date]",s="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",d="[object String]",f="[object Symbol]",h="[object ArrayBuffer]",b="[object DataView]",m="[object Float32Array]",g="[object Float64Array]",_="[object Int8Array]",y="[object Int16Array]",v="[object Int32Array]",p="[object Uint8Array]",S="[object Uint8ClampedArray]",q="[object Uint16Array]",A="[object Uint32Array]";function O(B,$,P){var N=B.constructor;switch($){case h:return e(B);case i:case a:return new N(+B);case b:return t(B,P);case m:case g:case _:case y:case v:case p:case S:case q:case A:return o(B,P);case s:return new N;case u:case d:return new N(B);case l:return n(B);case c:return new N;case f:return r(B)}}return Di=O,Di}var $i,Gf;function Zm(){if(Gf)return $i;Gf=1;var e=ze(),t=Object.create,n=(function(){function r(){}return function(o){if(!e(o))return{};if(t)return t(o);r.prototype=o;var i=new r;return r.prototype=void 0,i}})();return $i=n,$i}var Bi,Hf;function Jm(){if(Hf)return Bi;Hf=1;var e=Zm(),t=Ir(),n=Nr();function r(o){return typeof o.constructor=="function"&&!n(o)?e(t(o)):{}}return Bi=r,Bi}var Li,Uf;function EC(){if(Uf)return Li;Uf=1;var e=Wt(),t=et(),n="[object Map]";function r(o){return t(o)&&e(o)==n}return Li=r,Li}var zi,jf;function SC(){if(jf)return zi;jf=1;var e=EC(),t=Cr(),n=Ul(),r=n&&n.isMap,o=r?t(r):e;return zi=o,zi}var Vi,Yf;function xC(){if(Yf)return Vi;Yf=1;var e=Wt(),t=et(),n="[object Set]";function r(o){return t(o)&&e(o)==n}return Vi=r,Vi}var Fi,Kf;function CC(){if(Kf)return Fi;Kf=1;var e=xC(),t=Cr(),n=Ul(),r=n&&n.isSet,o=r?t(r):e;return Fi=o,Fi}var Gi,Xf;function Qm(){if(Xf)return Gi;Xf=1;var e=wr(),t=Gl(),n=Sr(),r=sC(),o=cC(),i=Vm(),a=Fm(),s=dC(),u=fC(),l=Ym(),c=hC(),d=Wt(),f=mC(),h=wC(),b=Jm(),m=ke(),g=Xt(),_=SC(),y=ze(),v=CC(),p=bt(),S=Mt(),q=1,A=2,O=4,B="[object Arguments]",$="[object Array]",P="[object Boolean]",N="[object Date]",F="[object Error]",I="[object Function]",L="[object GeneratorFunction]",M="[object Map]",U="[object Number]",K="[object Object]",W="[object RegExp]",X="[object Set]",ne="[object String]",ae="[object Symbol]",de="[object WeakMap]",R="[object ArrayBuffer]",D="[object DataView]",T="[object Float32Array]",C="[object Float64Array]",V="[object Int8Array]",H="[object Int16Array]",re="[object Int32Array]",fe="[object Uint8Array]",ce="[object Uint8ClampedArray]",se="[object Uint16Array]",x="[object Uint32Array]",w={};w[B]=w[$]=w[R]=w[D]=w[P]=w[N]=w[T]=w[C]=w[V]=w[H]=w[re]=w[M]=w[U]=w[K]=w[W]=w[X]=w[ne]=w[ae]=w[fe]=w[ce]=w[se]=w[x]=!0,w[F]=w[I]=w[de]=!1;function k(E,G,J,oe,ee,te){var ue,he=G&q,pe=G&A,Le=G&O;if(J&&(ue=ee?J(E,oe,ee,te):J(E)),ue!==void 0)return ue;if(!y(E))return E;var dt=m(E);if(dt){if(ue=f(E),!he)return a(E,ue)}else{var ft=d(E),Tn=ft==I||ft==L;if(g(E))return i(E,he);if(ft==K||ft==B||Tn&&!ee){if(ue=pe||Tn?{}:b(E),!he)return pe?u(E,o(ue,E)):s(E,r(ue,E))}else{if(!w[ft])return ee?E:{};ue=h(E,ft,he)}}te||(te=new e);var oc=te.get(E);if(oc)return oc;te.set(E,ue),v(E)?E.forEach(function(ht){ue.add(k(ht,G,J,ht,E,te))}):_(E)&&E.forEach(function(ht,wt){ue.set(wt,k(ht,G,J,wt,E,te))});var Oy=Le?pe?c:l:pe?S:p,ic=dt?void 0:Oy(E);return t(ic||E,function(ht,wt){ic&&(wt=ht,ht=E[wt]),n(ue,wt,k(ht,G,J,wt,E,te))}),ue}return Gi=k,Gi}var Hi,Wf;function NC(){if(Wf)return Hi;Wf=1;var e=Qm(),t=4;function n(r){return e(r,t)}return Hi=n,Hi}var Ui,Zf;function Wl(){if(Zf)return Ui;Zf=1;function e(t){return function(){return t}}return Ui=e,Ui}var ji,Jf;function IC(){if(Jf)return ji;Jf=1;function e(t){return function(n,r,o){for(var i=-1,a=Object(n),s=o(n),u=s.length;u--;){var l=s[t?u:++i];if(r(a[l],l,a)===!1)break}return n}}return ji=e,ji}var Yi,Qf;function Zl(){if(Qf)return Yi;Qf=1;var e=IC(),t=e();return Yi=t,Yi}var Ki,eh;function Jl(){if(eh)return Ki;eh=1;var e=Zl(),t=bt();function n(r,o){return r&&e(r,o,t)}return Ki=n,Ki}var Xi,th;function TC(){if(th)return Xi;th=1;var e=lt();function t(n,r){return function(o,i){if(o==null)return o;if(!e(o))return n(o,i);for(var a=o.length,s=r?a:-1,u=Object(o);(r?s--:++s<a)&&i(u[s],s,u)!==!1;);return o}}return Xi=t,Xi}var Wi,nh;function Tr(){if(nh)return Wi;nh=1;var e=Jl(),t=TC(),n=t(e);return Wi=n,Wi}var Zi,rh;function Pt(){if(rh)return Zi;rh=1;function e(t){return t}return Zi=e,Zi}var Ji,oh;function ey(){if(oh)return Ji;oh=1;var e=Pt();function t(n){return typeof n=="function"?n:e}return Ji=t,Ji}var Qi,ih;function ty(){if(ih)return Qi;ih=1;var e=Gl(),t=Tr(),n=ey(),r=ke();function o(i,a){var s=r(i)?e:t;return s(i,n(a))}return Qi=o,Qi}var ea,ah;function ny(){return ah||(ah=1,ea=ty()),ea}var ta,sh;function qC(){if(sh)return ta;sh=1;var e=Tr();function t(n,r){var o=[];return e(n,function(i,a,s){r(i,a,s)&&o.push(i)}),o}return ta=t,ta}var na,uh;function AC(){if(uh)return na;uh=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return na=t,na}var ra,lh;function kC(){if(lh)return ra;lh=1;function e(t){return this.__data__.has(t)}return ra=e,ra}var oa,ch;function ry(){if(ch)return oa;ch=1;var e=Fl(),t=AC(),n=kC();function r(o){var i=-1,a=o==null?0:o.length;for(this.__data__=new e;++i<a;)this.add(o[i])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,oa=r,oa}var ia,dh;function RC(){if(dh)return ia;dh=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(n(t[r],r,t))return!0;return!1}return ia=e,ia}var aa,fh;function oy(){if(fh)return aa;fh=1;function e(t,n){return t.has(n)}return aa=e,aa}var sa,hh;function iy(){if(hh)return sa;hh=1;var e=ry(),t=RC(),n=oy(),r=1,o=2;function i(a,s,u,l,c,d){var f=u&r,h=a.length,b=s.length;if(h!=b&&!(f&&b>h))return!1;var m=d.get(a),g=d.get(s);if(m&&g)return m==s&&g==a;var _=-1,y=!0,v=u&o?new e:void 0;for(d.set(a,s),d.set(s,a);++_<h;){var p=a[_],S=s[_];if(l)var q=f?l(S,p,_,s,a,d):l(p,S,_,a,s,d);if(q!==void 0){if(q)continue;y=!1;break}if(v){if(!t(s,function(A,O){if(!n(v,O)&&(p===A||c(p,A,u,l,d)))return v.push(O)})){y=!1;break}}else if(!(p===S||c(p,S,u,l,d))){y=!1;break}}return d.delete(a),d.delete(s),y}return sa=i,sa}var ua,vh;function MC(){if(vh)return ua;vh=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o,i){r[++n]=[i,o]}),r}return ua=e,ua}var la,ph;function Ql(){if(ph)return la;ph=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o){r[++n]=o}),r}return la=e,la}var ca,gh;function PC(){if(gh)return ca;gh=1;var e=Kt(),t=Xm(),n=Yt(),r=iy(),o=MC(),i=Ql(),a=1,s=2,u="[object Boolean]",l="[object Date]",c="[object Error]",d="[object Map]",f="[object Number]",h="[object RegExp]",b="[object Set]",m="[object String]",g="[object Symbol]",_="[object ArrayBuffer]",y="[object DataView]",v=e?e.prototype:void 0,p=v?v.valueOf:void 0;function S(q,A,O,B,$,P,N){switch(O){case y:if(q.byteLength!=A.byteLength||q.byteOffset!=A.byteOffset)return!1;q=q.buffer,A=A.buffer;case _:return!(q.byteLength!=A.byteLength||!P(new t(q),new t(A)));case u:case l:case f:return n(+q,+A);case c:return q.name==A.name&&q.message==A.message;case h:case m:return q==A+"";case d:var F=o;case b:var I=B&a;if(F||(F=i),q.size!=A.size&&!I)return!1;var L=N.get(q);if(L)return L==A;B|=s,N.set(q,A);var M=r(F(q),F(A),B,$,P,N);return N.delete(q),M;case g:if(p)return p.call(q)==p.call(A)}return!1}return ca=S,ca}var da,mh;function OC(){if(mh)return da;mh=1;var e=Ym(),t=1,n=Object.prototype,r=n.hasOwnProperty;function o(i,a,s,u,l,c){var d=s&t,f=e(i),h=f.length,b=e(a),m=b.length;if(h!=m&&!d)return!1;for(var g=h;g--;){var _=f[g];if(!(d?_ in a:r.call(a,_)))return!1}var y=c.get(i),v=c.get(a);if(y&&v)return y==a&&v==i;var p=!0;c.set(i,a),c.set(a,i);for(var S=d;++g<h;){_=f[g];var q=i[_],A=a[_];if(u)var O=d?u(A,q,_,a,i,c):u(q,A,_,i,a,c);if(!(O===void 0?q===A||l(q,A,s,u,c):O)){p=!1;break}S||(S=_=="constructor")}if(p&&!S){var B=i.constructor,$=a.constructor;B!=$&&"constructor"in i&&"constructor"in a&&!(typeof B=="function"&&B instanceof B&&typeof $=="function"&&$ instanceof $)&&(p=!1)}return c.delete(i),c.delete(a),p}return da=o,da}var fa,yh;function DC(){if(yh)return fa;yh=1;var e=wr(),t=iy(),n=PC(),r=OC(),o=Wt(),i=ke(),a=Xt(),s=Nn(),u=1,l="[object Arguments]",c="[object Array]",d="[object Object]",f=Object.prototype,h=f.hasOwnProperty;function b(m,g,_,y,v,p){var S=i(m),q=i(g),A=S?c:o(m),O=q?c:o(g);A=A==l?d:A,O=O==l?d:O;var B=A==d,$=O==d,P=A==O;if(P&&a(m)){if(!a(g))return!1;S=!0,B=!1}if(P&&!B)return p||(p=new e),S||s(m)?t(m,g,_,y,v,p):n(m,g,A,_,y,v,p);if(!(_&u)){var N=B&&h.call(m,"__wrapped__"),F=$&&h.call(g,"__wrapped__");if(N||F){var I=N?m.value():m,L=F?g.value():g;return p||(p=new e),v(I,L,_,y,p)}}return P?(p||(p=new e),r(m,g,_,y,v,p)):!1}return fa=b,fa}var ha,_h;function ay(){if(_h)return ha;_h=1;var e=DC(),t=et();function n(r,o,i,a,s){return r===o?!0:r==null||o==null||!t(r)&&!t(o)?r!==r&&o!==o:e(r,o,i,a,n,s)}return ha=n,ha}var va,bh;function $C(){if(bh)return va;bh=1;var e=wr(),t=ay(),n=1,r=2;function o(i,a,s,u){var l=s.length,c=l,d=!u;if(i==null)return!c;for(i=Object(i);l--;){var f=s[l];if(d&&f[2]?f[1]!==i[f[0]]:!(f[0]in i))return!1}for(;++l<c;){f=s[l];var h=f[0],b=i[h],m=f[1];if(d&&f[2]){if(b===void 0&&!(h in i))return!1}else{var g=new e;if(u)var _=u(b,m,h,i,a,g);if(!(_===void 0?t(m,b,n|r,u,g):_))return!1}}return!0}return va=o,va}var pa,wh;function sy(){if(wh)return pa;wh=1;var e=ze();function t(n){return n===n&&!e(n)}return pa=t,pa}var ga,Eh;function BC(){if(Eh)return ga;Eh=1;var e=sy(),t=bt();function n(r){for(var o=t(r),i=o.length;i--;){var a=o[i],s=r[a];o[i]=[a,s,e(s)]}return o}return ga=n,ga}var ma,Sh;function uy(){if(Sh)return ma;Sh=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return ma=e,ma}var ya,xh;function LC(){if(xh)return ya;xh=1;var e=$C(),t=BC(),n=uy();function r(o){var i=t(o);return i.length==1&&i[0][2]?n(i[0][0],i[0][1]):function(a){return a===o||e(a,o,i)}}return ya=r,ya}var _a,Ch;function Zt(){if(Ch)return _a;Ch=1;var e=kt(),t=et(),n="[object Symbol]";function r(o){return typeof o=="symbol"||t(o)&&e(o)==n}return _a=r,_a}var ba,Nh;function ec(){if(Nh)return ba;Nh=1;var e=ke(),t=Zt(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function o(i,a){if(e(i))return!1;var s=typeof i;return s=="number"||s=="symbol"||s=="boolean"||i==null||t(i)?!0:r.test(i)||!n.test(i)||a!=null&&i in Object(a)}return ba=o,ba}var wa,Ih;function zC(){if(Ih)return wa;Ih=1;var e=Fl(),t="Expected a function";function n(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new TypeError(t);var i=function(){var a=arguments,s=o?o.apply(this,a):a[0],u=i.cache;if(u.has(s))return u.get(s);var l=r.apply(this,a);return i.cache=u.set(s,l)||u,l};return i.cache=new(n.Cache||e),i}return n.Cache=e,wa=n,wa}var Ea,Th;function VC(){if(Th)return Ea;Th=1;var e=zC(),t=500;function n(r){var o=e(r,function(a){return i.size===t&&i.clear(),a}),i=o.cache;return o}return Ea=n,Ea}var Sa,qh;function FC(){if(qh)return Sa;qh=1;var e=VC(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(o){var i=[];return o.charCodeAt(0)===46&&i.push(""),o.replace(t,function(a,s,u,l){i.push(u?l.replace(n,"$1"):s||a)}),i});return Sa=r,Sa}var xa,Ah;function qr(){if(Ah)return xa;Ah=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,i=Array(o);++r<o;)i[r]=n(t[r],r,t);return i}return xa=e,xa}var Ca,kh;function GC(){if(kh)return Ca;kh=1;var e=Kt(),t=qr(),n=ke(),r=Zt(),o=e?e.prototype:void 0,i=o?o.toString:void 0;function a(s){if(typeof s=="string")return s;if(n(s))return t(s,a)+"";if(r(s))return i?i.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return Ca=a,Ca}var Na,Rh;function ly(){if(Rh)return Na;Rh=1;var e=GC();function t(n){return n==null?"":e(n)}return Na=t,Na}var Ia,Mh;function Ar(){if(Mh)return Ia;Mh=1;var e=ke(),t=ec(),n=FC(),r=ly();function o(i,a){return e(i)?i:t(i,a)?[i]:n(r(i))}return Ia=o,Ia}var Ta,Ph;function In(){if(Ph)return Ta;Ph=1;var e=Zt();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Ta=t,Ta}var qa,Oh;function kr(){if(Oh)return qa;Oh=1;var e=Ar(),t=In();function n(r,o){o=e(o,r);for(var i=0,a=o.length;r!=null&&i<a;)r=r[t(o[i++])];return i&&i==a?r:void 0}return qa=n,qa}var Aa,Dh;function HC(){if(Dh)return Aa;Dh=1;var e=kr();function t(n,r,o){var i=n==null?void 0:e(n,r);return i===void 0?o:i}return Aa=t,Aa}var ka,$h;function UC(){if($h)return ka;$h=1;function e(t,n){return t!=null&&n in Object(t)}return ka=e,ka}var Ra,Bh;function cy(){if(Bh)return Ra;Bh=1;var e=Ar(),t=Cn(),n=ke(),r=xr(),o=Hl(),i=In();function a(s,u,l){u=e(u,s);for(var c=-1,d=u.length,f=!1;++c<d;){var h=i(u[c]);if(!(f=s!=null&&l(s,h)))break;s=s[h]}return f||++c!=d?f:(d=s==null?0:s.length,!!d&&o(d)&&r(h,d)&&(n(s)||t(s)))}return Ra=a,Ra}var Ma,Lh;function dy(){if(Lh)return Ma;Lh=1;var e=UC(),t=cy();function n(r,o){return r!=null&&t(r,o,e)}return Ma=n,Ma}var Pa,zh;function jC(){if(zh)return Pa;zh=1;var e=ay(),t=HC(),n=dy(),r=ec(),o=sy(),i=uy(),a=In(),s=1,u=2;function l(c,d){return r(c)&&o(d)?i(a(c),d):function(f){var h=t(f,c);return h===void 0&&h===d?n(f,c):e(d,h,s|u)}}return Pa=l,Pa}var Oa,Vh;function fy(){if(Vh)return Oa;Vh=1;function e(t){return function(n){return n?.[t]}}return Oa=e,Oa}var Da,Fh;function YC(){if(Fh)return Da;Fh=1;var e=kr();function t(n){return function(r){return e(r,n)}}return Da=t,Da}var $a,Gh;function KC(){if(Gh)return $a;Gh=1;var e=fy(),t=YC(),n=ec(),r=In();function o(i){return n(i)?e(r(i)):t(i)}return $a=o,$a}var Ba,Hh;function ct(){if(Hh)return Ba;Hh=1;var e=LC(),t=jC(),n=Pt(),r=ke(),o=KC();function i(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?t(a[0],a[1]):e(a):o(a)}return Ba=i,Ba}var La,Uh;function hy(){if(Uh)return La;Uh=1;var e=Gm(),t=qC(),n=ct(),r=ke();function o(i,a){var s=r(i)?e:t;return s(i,n(a,3))}return La=o,La}var za,jh;function XC(){if(jh)return za;jh=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,o){return r!=null&&t.call(r,o)}return za=n,za}var Va,Yh;function vy(){if(Yh)return Va;Yh=1;var e=XC(),t=cy();function n(r,o){return r!=null&&t(r,o,e)}return Va=n,Va}var Fa,Kh;function WC(){if(Kh)return Fa;Kh=1;var e=jl(),t=Wt(),n=Cn(),r=ke(),o=lt(),i=Xt(),a=Nr(),s=Nn(),u="[object Map]",l="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function f(h){if(h==null)return!0;if(o(h)&&(r(h)||typeof h=="string"||typeof h.splice=="function"||i(h)||s(h)||n(h)))return!h.length;var b=t(h);if(b==u||b==l)return!h.size;if(a(h))return!e(h).length;for(var m in h)if(d.call(h,m))return!1;return!0}return Fa=f,Fa}var Ga,Xh;function py(){if(Xh)return Ga;Xh=1;function e(t){return t===void 0}return Ga=e,Ga}var Ha,Wh;function gy(){if(Wh)return Ha;Wh=1;var e=Tr(),t=lt();function n(r,o){var i=-1,a=t(r)?Array(r.length):[];return e(r,function(s,u,l){a[++i]=o(s,u,l)}),a}return Ha=n,Ha}var Ua,Zh;function my(){if(Zh)return Ua;Zh=1;var e=qr(),t=ct(),n=gy(),r=ke();function o(i,a){var s=r(i)?e:n;return s(i,t(a,3))}return Ua=o,Ua}var ja,Jh;function ZC(){if(Jh)return ja;Jh=1;function e(t,n,r,o){var i=-1,a=t==null?0:t.length;for(o&&a&&(r=t[++i]);++i<a;)r=n(r,t[i],i,t);return r}return ja=e,ja}var Ya,Qh;function JC(){if(Qh)return Ya;Qh=1;function e(t,n,r,o,i){return i(t,function(a,s,u){r=o?(o=!1,a):n(r,a,s,u)}),r}return Ya=e,Ya}var Ka,ev;function yy(){if(ev)return Ka;ev=1;var e=ZC(),t=Tr(),n=ct(),r=JC(),o=ke();function i(a,s,u){var l=o(a)?e:r,c=arguments.length<3;return l(a,n(s,4),u,c,t)}return Ka=i,Ka}var Xa,tv;function QC(){if(tv)return Xa;tv=1;var e=kt(),t=ke(),n=et(),r="[object String]";function o(i){return typeof i=="string"||!t(i)&&n(i)&&e(i)==r}return Xa=o,Xa}var Wa,nv;function eN(){if(nv)return Wa;nv=1;var e=fy(),t=e("length");return Wa=t,Wa}var Za,rv;function tN(){if(rv)return Za;rv=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,i="\\ufe0e\\ufe0f",a="\\u200d",s=RegExp("["+a+e+o+i+"]");function u(l){return s.test(l)}return Za=u,Za}var Ja,ov;function nN(){if(ov)return Ja;ov=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,i="\\ufe0e\\ufe0f",a="["+e+"]",s="["+o+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+u+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",b=l+"?",m="["+i+"]?",g="(?:"+h+"(?:"+[c,d,f].join("|")+")"+m+b+")*",_=m+b+g,y="(?:"+[c+s+"?",s,d,f,a].join("|")+")",v=RegExp(u+"(?="+u+")|"+y+_,"g");function p(S){for(var q=v.lastIndex=0;v.test(S);)++q;return q}return Ja=p,Ja}var Qa,iv;function rN(){if(iv)return Qa;iv=1;var e=eN(),t=tN(),n=nN();function r(o){return t(o)?n(o):e(o)}return Qa=r,Qa}var es,av;function oN(){if(av)return es;av=1;var e=jl(),t=Wt(),n=lt(),r=QC(),o=rN(),i="[object Map]",a="[object Set]";function s(u){if(u==null)return 0;if(n(u))return r(u)?o(u):u.length;var l=t(u);return l==i||l==a?u.size:e(u).length}return es=s,es}var ts,sv;function iN(){if(sv)return ts;sv=1;var e=Gl(),t=Zm(),n=Jl(),r=ct(),o=Ir(),i=ke(),a=Xt(),s=Sn(),u=ze(),l=Nn();function c(d,f,h){var b=i(d),m=b||a(d)||l(d);if(f=r(f,4),h==null){var g=d&&d.constructor;m?h=b?new g:[]:u(d)?h=s(g)?t(o(d)):{}:h={}}return(m?e:n)(d,function(_,y,v){return f(h,_,y,v)}),h}return ts=c,ts}var ns,uv;function aN(){if(uv)return ns;uv=1;var e=Kt(),t=Cn(),n=ke(),r=e?e.isConcatSpreadable:void 0;function o(i){return n(i)||t(i)||!!(r&&i&&i[r])}return ns=o,ns}var rs,lv;function tc(){if(lv)return rs;lv=1;var e=Kl(),t=aN();function n(r,o,i,a,s){var u=-1,l=r.length;for(i||(i=t),s||(s=[]);++u<l;){var c=r[u];o>0&&i(c)?o>1?n(c,o-1,i,a,s):e(s,c):a||(s[s.length]=c)}return s}return rs=n,rs}var os,cv;function sN(){if(cv)return os;cv=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return os=e,os}var is,dv;function _y(){if(dv)return is;dv=1;var e=sN(),t=Math.max;function n(r,o,i){return o=t(o===void 0?r.length-1:o,0),function(){for(var a=arguments,s=-1,u=t(a.length-o,0),l=Array(u);++s<u;)l[s]=a[o+s];s=-1;for(var c=Array(o+1);++s<o;)c[s]=a[s];return c[o]=i(l),e(r,this,c)}}return is=n,is}var as,fv;function uN(){if(fv)return as;fv=1;var e=Wl(),t=Bm(),n=Pt(),r=t?function(o,i){return t(o,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:n;return as=r,as}var ss,hv;function lN(){if(hv)return ss;hv=1;var e=800,t=16,n=Date.now;function r(o){var i=0,a=0;return function(){var s=n(),u=t-(s-a);if(a=s,u>0){if(++i>=e)return arguments[0]}else i=0;return o.apply(void 0,arguments)}}return ss=r,ss}var us,vv;function by(){if(vv)return us;vv=1;var e=uN(),t=lN(),n=t(e);return us=n,us}var ls,pv;function Rr(){if(pv)return ls;pv=1;var e=Pt(),t=_y(),n=by();function r(o,i){return n(t(o,i,e),o+"")}return ls=r,ls}var cs,gv;function wy(){if(gv)return cs;gv=1;function e(t,n,r,o){for(var i=t.length,a=r+(o?1:-1);o?a--:++a<i;)if(n(t[a],a,t))return a;return-1}return cs=e,cs}var ds,mv;function cN(){if(mv)return ds;mv=1;function e(t){return t!==t}return ds=e,ds}var fs,yv;function dN(){if(yv)return fs;yv=1;function e(t,n,r){for(var o=r-1,i=t.length;++o<i;)if(t[o]===n)return o;return-1}return fs=e,fs}var hs,_v;function fN(){if(_v)return hs;_v=1;var e=wy(),t=cN(),n=dN();function r(o,i,a){return i===i?n(o,i,a):e(o,t,a)}return hs=r,hs}var vs,bv;function hN(){if(bv)return vs;bv=1;var e=fN();function t(n,r){var o=n==null?0:n.length;return!!o&&e(n,r,0)>-1}return vs=t,vs}var ps,wv;function vN(){if(wv)return ps;wv=1;function e(t,n,r){for(var o=-1,i=t==null?0:t.length;++o<i;)if(r(n,t[o]))return!0;return!1}return ps=e,ps}var gs,Ev;function pN(){if(Ev)return gs;Ev=1;function e(){}return gs=e,gs}var ms,Sv;function gN(){if(Sv)return ms;Sv=1;var e=Km(),t=pN(),n=Ql(),r=1/0,o=e&&1/n(new e([,-0]))[1]==r?function(i){return new e(i)}:t;return ms=o,ms}var ys,xv;function mN(){if(xv)return ys;xv=1;var e=ry(),t=hN(),n=vN(),r=oy(),o=gN(),i=Ql(),a=200;function s(u,l,c){var d=-1,f=t,h=u.length,b=!0,m=[],g=m;if(c)b=!1,f=n;else if(h>=a){var _=l?null:o(u);if(_)return i(_);b=!1,f=r,g=new e}else g=l?[]:m;e:for(;++d<h;){var y=u[d],v=l?l(y):y;if(y=c||y!==0?y:0,b&&v===v){for(var p=g.length;p--;)if(g[p]===v)continue e;l&&g.push(v),m.push(y)}else f(g,v,c)||(g!==m&&g.push(v),m.push(y))}return m}return ys=s,ys}var _s,Cv;function Ey(){if(Cv)return _s;Cv=1;var e=lt(),t=et();function n(r){return t(r)&&e(r)}return _s=n,_s}var bs,Nv;function yN(){if(Nv)return bs;Nv=1;var e=tc(),t=Rr(),n=mN(),r=Ey(),o=t(function(i){return n(e(i,1,r,!0))});return bs=o,bs}var ws,Iv;function _N(){if(Iv)return ws;Iv=1;var e=qr();function t(n,r){return e(r,function(o){return n[o]})}return ws=t,ws}var Es,Tv;function Sy(){if(Tv)return Es;Tv=1;var e=_N(),t=bt();function n(r){return r==null?[]:e(r,t(r))}return Es=n,Es}var Ss,qv;function Ve(){if(qv)return Ss;qv=1;var e;if(typeof zl=="function")try{e={clone:NC(),constant:Wl(),each:ny(),filter:hy(),has:vy(),isArray:ke(),isEmpty:WC(),isFunction:Sn(),isUndefined:py(),keys:bt(),map:my(),reduce:yy(),size:oN(),transform:iN(),union:yN(),values:Sy()}}catch{}return e||(e=window._),Ss=e,Ss}var xs,Av;function nc(){if(Av)return xs;Av=1;var e=Ve();xs=o;var t="\0",n="\0",r="";function o(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(c){return this._label=c,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return e.keys(this._nodes)},o.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},o.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},o.prototype.setNodes=function(c,d){var f=arguments,h=this;return e.each(c,function(b){f.length>1?h.setNode(b,d):h.setNode(b)}),this},o.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},o.prototype.node=function(c){return this._nodes[c]},o.prototype.hasNode=function(c){return e.has(this._nodes,c)},o.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var f=function(h){d.removeEdge(d._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(h){d.setParent(h)}),delete this._children[c]),e.each(e.keys(this._in[c]),f),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},o.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},o.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},o.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},o.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},o.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},o.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},o.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},o.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},o.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(m,g){c(g)&&d.setNode(g,m)}),e.each(this._edgeObjs,function(m){d.hasNode(m.v)&&d.hasNode(m.w)&&d.setEdge(m,f.edge(m))});var h={};function b(m){var g=f.parent(m);return g===void 0||d.hasNode(g)?(h[m]=g,g):g in h?h[g]:b(g)}return this._isCompound&&e.each(d.nodes(),function(m){d.setParent(m,b(m))}),d},o.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return e.values(this._edgeObjs)},o.prototype.setPath=function(c,d){var f=this,h=arguments;return e.reduce(c,function(b,m){return h.length>1?f.setEdge(b,m,d):f.setEdge(b,m),m}),this},o.prototype.setEdge=function(){var c,d,f,h,b=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(c=m.v,d=m.w,f=m.name,arguments.length===2&&(h=arguments[1],b=!0)):(c=m,d=arguments[1],f=arguments[3],arguments.length>2&&(h=arguments[2],b=!0)),c=""+c,d=""+d,e.isUndefined(f)||(f=""+f);var g=s(this._isDirected,c,d,f);if(e.has(this._edgeLabels,g))return b&&(this._edgeLabels[g]=h),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[g]=b?h:this._defaultEdgeLabelFn(c,d,f);var _=u(this._isDirected,c,d,f);return c=_.v,d=_.w,Object.freeze(_),this._edgeObjs[g]=_,i(this._preds[d],c),i(this._sucs[c],d),this._in[d][g]=_,this._out[c][g]=_,this._edgeCount++,this},o.prototype.edge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return this._edgeLabels[h]},o.prototype.hasEdge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return e.has(this._edgeLabels,h)},o.prototype.removeEdge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,f),b=this._edgeObjs[h];return b&&(c=b.v,d=b.w,delete this._edgeLabels[h],delete this._edgeObjs[h],a(this._preds[d],c),a(this._sucs[c],d),delete this._in[d][h],delete this._out[c][h],this._edgeCount--),this},o.prototype.inEdges=function(c,d){var f=this._in[c];if(f){var h=e.values(f);return d?e.filter(h,function(b){return b.v===d}):h}},o.prototype.outEdges=function(c,d){var f=this._out[c];if(f){var h=e.values(f);return d?e.filter(h,function(b){return b.w===d}):h}},o.prototype.nodeEdges=function(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))};function i(c,d){c[d]?c[d]++:c[d]=1}function a(c,d){--c[d]||delete c[d]}function s(c,d,f,h){var b=""+d,m=""+f;if(!c&&b>m){var g=b;b=m,m=g}return b+r+m+r+(e.isUndefined(h)?t:h)}function u(c,d,f,h){var b=""+d,m=""+f;if(!c&&b>m){var g=b;b=m,m=g}var _={v:b,w:m};return h&&(_.name=h),_}function l(c,d){return s(c,d.v,d.w,d.name)}return xs}var Cs,kv;function bN(){return kv||(kv=1,Cs="2.1.8"),Cs}var Ns,Rv;function wN(){return Rv||(Rv=1,Ns={Graph:nc(),version:bN()}),Ns}var Is,Mv;function EN(){if(Mv)return Is;Mv=1;var e=Ve(),t=nc();Is={write:n,read:i};function n(a){var s={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:r(a),edges:o(a)};return e.isUndefined(a.graph())||(s.value=e.clone(a.graph())),s}function r(a){return e.map(a.nodes(),function(s){var u=a.node(s),l=a.parent(s),c={v:s};return e.isUndefined(u)||(c.value=u),e.isUndefined(l)||(c.parent=l),c})}function o(a){return e.map(a.edges(),function(s){var u=a.edge(s),l={v:s.v,w:s.w};return e.isUndefined(s.name)||(l.name=s.name),e.isUndefined(u)||(l.value=u),l})}function i(a){var s=new t(a.options).setGraph(a.value);return e.each(a.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),e.each(a.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return Is}var Ts,Pv;function SN(){if(Pv)return Ts;Pv=1;var e=Ve();Ts=t;function t(n){var r={},o=[],i;function a(s){e.has(r,s)||(r[s]=!0,i.push(s),e.each(n.successors(s),a),e.each(n.predecessors(s),a))}return e.each(n.nodes(),function(s){i=[],a(s),i.length&&o.push(i)}),o}return Ts}var qs,Ov;function xy(){if(Ov)return qs;Ov=1;var e=Ve();qs=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var o=this._keyIndices;if(n=String(n),!e.has(o,n)){var i=this._arr,a=i.length;return o[n]=a,i.push({key:n,priority:r}),this._decrease(a),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var o=this._keyIndices[n];if(r>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[o].priority+" New: "+r);this._arr[o].priority=r,this._decrease(o)},t.prototype._heapify=function(n){var r=this._arr,o=2*n,i=o+1,a=n;o<r.length&&(a=r[o].priority<r[a].priority?o:a,i<r.length&&(a=r[i].priority<r[a].priority?i:a),a!==n&&(this._swap(n,a),this._heapify(a)))},t.prototype._decrease=function(n){for(var r=this._arr,o=r[n].priority,i;n!==0&&(i=n>>1,!(r[i].priority<o));)this._swap(n,i),n=i},t.prototype._swap=function(n,r){var o=this._arr,i=this._keyIndices,a=o[n],s=o[r];o[n]=s,o[r]=a,i[s.key]=n,i[a.key]=r},qs}var As,Dv;function Cy(){if(Dv)return As;Dv=1;var e=Ve(),t=xy();As=r;var n=e.constant(1);function r(i,a,s,u){return o(i,String(a),s||n,u||function(l){return i.outEdges(l)})}function o(i,a,s,u){var l={},c=new t,d,f,h=function(b){var m=b.v!==d?b.v:b.w,g=l[m],_=s(b),y=f.distance+_;if(_<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+b+" Weight: "+_);y<g.distance&&(g.distance=y,g.predecessor=d,c.decrease(m,y))};for(i.nodes().forEach(function(b){var m=b===a?0:Number.POSITIVE_INFINITY;l[b]={distance:m},c.add(b,m)});c.size()>0&&(d=c.removeMin(),f=l[d],f.distance!==Number.POSITIVE_INFINITY);)u(d).forEach(h);return l}return As}var ks,$v;function xN(){if($v)return ks;$v=1;var e=Cy(),t=Ve();ks=n;function n(r,o,i){return t.transform(r.nodes(),function(a,s){a[s]=e(r,s,o,i)},{})}return ks}var Rs,Bv;function Ny(){if(Bv)return Rs;Bv=1;var e=Ve();Rs=t;function t(n){var r=0,o=[],i={},a=[];function s(u){var l=i[u]={onStack:!0,lowlink:r,index:r++};if(o.push(u),n.successors(u).forEach(function(f){e.has(i,f)?i[f].onStack&&(l.lowlink=Math.min(l.lowlink,i[f].index)):(s(f),l.lowlink=Math.min(l.lowlink,i[f].lowlink))}),l.lowlink===l.index){var c=[],d;do d=o.pop(),i[d].onStack=!1,c.push(d);while(u!==d);a.push(c)}}return n.nodes().forEach(function(u){e.has(i,u)||s(u)}),a}return Rs}var Ms,Lv;function CN(){if(Lv)return Ms;Lv=1;var e=Ve(),t=Ny();Ms=n;function n(r){return e.filter(t(r),function(o){return o.length>1||o.length===1&&r.hasEdge(o[0],o[0])})}return Ms}var Ps,zv;function NN(){if(zv)return Ps;zv=1;var e=Ve();Ps=n;var t=e.constant(1);function n(o,i,a){return r(o,i||t,a||function(s){return o.outEdges(s)})}function r(o,i,a){var s={},u=o.nodes();return u.forEach(function(l){s[l]={},s[l][l]={distance:0},u.forEach(function(c){l!==c&&(s[l][c]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(c){var d=c.v===l?c.w:c.v,f=i(c);s[l][d]={distance:f,predecessor:l}})}),u.forEach(function(l){var c=s[l];u.forEach(function(d){var f=s[d];u.forEach(function(h){var b=f[l],m=c[h],g=f[h],_=b.distance+m.distance;_<g.distance&&(g.distance=_,g.predecessor=m.predecessor)})})}),s}return Ps}var Os,Vv;function Iy(){if(Vv)return Os;Vv=1;var e=Ve();Os=t,t.CycleException=n;function t(r){var o={},i={},a=[];function s(u){if(e.has(i,u))throw new n;e.has(o,u)||(i[u]=!0,o[u]=!0,e.each(r.predecessors(u),s),delete i[u],a.push(u))}if(e.each(r.sinks(),s),e.size(o)!==r.nodeCount())throw new n;return a}function n(){}return n.prototype=new Error,Os}var Ds,Fv;function IN(){if(Fv)return Ds;Fv=1;var e=Iy();Ds=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Ds}var $s,Gv;function Ty(){if(Gv)return $s;Gv=1;var e=Ve();$s=t;function t(r,o,i){e.isArray(o)||(o=[o]);var a=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],u={};return e.each(o,function(l){if(!r.hasNode(l))throw new Error("Graph does not have node: "+l);n(r,l,i==="post",u,a,s)}),s}function n(r,o,i,a,s,u){e.has(a,o)||(a[o]=!0,i||u.push(o),e.each(s(o),function(l){n(r,l,i,a,s,u)}),i&&u.push(o))}return $s}var Bs,Hv;function TN(){if(Hv)return Bs;Hv=1;var e=Ty();Bs=t;function t(n,r){return e(n,r,"post")}return Bs}var Ls,Uv;function qN(){if(Uv)return Ls;Uv=1;var e=Ty();Ls=t;function t(n,r){return e(n,r,"pre")}return Ls}var zs,jv;function AN(){if(jv)return zs;jv=1;var e=Ve(),t=nc(),n=xy();zs=r;function r(o,i){var a=new t,s={},u=new n,l;function c(f){var h=f.v===l?f.w:f.v,b=u.priority(h);if(b!==void 0){var m=i(f);m<b&&(s[h]=l,u.decrease(h,m))}}if(o.nodeCount()===0)return a;e.each(o.nodes(),function(f){u.add(f,Number.POSITIVE_INFINITY),a.setNode(f)}),u.decrease(o.nodes()[0],0);for(var d=!1;u.size()>0;){if(l=u.removeMin(),e.has(s,l))a.setEdge(l,s[l]);else{if(d)throw new Error("Input graph is not connected: "+o);d=!0}o.nodeEdges(l).forEach(c)}return a}return zs}var Vs,Yv;function kN(){return Yv||(Yv=1,Vs={components:SN(),dijkstra:Cy(),dijkstraAll:xN(),findCycles:CN(),floydWarshall:NN(),isAcyclic:IN(),postorder:TN(),preorder:qN(),prim:AN(),tarjan:Ny(),topsort:Iy()}),Vs}var Fs,Kv;function RN(){if(Kv)return Fs;Kv=1;var e=wN();return Fs={Graph:e.Graph,json:EN(),alg:kN(),version:e.version},Fs}var Gs,Xv;function je(){if(Xv)return Gs;Xv=1;var e;if(typeof zl=="function")try{e=RN()}catch{}return e||(e=window.graphlib),Gs=e,Gs}var Hs,Wv;function MN(){if(Wv)return Hs;Wv=1;var e=Qm(),t=1,n=4;function r(o){return e(o,t|n)}return Hs=r,Hs}var Us,Zv;function Mr(){if(Zv)return Us;Zv=1;var e=Yt(),t=lt(),n=xr(),r=ze();function o(i,a,s){if(!r(s))return!1;var u=typeof a;return(u=="number"?t(s)&&n(a,s.length):u=="string"&&a in s)?e(s[a],i):!1}return Us=o,Us}var js,Jv;function PN(){if(Jv)return js;Jv=1;var e=Rr(),t=Yt(),n=Mr(),r=Mt(),o=Object.prototype,i=o.hasOwnProperty,a=e(function(s,u){s=Object(s);var l=-1,c=u.length,d=c>2?u[2]:void 0;for(d&&n(u[0],u[1],d)&&(c=1);++l<c;)for(var f=u[l],h=r(f),b=-1,m=h.length;++b<m;){var g=h[b],_=s[g];(_===void 0||t(_,o[g])&&!i.call(s,g))&&(s[g]=f[g])}return s});return js=a,js}var Ys,Qv;function ON(){if(Qv)return Ys;Qv=1;var e=ct(),t=lt(),n=bt();function r(o){return function(i,a,s){var u=Object(i);if(!t(i)){var l=e(a,3);i=n(i),a=function(d){return l(u[d],d,u)}}var c=o(i,a,s);return c>-1?u[l?i[c]:c]:void 0}}return Ys=r,Ys}var Ks,ep;function DN(){if(ep)return Ks;ep=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Ks=t,Ks}var Xs,tp;function $N(){if(tp)return Xs;tp=1;var e=DN(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Xs=n,Xs}var Ws,np;function BN(){if(np)return Ws;np=1;var e=$N(),t=ze(),n=Zt(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=t(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=i.test(l);return d||a.test(l)?s(l.slice(2),d?2:8):o.test(l)?r:+l}return Ws=u,Ws}var Zs,rp;function qy(){if(rp)return Zs;rp=1;var e=BN(),t=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-t){var i=o<0?-1:1;return i*n}return o===o?o:0}return Zs=r,Zs}var Js,op;function LN(){if(op)return Js;op=1;var e=qy();function t(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return Js=t,Js}var Qs,ip;function zN(){if(ip)return Qs;ip=1;var e=wy(),t=ct(),n=LN(),r=Math.max;function o(i,a,s){var u=i==null?0:i.length;if(!u)return-1;var l=s==null?0:n(s);return l<0&&(l=r(u+l,0)),e(i,t(a,3),l)}return Qs=o,Qs}var eu,ap;function VN(){if(ap)return eu;ap=1;var e=ON(),t=zN(),n=e(t);return eu=n,eu}var tu,sp;function Ay(){if(sp)return tu;sp=1;var e=tc();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return tu=t,tu}var nu,up;function FN(){if(up)return nu;up=1;var e=Zl(),t=ey(),n=Mt();function r(o,i){return o==null?o:e(o,t(i),n)}return nu=r,nu}var ru,lp;function GN(){if(lp)return ru;lp=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return ru=e,ru}var ou,cp;function HN(){if(cp)return ou;cp=1;var e=Er(),t=Jl(),n=ct();function r(o,i){var a={};return i=n(i,3),t(o,function(s,u,l){e(a,u,i(s,u,l))}),a}return ou=r,ou}var iu,dp;function rc(){if(dp)return iu;dp=1;var e=Zt();function t(n,r,o){for(var i=-1,a=n.length;++i<a;){var s=n[i],u=r(s);if(u!=null&&(l===void 0?u===u&&!e(u):o(u,l)))var l=u,c=s}return c}return iu=t,iu}var au,fp;function UN(){if(fp)return au;fp=1;function e(t,n){return t>n}return au=e,au}var su,hp;function jN(){if(hp)return su;hp=1;var e=rc(),t=UN(),n=Pt();function r(o){return o&&o.length?e(o,n,t):void 0}return su=r,su}var uu,vp;function ky(){if(vp)return uu;vp=1;var e=Er(),t=Yt();function n(r,o,i){(i!==void 0&&!t(r[o],i)||i===void 0&&!(o in r))&&e(r,o,i)}return uu=n,uu}var lu,pp;function YN(){if(pp)return lu;pp=1;var e=kt(),t=Ir(),n=et(),r="[object Object]",o=Function.prototype,i=Object.prototype,a=o.toString,s=i.hasOwnProperty,u=a.call(Object);function l(c){if(!n(c)||e(c)!=r)return!1;var d=t(c);if(d===null)return!0;var f=s.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&a.call(f)==u}return lu=l,lu}var cu,gp;function Ry(){if(gp)return cu;gp=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return cu=e,cu}var du,mp;function KN(){if(mp)return du;mp=1;var e=xn(),t=Mt();function n(r){return e(r,t(r))}return du=n,du}var fu,yp;function XN(){if(yp)return fu;yp=1;var e=ky(),t=Vm(),n=Wm(),r=Fm(),o=Jm(),i=Cn(),a=ke(),s=Ey(),u=Xt(),l=Sn(),c=ze(),d=YN(),f=Nn(),h=Ry(),b=KN();function m(g,_,y,v,p,S,q){var A=h(g,y),O=h(_,y),B=q.get(O);if(B){e(g,y,B);return}var $=S?S(A,O,y+"",g,_,q):void 0,P=$===void 0;if(P){var N=a(O),F=!N&&u(O),I=!N&&!F&&f(O);$=O,N||F||I?a(A)?$=A:s(A)?$=r(A):F?(P=!1,$=t(O,!0)):I?(P=!1,$=n(O,!0)):$=[]:d(O)||i(O)?($=A,i(A)?$=b(A):(!c(A)||l(A))&&($=o(O))):P=!1}P&&(q.set(O,$),p($,O,v,S,q),q.delete(O)),e(g,y,$)}return fu=m,fu}var hu,_p;function WN(){if(_p)return hu;_p=1;var e=wr(),t=ky(),n=Zl(),r=XN(),o=ze(),i=Mt(),a=Ry();function s(u,l,c,d,f){u!==l&&n(l,function(h,b){if(f||(f=new e),o(h))r(u,l,b,c,s,d,f);else{var m=d?d(a(u,b),h,b+"",u,l,f):void 0;m===void 0&&(m=h),t(u,b,m)}},i)}return hu=s,hu}var vu,bp;function ZN(){if(bp)return vu;bp=1;var e=Rr(),t=Mr();function n(r){return e(function(o,i){var a=-1,s=i.length,u=s>1?i[s-1]:void 0,l=s>2?i[2]:void 0;for(u=r.length>3&&typeof u=="function"?(s--,u):void 0,l&&t(i[0],i[1],l)&&(u=s<3?void 0:u,s=1),o=Object(o);++a<s;){var c=i[a];c&&r(o,c,a,u)}return o})}return vu=n,vu}var pu,wp;function JN(){if(wp)return pu;wp=1;var e=WN(),t=ZN(),n=t(function(r,o,i){e(r,o,i)});return pu=n,pu}var gu,Ep;function My(){if(Ep)return gu;Ep=1;function e(t,n){return t<n}return gu=e,gu}var mu,Sp;function QN(){if(Sp)return mu;Sp=1;var e=rc(),t=My(),n=Pt();function r(o){return o&&o.length?e(o,n,t):void 0}return mu=r,mu}var yu,xp;function eI(){if(xp)return yu;xp=1;var e=rc(),t=ct(),n=My();function r(o,i){return o&&o.length?e(o,t(i,2),n):void 0}return yu=r,yu}var _u,Cp;function tI(){if(Cp)return _u;Cp=1;var e=Ke(),t=function(){return e.Date.now()};return _u=t,_u}var bu,Np;function nI(){if(Np)return bu;Np=1;var e=Sr(),t=Ar(),n=xr(),r=ze(),o=In();function i(a,s,u,l){if(!r(a))return a;s=t(s,a);for(var c=-1,d=s.length,f=d-1,h=a;h!=null&&++c<d;){var b=o(s[c]),m=u;if(b==="__proto__"||b==="constructor"||b==="prototype")return a;if(c!=f){var g=h[b];m=l?l(g,b,h):void 0,m===void 0&&(m=r(g)?g:n(s[c+1])?[]:{})}e(h,b,m),h=h[b]}return a}return bu=i,bu}var wu,Ip;function rI(){if(Ip)return wu;Ip=1;var e=kr(),t=nI(),n=Ar();function r(o,i,a){for(var s=-1,u=i.length,l={};++s<u;){var c=i[s],d=e(o,c);a(d,c)&&t(l,n(c,o),d)}return l}return wu=r,wu}var Eu,Tp;function oI(){if(Tp)return Eu;Tp=1;var e=rI(),t=dy();function n(r,o){return e(r,o,function(i,a){return t(r,a)})}return Eu=n,Eu}var Su,qp;function iI(){if(qp)return Su;qp=1;var e=Ay(),t=_y(),n=by();function r(o){return n(t(o,void 0,e),o+"")}return Su=r,Su}var xu,Ap;function aI(){if(Ap)return xu;Ap=1;var e=oI(),t=iI(),n=t(function(r,o){return r==null?{}:e(r,o)});return xu=n,xu}var Cu,kp;function sI(){if(kp)return Cu;kp=1;var e=Math.ceil,t=Math.max;function n(r,o,i,a){for(var s=-1,u=t(e((o-r)/(i||1)),0),l=Array(u);u--;)l[a?u:++s]=r,r+=i;return l}return Cu=n,Cu}var Nu,Rp;function uI(){if(Rp)return Nu;Rp=1;var e=sI(),t=Mr(),n=qy();function r(o){return function(i,a,s){return s&&typeof s!="number"&&t(i,a,s)&&(a=s=void 0),i=n(i),a===void 0?(a=i,i=0):a=n(a),s=s===void 0?i<a?1:-1:n(s),e(i,a,s,o)}}return Nu=r,Nu}var Iu,Mp;function lI(){if(Mp)return Iu;Mp=1;var e=uI(),t=e();return Iu=t,Iu}var Tu,Pp;function cI(){if(Pp)return Tu;Pp=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Tu=e,Tu}var qu,Op;function dI(){if(Op)return qu;Op=1;var e=Zt();function t(n,r){if(n!==r){var o=n!==void 0,i=n===null,a=n===n,s=e(n),u=r!==void 0,l=r===null,c=r===r,d=e(r);if(!l&&!d&&!s&&n>r||s&&u&&c&&!l&&!d||i&&u&&c||!o&&c||!a)return 1;if(!i&&!s&&!d&&n<r||d&&o&&a&&!i&&!s||l&&o&&a||!u&&a||!c)return-1}return 0}return qu=t,qu}var Au,Dp;function fI(){if(Dp)return Au;Dp=1;var e=dI();function t(n,r,o){for(var i=-1,a=n.criteria,s=r.criteria,u=a.length,l=o.length;++i<u;){var c=e(a[i],s[i]);if(c){if(i>=l)return c;var d=o[i];return c*(d=="desc"?-1:1)}}return n.index-r.index}return Au=t,Au}var ku,$p;function hI(){if($p)return ku;$p=1;var e=qr(),t=kr(),n=ct(),r=gy(),o=cI(),i=Cr(),a=fI(),s=Pt(),u=ke();function l(c,d,f){d.length?d=e(d,function(m){return u(m)?function(g){return t(g,m.length===1?m[0]:m)}:m}):d=[s];var h=-1;d=e(d,i(n));var b=r(c,function(m,g,_){var y=e(d,function(v){return v(m)});return{criteria:y,index:++h,value:m}});return o(b,function(m,g){return a(m,g,f)})}return ku=l,ku}var Ru,Bp;function vI(){if(Bp)return Ru;Bp=1;var e=tc(),t=hI(),n=Rr(),r=Mr(),o=n(function(i,a){if(i==null)return[];var s=a.length;return s>1&&r(i,a[0],a[1])?a=[]:s>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),t(i,e(a,1),[])});return Ru=o,Ru}var Mu,Lp;function pI(){if(Lp)return Mu;Lp=1;var e=ly(),t=0;function n(r){var o=++t;return e(r)+o}return Mu=n,Mu}var Pu,zp;function gI(){if(zp)return Pu;zp=1;function e(t,n,r){for(var o=-1,i=t.length,a=n.length,s={};++o<i;){var u=o<a?n[o]:void 0;r(s,t[o],u)}return s}return Pu=e,Pu}var Ou,Vp;function mI(){if(Vp)return Ou;Vp=1;var e=Sr(),t=gI();function n(r,o){return t(r||[],o||[],e)}return Ou=n,Ou}var Du,Fp;function xe(){if(Fp)return Du;Fp=1;var e;if(typeof zl=="function")try{e={cloneDeep:MN(),constant:Wl(),defaults:PN(),each:ny(),filter:hy(),find:VN(),flatten:Ay(),forEach:ty(),forIn:FN(),has:vy(),isUndefined:py(),last:GN(),map:my(),mapValues:HN(),max:jN(),merge:JN(),min:QN(),minBy:eI(),now:tI(),pick:aI(),range:lI(),reduce:yy(),sortBy:vI(),uniqueId:pI(),values:Sy(),zipObject:mI()}}catch{}return e||(e=window._),Du=e,Du}var $u,Gp;function yI(){if(Gp)return $u;Gp=1,$u=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,o=r._prev;if(o!==r)return t(o),o},e.prototype.enqueue=function(r){var o=this._sentinel;r._prev&&r._next&&t(r),r._next=o._next,o._next._prev=r,o._next=r,r._prev=o},e.prototype.toString=function(){for(var r=[],o=this._sentinel,i=o._prev;i!==o;)r.push(JSON.stringify(i,n)),i=i._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,o){if(r!=="_next"&&r!=="_prev")return o}return $u}var Bu,Hp;function _I(){if(Hp)return Bu;Hp=1;var e=xe(),t=je().Graph,n=yI();Bu=o;var r=e.constant(1);function o(l,c){if(l.nodeCount()<=1)return[];var d=s(l,c||r),f=i(d.graph,d.buckets,d.zeroIdx);return e.flatten(e.map(f,function(h){return l.outEdges(h.v,h.w)}),!0)}function i(l,c,d){for(var f=[],h=c[c.length-1],b=c[0],m;l.nodeCount();){for(;m=b.dequeue();)a(l,c,d,m);for(;m=h.dequeue();)a(l,c,d,m);if(l.nodeCount()){for(var g=c.length-2;g>0;--g)if(m=c[g].dequeue(),m){f=f.concat(a(l,c,d,m,!0));break}}}return f}function a(l,c,d,f,h){var b=h?[]:void 0;return e.forEach(l.inEdges(f.v),function(m){var g=l.edge(m),_=l.node(m.v);h&&b.push({v:m.v,w:m.w}),_.out-=g,u(c,d,_)}),e.forEach(l.outEdges(f.v),function(m){var g=l.edge(m),_=m.w,y=l.node(_);y.in-=g,u(c,d,y)}),l.removeNode(f.v),b}function s(l,c){var d=new t,f=0,h=0;e.forEach(l.nodes(),function(g){d.setNode(g,{v:g,in:0,out:0})}),e.forEach(l.edges(),function(g){var _=d.edge(g.v,g.w)||0,y=c(g),v=_+y;d.setEdge(g.v,g.w,v),h=Math.max(h,d.node(g.v).out+=y),f=Math.max(f,d.node(g.w).in+=y)});var b=e.range(h+f+3).map(function(){return new n}),m=f+1;return e.forEach(d.nodes(),function(g){u(b,m,d.node(g))}),{graph:d,buckets:b,zeroIdx:m}}function u(l,c,d){d.out?d.in?l[d.out-d.in+c].enqueue(d):l[l.length-1].enqueue(d):l[0].enqueue(d)}return Bu}var Lu,Up;function bI(){if(Up)return Lu;Up=1;var e=xe(),t=_I();Lu={run:n,undo:o};function n(i){var a=i.graph().acyclicer==="greedy"?t(i,s(i)):r(i);e.forEach(a,function(u){var l=i.edge(u);i.removeEdge(u),l.forwardName=u.name,l.reversed=!0,i.setEdge(u.w,u.v,l,e.uniqueId("rev"))});function s(u){return function(l){return u.edge(l).weight}}}function r(i){var a=[],s={},u={};function l(c){e.has(u,c)||(u[c]=!0,s[c]=!0,e.forEach(i.outEdges(c),function(d){e.has(s,d.w)?a.push(d):l(d.w)}),delete s[c])}return e.forEach(i.nodes(),l),a}function o(i){e.forEach(i.edges(),function(a){var s=i.edge(a);if(s.reversed){i.removeEdge(a);var u=s.forwardName;delete s.reversed,delete s.forwardName,i.setEdge(a.w,a.v,s,u)}})}return Lu}var zu,jp;function De(){if(jp)return zu;jp=1;var e=xe(),t=je().Graph;zu={addDummyNode:n,simplify:r,asNonCompoundGraph:o,successorWeights:i,predecessorWeights:a,intersectRect:s,buildLayerMatrix:u,normalizeRanks:l,removeEmptyRanks:c,addBorderNode:d,maxRank:f,partition:h,time:b,notime:m};function n(g,_,y,v){var p;do p=e.uniqueId(v);while(g.hasNode(p));return y.dummy=_,g.setNode(p,y),p}function r(g){var _=new t().setGraph(g.graph());return e.forEach(g.nodes(),function(y){_.setNode(y,g.node(y))}),e.forEach(g.edges(),function(y){var v=_.edge(y.v,y.w)||{weight:0,minlen:1},p=g.edge(y);_.setEdge(y.v,y.w,{weight:v.weight+p.weight,minlen:Math.max(v.minlen,p.minlen)})}),_}function o(g){var _=new t({multigraph:g.isMultigraph()}).setGraph(g.graph());return e.forEach(g.nodes(),function(y){g.children(y).length||_.setNode(y,g.node(y))}),e.forEach(g.edges(),function(y){_.setEdge(y,g.edge(y))}),_}function i(g){var _=e.map(g.nodes(),function(y){var v={};return e.forEach(g.outEdges(y),function(p){v[p.w]=(v[p.w]||0)+g.edge(p).weight}),v});return e.zipObject(g.nodes(),_)}function a(g){var _=e.map(g.nodes(),function(y){var v={};return e.forEach(g.inEdges(y),function(p){v[p.v]=(v[p.v]||0)+g.edge(p).weight}),v});return e.zipObject(g.nodes(),_)}function s(g,_){var y=g.x,v=g.y,p=_.x-y,S=_.y-v,q=g.width/2,A=g.height/2;if(!p&&!S)throw new Error("Not possible to find intersection inside of the rectangle");var O,B;return Math.abs(S)*q>Math.abs(p)*A?(S<0&&(A=-A),O=A*p/S,B=A):(p<0&&(q=-q),O=q,B=q*S/p),{x:y+O,y:v+B}}function u(g){var _=e.map(e.range(f(g)+1),function(){return[]});return e.forEach(g.nodes(),function(y){var v=g.node(y),p=v.rank;e.isUndefined(p)||(_[p][v.order]=y)}),_}function l(g){var _=e.min(e.map(g.nodes(),function(y){return g.node(y).rank}));e.forEach(g.nodes(),function(y){var v=g.node(y);e.has(v,"rank")&&(v.rank-=_)})}function c(g){var _=e.min(e.map(g.nodes(),function(S){return g.node(S).rank})),y=[];e.forEach(g.nodes(),function(S){var q=g.node(S).rank-_;y[q]||(y[q]=[]),y[q].push(S)});var v=0,p=g.graph().nodeRankFactor;e.forEach(y,function(S,q){e.isUndefined(S)&&q%p!==0?--v:v&&e.forEach(S,function(A){g.node(A).rank+=v})})}function d(g,_,y,v){var p={width:0,height:0};return arguments.length>=4&&(p.rank=y,p.order=v),n(g,"border",p,_)}function f(g){return e.max(e.map(g.nodes(),function(_){var y=g.node(_).rank;if(!e.isUndefined(y))return y}))}function h(g,_){var y={lhs:[],rhs:[]};return e.forEach(g,function(v){_(v)?y.lhs.push(v):y.rhs.push(v)}),y}function b(g,_){var y=e.now();try{return _()}finally{console.log(g+" time: "+(e.now()-y)+"ms")}}function m(g,_){return _()}return zu}var Vu,Yp;function wI(){if(Yp)return Vu;Yp=1;var e=xe(),t=De();Vu={run:n,undo:o};function n(i){i.graph().dummyChains=[],e.forEach(i.edges(),function(a){r(i,a)})}function r(i,a){var s=a.v,u=i.node(s).rank,l=a.w,c=i.node(l).rank,d=a.name,f=i.edge(a),h=f.labelRank;if(c!==u+1){i.removeEdge(a);var b,m,g;for(g=0,++u;u<c;++g,++u)f.points=[],m={width:0,height:0,edgeLabel:f,edgeObj:a,rank:u},b=t.addDummyNode(i,"edge",m,"_d"),u===h&&(m.width=f.width,m.height=f.height,m.dummy="edge-label",m.labelpos=f.labelpos),i.setEdge(s,b,{weight:f.weight},d),g===0&&i.graph().dummyChains.push(b),s=b;i.setEdge(s,l,{weight:f.weight},d)}}function o(i){e.forEach(i.graph().dummyChains,function(a){var s=i.node(a),u=s.edgeLabel,l;for(i.setEdge(s.edgeObj,u);s.dummy;)l=i.successors(a)[0],i.removeNode(a),u.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(u.x=s.x,u.y=s.y,u.width=s.width,u.height=s.height),a=l,s=i.node(a)})}return Vu}var Fu,Kp;function ir(){if(Kp)return Fu;Kp=1;var e=xe();Fu={longestPath:t,slack:n};function t(r){var o={};function i(a){var s=r.node(a);if(e.has(o,a))return s.rank;o[a]=!0;var u=e.min(e.map(r.outEdges(a),function(l){return i(l.w)-r.edge(l).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),s.rank=u}e.forEach(r.sources(),i)}function n(r,o){return r.node(o.w).rank-r.node(o.v).rank-r.edge(o).minlen}return Fu}var Gu,Xp;function Py(){if(Xp)return Gu;Xp=1;var e=xe(),t=je().Graph,n=ir().slack;Gu=r;function r(s){var u=new t({directed:!1}),l=s.nodes()[0],c=s.nodeCount();u.setNode(l,{});for(var d,f;o(u,s)<c;)d=i(u,s),f=u.hasNode(d.v)?n(s,d):-n(s,d),a(u,s,f);return u}function o(s,u){function l(c){e.forEach(u.nodeEdges(c),function(d){var f=d.v,h=c===f?d.w:f;!s.hasNode(h)&&!n(u,d)&&(s.setNode(h,{}),s.setEdge(c,h,{}),l(h))})}return e.forEach(s.nodes(),l),s.nodeCount()}function i(s,u){return e.minBy(u.edges(),function(l){if(s.hasNode(l.v)!==s.hasNode(l.w))return n(u,l)})}function a(s,u,l){e.forEach(s.nodes(),function(c){u.node(c).rank+=l})}return Gu}var Hu,Wp;function EI(){if(Wp)return Hu;Wp=1;var e=xe(),t=Py(),n=ir().slack,r=ir().longestPath,o=je().alg.preorder,i=je().alg.postorder,a=De().simplify;Hu=s,s.initLowLimValues=d,s.initCutValues=u,s.calcCutValue=c,s.leaveEdge=h,s.enterEdge=b,s.exchangeEdges=m;function s(v){v=a(v),r(v);var p=t(v);d(p),u(p,v);for(var S,q;S=h(p);)q=b(p,v,S),m(p,v,S,q)}function u(v,p){var S=i(v,v.nodes());S=S.slice(0,S.length-1),e.forEach(S,function(q){l(v,p,q)})}function l(v,p,S){var q=v.node(S),A=q.parent;v.edge(S,A).cutvalue=c(v,p,S)}function c(v,p,S){var q=v.node(S),A=q.parent,O=!0,B=p.edge(S,A),$=0;return B||(O=!1,B=p.edge(A,S)),$=B.weight,e.forEach(p.nodeEdges(S),function(P){var N=P.v===S,F=N?P.w:P.v;if(F!==A){var I=N===O,L=p.edge(P).weight;if($+=I?L:-L,_(v,S,F)){var M=v.edge(S,F).cutvalue;$+=I?-M:M}}}),$}function d(v,p){arguments.length<2&&(p=v.nodes()[0]),f(v,{},1,p)}function f(v,p,S,q,A){var O=S,B=v.node(q);return p[q]=!0,e.forEach(v.neighbors(q),function($){e.has(p,$)||(S=f(v,p,S,$,q))}),B.low=O,B.lim=S++,A?B.parent=A:delete B.parent,S}function h(v){return e.find(v.edges(),function(p){return v.edge(p).cutvalue<0})}function b(v,p,S){var q=S.v,A=S.w;p.hasEdge(q,A)||(q=S.w,A=S.v);var O=v.node(q),B=v.node(A),$=O,P=!1;O.lim>B.lim&&($=B,P=!0);var N=e.filter(p.edges(),function(F){return P===y(v,v.node(F.v),$)&&P!==y(v,v.node(F.w),$)});return e.minBy(N,function(F){return n(p,F)})}function m(v,p,S,q){var A=S.v,O=S.w;v.removeEdge(A,O),v.setEdge(q.v,q.w,{}),d(v),u(v,p),g(v,p)}function g(v,p){var S=e.find(v.nodes(),function(A){return!p.node(A).parent}),q=o(v,S);q=q.slice(1),e.forEach(q,function(A){var O=v.node(A).parent,B=p.edge(A,O),$=!1;B||(B=p.edge(O,A),$=!0),p.node(A).rank=p.node(O).rank+($?B.minlen:-B.minlen)})}function _(v,p,S){return v.hasEdge(p,S)}function y(v,p,S){return S.low<=p.lim&&p.lim<=S.lim}return Hu}var Uu,Zp;function SI(){if(Zp)return Uu;Zp=1;var e=ir(),t=e.longestPath,n=Py(),r=EI();Uu=o;function o(u){switch(u.graph().ranker){case"network-simplex":s(u);break;case"tight-tree":a(u);break;case"longest-path":i(u);break;default:s(u)}}var i=t;function a(u){t(u),n(u)}function s(u){r(u)}return Uu}var ju,Jp;function xI(){if(Jp)return ju;Jp=1;var e=xe();ju=t;function t(o){var i=r(o);e.forEach(o.graph().dummyChains,function(a){for(var s=o.node(a),u=s.edgeObj,l=n(o,i,u.v,u.w),c=l.path,d=l.lca,f=0,h=c[f],b=!0;a!==u.w;){if(s=o.node(a),b){for(;(h=c[f])!==d&&o.node(h).maxRank<s.rank;)f++;h===d&&(b=!1)}if(!b){for(;f<c.length-1&&o.node(h=c[f+1]).minRank<=s.rank;)f++;h=c[f]}o.setParent(a,h),a=o.successors(a)[0]}})}function n(o,i,a,s){var u=[],l=[],c=Math.min(i[a].low,i[s].low),d=Math.max(i[a].lim,i[s].lim),f,h;f=a;do f=o.parent(f),u.push(f);while(f&&(i[f].low>c||d>i[f].lim));for(h=f,f=s;(f=o.parent(f))!==h;)l.push(f);return{path:u.concat(l.reverse()),lca:h}}function r(o){var i={},a=0;function s(u){var l=a;e.forEach(o.children(u),s),i[u]={low:l,lim:a++}}return e.forEach(o.children(),s),i}return ju}var Yu,Qp;function CI(){if(Qp)return Yu;Qp=1;var e=xe(),t=De();Yu={run:n,cleanup:a};function n(s){var u=t.addDummyNode(s,"root",{},"_root"),l=o(s),c=e.max(e.values(l))-1,d=2*c+1;s.graph().nestingRoot=u,e.forEach(s.edges(),function(h){s.edge(h).minlen*=d});var f=i(s)+1;e.forEach(s.children(),function(h){r(s,u,d,f,c,l,h)}),s.graph().nodeRankFactor=d}function r(s,u,l,c,d,f,h){var b=s.children(h);if(!b.length){h!==u&&s.setEdge(u,h,{weight:0,minlen:l});return}var m=t.addBorderNode(s,"_bt"),g=t.addBorderNode(s,"_bb"),_=s.node(h);s.setParent(m,h),_.borderTop=m,s.setParent(g,h),_.borderBottom=g,e.forEach(b,function(y){r(s,u,l,c,d,f,y);var v=s.node(y),p=v.borderTop?v.borderTop:y,S=v.borderBottom?v.borderBottom:y,q=v.borderTop?c:2*c,A=p!==S?1:d-f[h]+1;s.setEdge(m,p,{weight:q,minlen:A,nestingEdge:!0}),s.setEdge(S,g,{weight:q,minlen:A,nestingEdge:!0})}),s.parent(h)||s.setEdge(u,m,{weight:0,minlen:d+f[h]})}function o(s){var u={};function l(c,d){var f=s.children(c);f&&f.length&&e.forEach(f,function(h){l(h,d+1)}),u[c]=d}return e.forEach(s.children(),function(c){l(c,1)}),u}function i(s){return e.reduce(s.edges(),function(u,l){return u+s.edge(l).weight},0)}function a(s){var u=s.graph();s.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(s.edges(),function(l){var c=s.edge(l);c.nestingEdge&&s.removeEdge(l)})}return Yu}var Ku,eg;function NI(){if(eg)return Ku;eg=1;var e=xe(),t=De();Ku=n;function n(o){function i(a){var s=o.children(a),u=o.node(a);if(s.length&&e.forEach(s,i),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var l=u.minRank,c=u.maxRank+1;l<c;++l)r(o,"borderLeft","_bl",a,u,l),r(o,"borderRight","_br",a,u,l)}}e.forEach(o.children(),i)}function r(o,i,a,s,u,l){var c={width:0,height:0,rank:l,borderType:i},d=u[i][l-1],f=t.addDummyNode(o,"border",c,a);u[i][l]=f,o.setParent(f,s),d&&o.setEdge(d,f,{weight:1})}return Ku}var Xu,tg;function II(){if(tg)return Xu;tg=1;var e=xe();Xu={adjust:t,undo:n};function t(l){var c=l.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&r(l)}function n(l){var c=l.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&i(l),(c==="lr"||c==="rl")&&(s(l),r(l))}function r(l){e.forEach(l.nodes(),function(c){o(l.node(c))}),e.forEach(l.edges(),function(c){o(l.edge(c))})}function o(l){var c=l.width;l.width=l.height,l.height=c}function i(l){e.forEach(l.nodes(),function(c){a(l.node(c))}),e.forEach(l.edges(),function(c){var d=l.edge(c);e.forEach(d.points,a),e.has(d,"y")&&a(d)})}function a(l){l.y=-l.y}function s(l){e.forEach(l.nodes(),function(c){u(l.node(c))}),e.forEach(l.edges(),function(c){var d=l.edge(c);e.forEach(d.points,u),e.has(d,"x")&&u(d)})}function u(l){var c=l.x;l.x=l.y,l.y=c}return Xu}var Wu,ng;function TI(){if(ng)return Wu;ng=1;var e=xe();Wu=t;function t(n){var r={},o=e.filter(n.nodes(),function(l){return!n.children(l).length}),i=e.max(e.map(o,function(l){return n.node(l).rank})),a=e.map(e.range(i+1),function(){return[]});function s(l){if(!e.has(r,l)){r[l]=!0;var c=n.node(l);a[c.rank].push(l),e.forEach(n.successors(l),s)}}var u=e.sortBy(o,function(l){return n.node(l).rank});return e.forEach(u,s),a}return Wu}var Zu,rg;function qI(){if(rg)return Zu;rg=1;var e=xe();Zu=t;function t(r,o){for(var i=0,a=1;a<o.length;++a)i+=n(r,o[a-1],o[a]);return i}function n(r,o,i){for(var a=e.zipObject(i,e.map(i,function(f,h){return h})),s=e.flatten(e.map(o,function(f){return e.sortBy(e.map(r.outEdges(f),function(h){return{pos:a[h.w],weight:r.edge(h).weight}}),"pos")}),!0),u=1;u<i.length;)u<<=1;var l=2*u-1;u-=1;var c=e.map(new Array(l),function(){return 0}),d=0;return e.forEach(s.forEach(function(f){var h=f.pos+u;c[h]+=f.weight;for(var b=0;h>0;)h%2&&(b+=c[h+1]),h=h-1>>1,c[h]+=f.weight;d+=f.weight*b})),d}return Zu}var Ju,og;function AI(){if(og)return Ju;og=1;var e=xe();Ju=t;function t(n,r){return e.map(r,function(o){var i=n.inEdges(o);if(i.length){var a=e.reduce(i,function(s,u){var l=n.edge(u),c=n.node(u.v);return{sum:s.sum+l.weight*c.order,weight:s.weight+l.weight}},{sum:0,weight:0});return{v:o,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:o}})}return Ju}var Qu,ig;function kI(){if(ig)return Qu;ig=1;var e=xe();Qu=t;function t(o,i){var a={};e.forEach(o,function(u,l){var c=a[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:l};e.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),e.forEach(i.edges(),function(u){var l=a[u.v],c=a[u.w];!e.isUndefined(l)&&!e.isUndefined(c)&&(c.indegree++,l.out.push(a[u.w]))});var s=e.filter(a,function(u){return!u.indegree});return n(s)}function n(o){var i=[];function a(l){return function(c){c.merged||(e.isUndefined(c.barycenter)||e.isUndefined(l.barycenter)||c.barycenter>=l.barycenter)&&r(l,c)}}function s(l){return function(c){c.in.push(l),--c.indegree===0&&o.push(c)}}for(;o.length;){var u=o.pop();i.push(u),e.forEach(u.in.reverse(),a(u)),e.forEach(u.out,s(u))}return e.map(e.filter(i,function(l){return!l.merged}),function(l){return e.pick(l,["vs","i","barycenter","weight"])})}function r(o,i){var a=0,s=0;o.weight&&(a+=o.barycenter*o.weight,s+=o.weight),i.weight&&(a+=i.barycenter*i.weight,s+=i.weight),o.vs=i.vs.concat(o.vs),o.barycenter=a/s,o.weight=s,o.i=Math.min(i.i,o.i),i.merged=!0}return Qu}var el,ag;function RI(){if(ag)return el;ag=1;var e=xe(),t=De();el=n;function n(i,a){var s=t.partition(i,function(m){return e.has(m,"barycenter")}),u=s.lhs,l=e.sortBy(s.rhs,function(m){return-m.i}),c=[],d=0,f=0,h=0;u.sort(o(!!a)),h=r(c,l,h),e.forEach(u,function(m){h+=m.vs.length,c.push(m.vs),d+=m.barycenter*m.weight,f+=m.weight,h=r(c,l,h)});var b={vs:e.flatten(c,!0)};return f&&(b.barycenter=d/f,b.weight=f),b}function r(i,a,s){for(var u;a.length&&(u=e.last(a)).i<=s;)a.pop(),i.push(u.vs),s++;return s}function o(i){return function(a,s){return a.barycenter<s.barycenter?-1:a.barycenter>s.barycenter?1:i?s.i-a.i:a.i-s.i}}return el}var tl,sg;function MI(){if(sg)return tl;sg=1;var e=xe(),t=AI(),n=kI(),r=RI();tl=o;function o(s,u,l,c){var d=s.children(u),f=s.node(u),h=f?f.borderLeft:void 0,b=f?f.borderRight:void 0,m={};h&&(d=e.filter(d,function(S){return S!==h&&S!==b}));var g=t(s,d);e.forEach(g,function(S){if(s.children(S.v).length){var q=o(s,S.v,l,c);m[S.v]=q,e.has(q,"barycenter")&&a(S,q)}});var _=n(g,l);i(_,m);var y=r(_,c);if(h&&(y.vs=e.flatten([h,y.vs,b],!0),s.predecessors(h).length)){var v=s.node(s.predecessors(h)[0]),p=s.node(s.predecessors(b)[0]);e.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+v.order+p.order)/(y.weight+2),y.weight+=2}return y}function i(s,u){e.forEach(s,function(l){l.vs=e.flatten(l.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function a(s,u){e.isUndefined(s.barycenter)?(s.barycenter=u.barycenter,s.weight=u.weight):(s.barycenter=(s.barycenter*s.weight+u.barycenter*u.weight)/(s.weight+u.weight),s.weight+=u.weight)}return tl}var nl,ug;function PI(){if(ug)return nl;ug=1;var e=xe(),t=je().Graph;nl=n;function n(o,i,a){var s=r(o),u=new t({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(l){return o.node(l)});return e.forEach(o.nodes(),function(l){var c=o.node(l),d=o.parent(l);(c.rank===i||c.minRank<=i&&i<=c.maxRank)&&(u.setNode(l),u.setParent(l,d||s),e.forEach(o[a](l),function(f){var h=f.v===l?f.w:f.v,b=u.edge(h,l),m=e.isUndefined(b)?0:b.weight;u.setEdge(h,l,{weight:o.edge(f).weight+m})}),e.has(c,"minRank")&&u.setNode(l,{borderLeft:c.borderLeft[i],borderRight:c.borderRight[i]}))}),u}function r(o){for(var i;o.hasNode(i=e.uniqueId("_root")););return i}return nl}var rl,lg;function OI(){if(lg)return rl;lg=1;var e=xe();rl=t;function t(n,r,o){var i={},a;e.forEach(o,function(s){for(var u=n.parent(s),l,c;u;){if(l=n.parent(u),l?(c=i[l],i[l]=u):(c=a,a=u),c&&c!==u){r.setEdge(c,u);return}u=l}})}return rl}var ol,cg;function DI(){if(cg)return ol;cg=1;var e=xe(),t=TI(),n=qI(),r=MI(),o=PI(),i=OI(),a=je().Graph,s=De();ol=u;function u(f){var h=s.maxRank(f),b=l(f,e.range(1,h+1),"inEdges"),m=l(f,e.range(h-1,-1,-1),"outEdges"),g=t(f);d(f,g);for(var _=Number.POSITIVE_INFINITY,y,v=0,p=0;p<4;++v,++p){c(v%2?b:m,v%4>=2),g=s.buildLayerMatrix(f);var S=n(f,g);S<_&&(p=0,y=e.cloneDeep(g),_=S)}d(f,y)}function l(f,h,b){return e.map(h,function(m){return o(f,m,b)})}function c(f,h){var b=new a;e.forEach(f,function(m){var g=m.graph().root,_=r(m,g,b,h);e.forEach(_.vs,function(y,v){m.node(y).order=v}),i(m,b,_.vs)})}function d(f,h){e.forEach(h,function(b){e.forEach(b,function(m,g){f.node(m).order=g})})}return ol}var il,dg;function $I(){if(dg)return il;dg=1;var e=xe(),t=je().Graph,n=De();il={positionX:b,findType1Conflicts:r,findType2Conflicts:o,addConflict:a,hasConflict:s,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:f,findSmallestWidthAlignment:d,balance:h};function r(_,y){var v={};function p(S,q){var A=0,O=0,B=S.length,$=e.last(q);return e.forEach(q,function(P,N){var F=i(_,P),I=F?_.node(F).order:B;(F||P===$)&&(e.forEach(q.slice(O,N+1),function(L){e.forEach(_.predecessors(L),function(M){var U=_.node(M),K=U.order;(K<A||I<K)&&!(U.dummy&&_.node(L).dummy)&&a(v,M,L)})}),O=N+1,A=I)}),q}return e.reduce(y,p),v}function o(_,y){var v={};function p(q,A,O,B,$){var P;e.forEach(e.range(A,O),function(N){P=q[N],_.node(P).dummy&&e.forEach(_.predecessors(P),function(F){var I=_.node(F);I.dummy&&(I.order<B||I.order>$)&&a(v,F,P)})})}function S(q,A){var O=-1,B,$=0;return e.forEach(A,function(P,N){if(_.node(P).dummy==="border"){var F=_.predecessors(P);F.length&&(B=_.node(F[0]).order,p(A,$,N,O,B),$=N,O=B)}p(A,$,A.length,B,q.length)}),A}return e.reduce(y,S),v}function i(_,y){if(_.node(y).dummy)return e.find(_.predecessors(y),function(v){return _.node(v).dummy})}function a(_,y,v){if(y>v){var p=y;y=v,v=p}var S=_[y];S||(_[y]=S={}),S[v]=!0}function s(_,y,v){if(y>v){var p=y;y=v,v=p}return e.has(_[y],v)}function u(_,y,v,p){var S={},q={},A={};return e.forEach(y,function(O){e.forEach(O,function(B,$){S[B]=B,q[B]=B,A[B]=$})}),e.forEach(y,function(O){var B=-1;e.forEach(O,function($){var P=p($);if(P.length){P=e.sortBy(P,function(M){return A[M]});for(var N=(P.length-1)/2,F=Math.floor(N),I=Math.ceil(N);F<=I;++F){var L=P[F];q[$]===$&&B<A[L]&&!s(v,$,L)&&(q[L]=$,q[$]=S[$]=S[L],B=A[L])}}})}),{root:S,align:q}}function l(_,y,v,p,S){var q={},A=c(_,y,v,S),O=S?"borderLeft":"borderRight";function B(N,F){for(var I=A.nodes(),L=I.pop(),M={};L;)M[L]?N(L):(M[L]=!0,I.push(L),I=I.concat(F(L))),L=I.pop()}function $(N){q[N]=A.inEdges(N).reduce(function(F,I){return Math.max(F,q[I.v]+A.edge(I))},0)}function P(N){var F=A.outEdges(N).reduce(function(L,M){return Math.min(L,q[M.w]-A.edge(M))},Number.POSITIVE_INFINITY),I=_.node(N);F!==Number.POSITIVE_INFINITY&&I.borderType!==O&&(q[N]=Math.max(q[N],F))}return B($,A.predecessors.bind(A)),B(P,A.successors.bind(A)),e.forEach(p,function(N){q[N]=q[v[N]]}),q}function c(_,y,v,p){var S=new t,q=_.graph(),A=m(q.nodesep,q.edgesep,p);return e.forEach(y,function(O){var B;e.forEach(O,function($){var P=v[$];if(S.setNode(P),B){var N=v[B],F=S.edge(N,P);S.setEdge(N,P,Math.max(A(_,$,B),F||0))}B=$})}),S}function d(_,y){return e.minBy(e.values(y),function(v){var p=Number.NEGATIVE_INFINITY,S=Number.POSITIVE_INFINITY;return e.forIn(v,function(q,A){var O=g(_,A)/2;p=Math.max(q+O,p),S=Math.min(q-O,S)}),p-S})}function f(_,y){var v=e.values(y),p=e.min(v),S=e.max(v);e.forEach(["u","d"],function(q){e.forEach(["l","r"],function(A){var O=q+A,B=_[O],$;if(B!==y){var P=e.values(B);$=A==="l"?p-e.min(P):S-e.max(P),$&&(_[O]=e.mapValues(B,function(N){return N+$}))}})})}function h(_,y){return e.mapValues(_.ul,function(v,p){if(y)return _[y.toLowerCase()][p];var S=e.sortBy(e.map(_,p));return(S[1]+S[2])/2})}function b(_){var y=n.buildLayerMatrix(_),v=e.merge(r(_,y),o(_,y)),p={},S;e.forEach(["u","d"],function(A){S=A==="u"?y:e.values(y).reverse(),e.forEach(["l","r"],function(O){O==="r"&&(S=e.map(S,function(N){return e.values(N).reverse()}));var B=(A==="u"?_.predecessors:_.successors).bind(_),$=u(_,S,v,B),P=l(_,S,$.root,$.align,O==="r");O==="r"&&(P=e.mapValues(P,function(N){return-N})),p[A+O]=P})});var q=d(_,p);return f(p,q),h(p,_.graph().align)}function m(_,y,v){return function(p,S,q){var A=p.node(S),O=p.node(q),B=0,$;if(B+=A.width/2,e.has(A,"labelpos"))switch(A.labelpos.toLowerCase()){case"l":$=-A.width/2;break;case"r":$=A.width/2;break}if($&&(B+=v?$:-$),$=0,B+=(A.dummy?y:_)/2,B+=(O.dummy?y:_)/2,B+=O.width/2,e.has(O,"labelpos"))switch(O.labelpos.toLowerCase()){case"l":$=O.width/2;break;case"r":$=-O.width/2;break}return $&&(B+=v?$:-$),$=0,B}}function g(_,y){return _.node(y).width}return il}var al,fg;function BI(){if(fg)return al;fg=1;var e=xe(),t=De(),n=$I().positionX;al=r;function r(i){i=t.asNonCompoundGraph(i),o(i),e.forEach(n(i),function(a,s){i.node(s).x=a})}function o(i){var a=t.buildLayerMatrix(i),s=i.graph().ranksep,u=0;e.forEach(a,function(l){var c=e.max(e.map(l,function(d){return i.node(d).height}));e.forEach(l,function(d){i.node(d).y=u+c/2}),u+=c+s})}return al}var sl,hg;function LI(){if(hg)return sl;hg=1;var e=xe(),t=bI(),n=wI(),r=SI(),o=De().normalizeRanks,i=xI(),a=De().removeEmptyRanks,s=CI(),u=NI(),l=II(),c=DI(),d=BI(),f=De(),h=je().Graph;sl=b;function b(R,D){var T=D&&D.debugTiming?f.time:f.notime;T("layout",function(){var C=T("  buildLayoutGraph",function(){return B(R)});T("  runLayout",function(){m(C,T)}),T("  updateInputGraph",function(){g(R,C)})})}function m(R,D){D("    makeSpaceForEdgeLabels",function(){$(R)}),D("    removeSelfEdges",function(){W(R)}),D("    acyclic",function(){t.run(R)}),D("    nestingGraph.run",function(){s.run(R)}),D("    rank",function(){r(f.asNonCompoundGraph(R))}),D("    injectEdgeLabelProxies",function(){P(R)}),D("    removeEmptyRanks",function(){a(R)}),D("    nestingGraph.cleanup",function(){s.cleanup(R)}),D("    normalizeRanks",function(){o(R)}),D("    assignRankMinMax",function(){N(R)}),D("    removeEdgeLabelProxies",function(){F(R)}),D("    normalize.run",function(){n.run(R)}),D("    parentDummyChains",function(){i(R)}),D("    addBorderSegments",function(){u(R)}),D("    order",function(){c(R)}),D("    insertSelfEdges",function(){X(R)}),D("    adjustCoordinateSystem",function(){l.adjust(R)}),D("    position",function(){d(R)}),D("    positionSelfEdges",function(){ne(R)}),D("    removeBorderNodes",function(){K(R)}),D("    normalize.undo",function(){n.undo(R)}),D("    fixupEdgeLabelCoords",function(){M(R)}),D("    undoCoordinateSystem",function(){l.undo(R)}),D("    translateGraph",function(){I(R)}),D("    assignNodeIntersects",function(){L(R)}),D("    reversePoints",function(){U(R)}),D("    acyclic.undo",function(){t.undo(R)})}function g(R,D){e.forEach(R.nodes(),function(T){var C=R.node(T),V=D.node(T);C&&(C.x=V.x,C.y=V.y,D.children(T).length&&(C.width=V.width,C.height=V.height))}),e.forEach(R.edges(),function(T){var C=R.edge(T),V=D.edge(T);C.points=V.points,e.has(V,"x")&&(C.x=V.x,C.y=V.y)}),R.graph().width=D.graph().width,R.graph().height=D.graph().height}var _=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},v=["acyclicer","ranker","rankdir","align"],p=["width","height"],S={width:0,height:0},q=["minlen","weight","width","height","labeloffset"],A={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},O=["labelpos"];function B(R){var D=new h({multigraph:!0,compound:!0}),T=de(R.graph());return D.setGraph(e.merge({},y,ae(T,_),e.pick(T,v))),e.forEach(R.nodes(),function(C){var V=de(R.node(C));D.setNode(C,e.defaults(ae(V,p),S)),D.setParent(C,R.parent(C))}),e.forEach(R.edges(),function(C){var V=de(R.edge(C));D.setEdge(C,e.merge({},A,ae(V,q),e.pick(V,O)))}),D}function $(R){var D=R.graph();D.ranksep/=2,e.forEach(R.edges(),function(T){var C=R.edge(T);C.minlen*=2,C.labelpos.toLowerCase()!=="c"&&(D.rankdir==="TB"||D.rankdir==="BT"?C.width+=C.labeloffset:C.height+=C.labeloffset)})}function P(R){e.forEach(R.edges(),function(D){var T=R.edge(D);if(T.width&&T.height){var C=R.node(D.v),V=R.node(D.w),H={rank:(V.rank-C.rank)/2+C.rank,e:D};f.addDummyNode(R,"edge-proxy",H,"_ep")}})}function N(R){var D=0;e.forEach(R.nodes(),function(T){var C=R.node(T);C.borderTop&&(C.minRank=R.node(C.borderTop).rank,C.maxRank=R.node(C.borderBottom).rank,D=e.max(D,C.maxRank))}),R.graph().maxRank=D}function F(R){e.forEach(R.nodes(),function(D){var T=R.node(D);T.dummy==="edge-proxy"&&(R.edge(T.e).labelRank=T.rank,R.removeNode(D))})}function I(R){var D=Number.POSITIVE_INFINITY,T=0,C=Number.POSITIVE_INFINITY,V=0,H=R.graph(),re=H.marginx||0,fe=H.marginy||0;function ce(se){var x=se.x,w=se.y,k=se.width,E=se.height;D=Math.min(D,x-k/2),T=Math.max(T,x+k/2),C=Math.min(C,w-E/2),V=Math.max(V,w+E/2)}e.forEach(R.nodes(),function(se){ce(R.node(se))}),e.forEach(R.edges(),function(se){var x=R.edge(se);e.has(x,"x")&&ce(x)}),D-=re,C-=fe,e.forEach(R.nodes(),function(se){var x=R.node(se);x.x-=D,x.y-=C}),e.forEach(R.edges(),function(se){var x=R.edge(se);e.forEach(x.points,function(w){w.x-=D,w.y-=C}),e.has(x,"x")&&(x.x-=D),e.has(x,"y")&&(x.y-=C)}),H.width=T-D+re,H.height=V-C+fe}function L(R){e.forEach(R.edges(),function(D){var T=R.edge(D),C=R.node(D.v),V=R.node(D.w),H,re;T.points?(H=T.points[0],re=T.points[T.points.length-1]):(T.points=[],H=V,re=C),T.points.unshift(f.intersectRect(C,H)),T.points.push(f.intersectRect(V,re))})}function M(R){e.forEach(R.edges(),function(D){var T=R.edge(D);if(e.has(T,"x"))switch((T.labelpos==="l"||T.labelpos==="r")&&(T.width-=T.labeloffset),T.labelpos){case"l":T.x-=T.width/2+T.labeloffset;break;case"r":T.x+=T.width/2+T.labeloffset;break}})}function U(R){e.forEach(R.edges(),function(D){var T=R.edge(D);T.reversed&&T.points.reverse()})}function K(R){e.forEach(R.nodes(),function(D){if(R.children(D).length){var T=R.node(D),C=R.node(T.borderTop),V=R.node(T.borderBottom),H=R.node(e.last(T.borderLeft)),re=R.node(e.last(T.borderRight));T.width=Math.abs(re.x-H.x),T.height=Math.abs(V.y-C.y),T.x=H.x+T.width/2,T.y=C.y+T.height/2}}),e.forEach(R.nodes(),function(D){R.node(D).dummy==="border"&&R.removeNode(D)})}function W(R){e.forEach(R.edges(),function(D){if(D.v===D.w){var T=R.node(D.v);T.selfEdges||(T.selfEdges=[]),T.selfEdges.push({e:D,label:R.edge(D)}),R.removeEdge(D)}})}function X(R){var D=f.buildLayerMatrix(R);e.forEach(D,function(T){var C=0;e.forEach(T,function(V,H){var re=R.node(V);re.order=H+C,e.forEach(re.selfEdges,function(fe){f.addDummyNode(R,"selfedge",{width:fe.label.width,height:fe.label.height,rank:re.rank,order:H+ ++C,e:fe.e,label:fe.label},"_se")}),delete re.selfEdges})})}function ne(R){e.forEach(R.nodes(),function(D){var T=R.node(D);if(T.dummy==="selfedge"){var C=R.node(T.e.v),V=C.x+C.width/2,H=C.y,re=T.x-V,fe=C.height/2;R.setEdge(T.e,T.label),R.removeNode(D),T.label.points=[{x:V+2*re/3,y:H-fe},{x:V+5*re/6,y:H-fe},{x:V+re,y:H},{x:V+5*re/6,y:H+fe},{x:V+2*re/3,y:H+fe}],T.label.x=T.x,T.label.y=T.y}})}function ae(R,D){return e.mapValues(e.pick(R,D),Number)}function de(R){var D={};return e.forEach(R,function(T,C){D[C.toLowerCase()]=T}),D}return sl}var ul,vg;function zI(){if(vg)return ul;vg=1;var e=xe(),t=De(),n=je().Graph;ul={debugOrdering:r};function r(o){var i=t.buildLayerMatrix(o),a=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(o.nodes(),function(s){a.setNode(s,{label:s}),a.setParent(s,"layer"+o.node(s).rank)}),e.forEach(o.edges(),function(s){a.setEdge(s.v,s.w,{},s.name)}),e.forEach(i,function(s,u){var l="layer"+u;a.setNode(l,{rank:"same"}),e.reduce(s,function(c,d){return a.setEdge(c,d,{style:"invis"}),d})}),a}return ul}var ll,pg;function VI(){return pg||(pg=1,ll="0.8.5"),ll}var cl,gg;function FI(){return gg||(gg=1,cl={graphlib:je(),layout:LI(),debug:zI(),util:{time:De().time,notime:De().notime},version:VI()}),cl}var GI=FI();const mg=Wy(GI),HI={class:"workflow-editor-page"},UI={class:"editor-header"},jI={class:"header-left"},YI={key:0,class:"header-center"},KI={class:"workflow-name"},XI={key:1,class:"header-center"},WI={class:"header-right"},ZI=["title"],JI={class:"editor-layout"},QI={class:"nodes-sidebar"},eT={class:"nodes-list"},tT={class:"node-category"},nT={class:"node-item-icon icon-event"},rT={class:"node-category"},oT={class:"node-item-icon icon-action"},iT={class:"node-category"},aT={class:"node-item-icon icon-wait"},sT={key:0,class:"loading-overlay"},uT={class:"drawer-header"},lT={class:"drawer-badges"},cT={class:"node-type-badge"},dT={key:0,class:"node-id-badge"},fT={key:0,class:"node-edit-form"},hT={key:0,class:"node-description-card"},vT={class:"description-icon"},pT={class:"form-section"},gT={class:"node-description-card node-description-event"},mT={class:"description-icon event-icon"},yT={class:"form-section"},_T={key:1,class:"field-hint"},bT={class:"node-description-card node-description-wait"},wT={class:"description-icon wait-icon"},ET={class:"form-section"},ST={class:"time-inputs-grid"},xT={class:"form-group"},CT={class:"form-group"},NT={class:"form-group"},IT={key:4,class:"form-section"},TT={key:0,class:"required-indicator"},qT=["type","onUpdate:modelValue","placeholder"],AT=["onUpdate:modelValue","placeholder"],kT=["onUpdate:modelValue"],RT=["value"],MT=["onUpdate:modelValue"],PT=["value"],OT=["onUpdate:modelValue"],DT=["value"],$T={key:5,class:"helper-text"},BT={key:5,class:"empty-schema-msg"},LT={class:"drawer-footer"},yg=240,_g=100,zT={__name:"WorkflowEditor",setup(e){const t=Zy(),n=Jy(),r=l_(),o=Qy(),i=e_();t_();const a=t.params.id,{onNodeDragStop:s,onConnect:u,addEdges:l,setNodes:c,setEdges:d,fitView:f,onNodeClick:h,onPaneClick:b,addNodes:m,project:g}=Ee(),_=ye([]),y=ye([]),v=le(()=>r.loading),p=ye(null),S=ye(!1),q=le(()=>r.nodeTypes||[]);ye(!1);const A={custom:un(cx)},B=Object.entries({appointment_created:"Agendamento Criado",appointment_updated:"Agendamento Atualizado",appointment_completed:"Agendamento Realizado",appointment_canceled:"Agendamento Cancelado",procedure_completed:"Procedimento Realizado"}).map(([T,C])=>({value:T,label:C})),$=le(()=>i.templates.map(T=>({value:T._id,label:T.name}))),P=le(()=>o.procedures.map(T=>({value:T._id,label:T.name})));ut(async()=>{a&&(await Promise.all([r.fetchWorkflowById(a),r.fetchNodeTypes(),o.fetchProcedures(),i.fetchTemplates()]),N())});function N(){const T=r.nodes.map(H=>({id:H._id,type:"custom",position:H.position||{x:0,y:0},data:{...H,label:H.name}})),C=r.edges.map(H=>({id:H._id,source:H.sourceNodeId,target:H.targetNodeId,animated:!0,style:{stroke:"#b1b1b7"},label:H.conditionKey}));if(T.some(H=>H.position.x===0&&H.position.y===0)&&T.length>0){const H=I(T,C);_.value=H.nodes,y.value=H.edges}else _.value=T,y.value=C;setTimeout(()=>{f()},100)}const F=new mg.graphlib.Graph;F.setDefaultEdgeLabel(()=>({}));function I(T,C,V="TB"){const H=V==="LR";return F.setGraph({rankdir:V}),T.forEach(re=>{F.setNode(re.id,{width:yg,height:_g})}),C.forEach(re=>{F.setEdge(re.source,re.target)}),mg.layout(F),{nodes:T.map(re=>{const fe=F.node(re.id);return{...re,targetPosition:H?"left":"top",sourcePosition:H?"right":"bottom",position:{x:fe.x-yg/2,y:fe.y-_g/2}}}),edges:C}}s(async({node:T})=>{await r.updateNodePosition(T.id,T.position)}),u(T=>{const C={...T,id:`e${T.source}-${T.target}`,animated:!0};l([C]),r.addEdge(C)}),h(({node:T})=>{const C=T.data.config||{};T.data.subtype==="event_trigger"&&C.eventType==="procedure_completed"&&(Array.isArray(C.procedure_codes)||(C.procedureId?C.procedure_codes=[C.procedureId]:C.procedure_codes=[])),p.value={...T.data,config:C},S.value=!0}),b(()=>{p.value=null,S.value=!1});function L(){p.value=null,S.value=!1}async function M(){if(p.value)try{await r.updateNode(p.value._id,p.value);const T=_.value.findIndex(C=>C.id===p.value._id);T!==-1&&(_.value[T].data={...p.value}),L()}catch{}}async function U(){if(p.value&&confirm("Tem certeza que deseja excluir este n?"))try{await r.deleteNode(p.value._id),_.value=_.value.filter(T=>T.id!==p.value._id),y.value=y.value.filter(T=>T.source!==p.value._id&&T.target!==p.value._id),L()}catch{}}function K(){n.push("/app/workflows")}function W(T){return T?T.split("_").map(C=>C.charAt(0).toUpperCase()+C.slice(1)).join(" "):""}function X(T,C,V){T.dataTransfer&&(T.dataTransfer.setData("application/vueflow",JSON.stringify({type:C,subtype:V})),T.dataTransfer.effectAllowed="move")}function ne(T){T.preventDefault(),T.dataTransfer&&(T.dataTransfer.dropEffect="move")}async function ae(T){const C=T.dataTransfer?.getData("application/vueflow");if(!C)return;const{type:V,subtype:H}=JSON.parse(C),{left:re,top:fe}=document.querySelector(".vue-flow-basic").getBoundingClientRect(),ce=g({x:T.clientX-re,y:T.clientY-fe});try{const se=await r.addNode({type:V,subtype:H,position:ce});m([{id:se._id,type:"custom",position:se.position,data:{...se,label:W(se.subtype)}}])}catch{}}const de=le(()=>{if(!p.value)return[];const T=q.value.find(V=>V.type===p.value.type);if(!T)return[];const C=T.subtypes.find(V=>V.subtype===p.value.subtype);return C?C.configSchema:[]});async function R(){if(r.currentWorkflow)try{await r.updateWorkflow(a,{name:r.currentWorkflow.name,description:r.currentWorkflow.description})}catch{}}async function D(){r.currentWorkflow&&(r.currentWorkflow.isActive?await r.deactivateWorkflow(a):await r.activateWorkflow(a))}return(T,C)=>(j(),Z("div",HI,[z("header",UI,[z("div",jI,[z("button",{onClick:K,class:"header-icon-btn",title:"Voltar"},[ge(Y(n_),{size:18})]),C[11]||(C[11]=z("div",{class:"header-divider"},null,-1)),z("button",{class:"header-icon-btn",onClick:R,title:"Salvar"},[ge(Y(r_),{size:18})])]),v.value?(j(),Z("div",XI,[...C[12]||(C[12]=[z("div",{class:"skeleton skeleton-text",style:{width:"150px",height:"20px"}},null,-1)])])):(j(),Z("div",YI,[z("span",KI,Ie(Y(r).currentWorkflow?.name||"Novo Workflow"),1),z("span",{class:Oe(["workflow-status-badge",{active:Y(r).currentWorkflow?.isActive}])},Ie(Y(r).currentWorkflow?.isActive?"Ativo":"Rascunho"),3)])),z("div",WI,[z("button",{class:Oe(["toggle-status-btn",{active:Y(r).currentWorkflow?.isActive}]),onClick:D,title:Y(r).currentWorkflow?.isActive?"Desativar":"Ativar"},[...C[13]||(C[13]=[z("span",{class:"toggle-indicator"},null,-1)])],10,ZI)])]),z("div",JI,[z("aside",QI,[C[20]||(C[20]=z("div",{class:"sidebar-header"},[z("h3",null,"Blocos")],-1)),z("div",eT,[z("div",tT,[C[15]||(C[15]=z("h4",{class:"category-title"},"Gatilho",-1)),z("div",{class:"node-item node-event",draggable:"true",onDragstart:C[0]||(C[0]=V=>X(V,"event","event_trigger"))},[z("div",nT,[ge(Y(Ig),{size:18})]),C[14]||(C[14]=z("div",{class:"node-item-content"},[z("span",{class:"node-item-label"},"Gatilho de Evento"),z("span",{class:"node-item-desc"},"Inicia o workflow baseado em um evento do sistema")],-1))],32)]),z("div",rT,[C[17]||(C[17]=z("h4",{class:"category-title"},"Ao",-1)),z("div",{class:"node-item node-action",draggable:"true",onDragstart:C[1]||(C[1]=V=>X(V,"action","send_message"))},[z("div",oT,[ge(Y(Kn),{size:18})]),C[16]||(C[16]=z("div",{class:"node-item-content"},[z("span",{class:"node-item-label"},"Enviar Mensagem (WhatsApp)"),z("span",{class:"node-item-desc"},"Envia uma mensagem para o paciente")],-1))],32)]),z("div",iT,[C[19]||(C[19]=z("h4",{class:"category-title"},"Aguardar",-1)),z("div",{class:"node-item node-wait",draggable:"true",onDragstart:C[2]||(C[2]=V=>X(V,"wait","wait_days"))},[z("div",aT,[ge(Y(dl),{size:18})]),C[18]||(C[18]=z("div",{class:"node-item-content"},[z("span",{class:"node-item-label"},"Esperar Tempo"),z("span",{class:"node-item-desc"},"Aguarda X dias/horas antes de continuar")],-1))],32)])])]),z("div",{class:"editor-container",onDrop:ae,onDragover:ne},[v.value?(j(),Z("div",sT,[...C[21]||(C[21]=[o_('<div class="skeleton-nodes" data-v-0b63562a><div class="skeleton-node" style="top:50px;left:50%;transform:translateX(-50%);" data-v-0b63562a></div><div class="skeleton-line" style="top:130px;left:50%;height:50px;" data-v-0b63562a></div><div class="skeleton-node" style="top:180px;left:50%;transform:translateX(-50%);" data-v-0b63562a></div><div class="skeleton-line" style="top:260px;left:50%;height:50px;" data-v-0b63562a></div><div class="skeleton-node" style="top:310px;left:30%;" data-v-0b63562a></div><div class="skeleton-node" style="top:310px;right:30%;" data-v-0b63562a></div></div>',1)])])):(j(),Ne(Y(mS),{key:1,nodes:_.value,"onUpdate:nodes":C[3]||(C[3]=V=>_.value=V),edges:y.value,"onUpdate:edges":C[4]||(C[4]=V=>y.value=V),"node-types":A,"default-viewport":{zoom:1},"min-zoom":.2,"max-zoom":4,"fit-view-on-init":"",class:"vue-flow-basic"},{default:Me(()=>[ge(Y(NS),{"pattern-color":"#aaa",gap:16}),ge(Y(rx))]),_:1},8,["nodes","edges"]))],32)]),S.value?(j(),Ne(u_,{key:0,onClose:L},{header:Me(()=>[z("div",uT,[z("h2",null,Ie(p.value?W(p.value.subtype):"Detalhes"),1),z("div",lT,[z("span",cT,Ie(p.value?.type),1),p.value?(j(),Z("span",dT," ID #"+Ie(p.value._id?.slice(-6).toUpperCase()),1)):me("",!0)])])]),footer:Me(()=>[z("div",LT,[z("button",{class:"btn-delete",onClick:U},[ge(Y(a_),{size:16}),C[41]||(C[41]=$e(" Excluir N ",-1))]),ge(s_,{variant:"primary",onClick:M},{default:Me(()=>[...C[42]||(C[42]=[$e(" Salvar Alteraes ",-1)])]),_:1})])]),default:Me(()=>[p.value?(j(),Z("div",fT,[p.value.subtype==="send_message"?(j(),Z("div",hT,[z("div",vT,[ge(Y(Kn),{size:20})]),C[22]||(C[22]=z("div",{class:"description-content"},[z("h4",null,"Enviar Mensagem via WhatsApp"),z("p",null,"Este bloco envia automaticamente uma mensagem para o paciente quando ativado pelo fluxo do workflow.")],-1))])):me("",!0),p.value.subtype==="send_message"?(j(),Z(Te,{key:1},[z("div",pT,[C[23]||(C[23]=z("h3",{class:"section-title"},"Configurao da Mensagem",-1)),ge(ac,{modelValue:p.value.config.templateId,"onUpdate:modelValue":C[5]||(C[5]=V=>p.value.config.templateId=V),label:"Modelo de Mensagem",options:$.value,required:!0},null,8,["modelValue","options"]),C[24]||(C[24]=z("div",{class:"field-hint"},[z("span",{class:"hint-icon"},""),z("span",null,[$e("Os modelos so criados em "),z("strong",null,"Marketing  Modelos"),$e(". Eles podem conter variveis como {paciente}, {data_consulta}, etc.")])],-1))]),C[25]||(C[25]=z("div",{class:"info-card"},[z("h4",null,"Como funciona?"),z("ul",null,[z("li",null,"Quando o workflow chegar neste n, a mensagem ser enviada via WhatsApp"),z("li",null,"As variveis do modelo sero substitudas pelos dados reais do paciente"),z("li",null,"O envio ser registrado no histrico de mensagens")])],-1))],64)):p.value.subtype==="event_trigger"?(j(),Z(Te,{key:2},[z("div",gT,[z("div",mT,[ge(Y(Ng),{size:20})]),C[26]||(C[26]=z("div",{class:"description-content"},[z("h4",null,"Gatilho de Evento"),z("p",null,"Este bloco inicia o workflow quando o evento selecionado ocorre no sistema.")],-1))]),z("div",yT,[C[28]||(C[28]=z("h3",{class:"section-title"},"Configurao do Gatilho",-1)),ge(ac,{modelValue:p.value.config.eventType,"onUpdate:modelValue":C[6]||(C[6]=V=>p.value.config.eventType=V),label:"Tipo de Evento",options:Y(B),required:!0},null,8,["modelValue","options"]),p.value.config.eventType==="procedure_completed"?(j(),Ne(Ix,{key:0,modelValue:p.value.config.procedure_codes,"onUpdate:modelValue":C[7]||(C[7]=V=>p.value.config.procedure_codes=V),label:"Procedimentos (Combo)",options:P.value,required:!1,searchable:!0,placeholder:"Selecione um ou mais procedimentos",class:"mt-4"},null,8,["modelValue","options"])):me("",!0),p.value.config.eventType==="procedure_completed"?(j(),Z("div",_T,[...C[27]||(C[27]=[z("span",{class:"hint-icon"},"",-1),z("span",null,"Deixe em branco para disparar em qualquer procedimento. Selecione mltiplos para criar uma combo (ex: Botox + Fios). O workflow s dispara quando TODOS forem realizados juntos.",-1)])])):me("",!0)]),C[29]||(C[29]=z("div",{class:"info-card"},[z("h4",null,"Eventos Disponveis"),z("ul",null,[z("li",null,[z("strong",null,"Agendamento Criado:"),$e(" Dispara quando um novo agendamento  criado")]),z("li",null,[z("strong",null,"Agendamento Realizado:"),$e(" Dispara quando um atendimento  finalizado")]),z("li",null,[z("strong",null,"Agendamento Cancelado:"),$e(" Dispara quando um agendamento  cancelado")])])],-1))],64)):p.value.subtype==="wait_days"?(j(),Z(Te,{key:3},[z("div",bT,[z("div",wT,[ge(Y(dl),{size:20})]),C[30]||(C[30]=z("div",{class:"description-content"},[z("h4",null,"Tempo de Espera"),z("p",null,"Este bloco pausa a execuo do workflow pelo tempo configurado antes de continuar.")],-1))]),z("div",ET,[C[34]||(C[34]=z("h3",{class:"section-title"},"Configurao do Tempo",-1)),z("div",ST,[z("div",xT,[C[31]||(C[31]=z("label",null,"Dias",-1)),nt(z("input",{type:"number","onUpdate:modelValue":C[8]||(C[8]=V=>p.value.config.days=V),class:"form-input",placeholder:"0",min:"0"},null,512),[[en,p.value.config.days,void 0,{number:!0}]])]),z("div",CT,[C[32]||(C[32]=z("label",null,"Horas",-1)),nt(z("input",{type:"number","onUpdate:modelValue":C[9]||(C[9]=V=>p.value.config.hours=V),class:"form-input",placeholder:"0",min:"0",max:"23"},null,512),[[en,p.value.config.hours,void 0,{number:!0}]])]),z("div",NT,[C[33]||(C[33]=z("label",null,"Minutos",-1)),nt(z("input",{type:"number","onUpdate:modelValue":C[10]||(C[10]=V=>p.value.config.minutes=V),class:"form-input",placeholder:"0",min:"0",max:"59"},null,512),[[en,p.value.config.minutes,void 0,{number:!0}]])])]),C[35]||(C[35]=z("div",{class:"field-hint"},[z("span",{class:"hint-icon"},""),z("span",null,"Defina pelo menos um valor. O tempo total ser a soma de dias + horas + minutos.")],-1))]),C[36]||(C[36]=z("div",{class:"info-card"},[z("h4",null,"Como funciona?"),z("ul",null,[z("li",null,"O workflow ser pausado pelo tempo configurado"),z("li",null,"til para enviar lembretes aps X dias de um agendamento"),z("li",null,"Exemplo: Aguardar 7 dias para enviar pesquisa de satisfao")])],-1))],64)):de.value.length>0?(j(),Z("div",IT,[C[39]||(C[39]=z("h3",{class:"section-title"},"Configuraes",-1)),(j(!0),Z(Te,null,ot(de.value,V=>(j(),Z("div",{key:V.key,class:"form-group"},[z("label",null,[$e(Ie(V.label)+" ",1),V.required?(j(),Z("span",TT,"*")):me("",!0)]),V.type==="string"||V.type==="number"?nt((j(),Z("input",{key:0,type:V.type==="number"?"number":"text","onUpdate:modelValue":H=>p.value.config[V.key]=H,class:"form-input",placeholder:V.label},null,8,qT)),[[i_,p.value.config[V.key]]]):V.type==="text"?nt((j(),Z("textarea",{key:1,"onUpdate:modelValue":H=>p.value.config[V.key]=H,rows:"4",class:"form-input",placeholder:V.label},null,8,AT)),[[en,p.value.config[V.key]]]):V.type==="select"?nt((j(),Z("select",{key:2,"onUpdate:modelValue":H=>p.value.config[V.key]=H,class:"form-input"},[(j(!0),Z(Te,null,ot(V.options,H=>(j(),Z("option",{key:H,value:H},Ie(H),9,RT))),128))],8,kT)),[[Or,p.value.config[V.key]]]):V.type==="procedure-select"?nt((j(),Z("select",{key:3,"onUpdate:modelValue":H=>p.value.config[V.key]=H,class:"form-input"},[C[37]||(C[37]=z("option",{value:"",disabled:""},"Selecione um procedimento",-1)),(j(!0),Z(Te,null,ot(Y(o).procedures,H=>(j(),Z("option",{key:H._id,value:H._id},Ie(H.name),9,PT))),128))],8,MT)),[[Or,p.value.config[V.key]]]):V.type==="template-select"?nt((j(),Z("select",{key:4,"onUpdate:modelValue":H=>p.value.config[V.key]=H,class:"form-input"},[C[38]||(C[38]=z("option",{value:"",disabled:""},"Selecione um modelo",-1)),(j(!0),Z(Te,null,ot(Y(i).templates,H=>(j(),Z("option",{key:H._id,value:H._id},Ie(H.name),9,DT))),128))],8,OT)),[[Or,p.value.config[V.key]]]):me("",!0),V.helperText?(j(),Z("span",$T,Ie(V.helperText),1)):me("",!0)]))),128))])):(j(),Z("div",BT,[...C[40]||(C[40]=[z("p",null,"Este bloco no possui configuraes adicionais.",-1)])]))])):me("",!0)]),_:1})):me("",!0)]))}},GT=Tl(zT,[["__scopeId","data-v-0b63562a"]]);export{GT as default};
